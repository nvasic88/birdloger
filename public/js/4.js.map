{"version":3,"sources":["webpack:///./resources/js/components/inputs/DateInput.vue?4c19","webpack:///./resources/js/components/inputs/DateInput.vue?e061","webpack:///resources/js/components/inputs/DateInput.vue","webpack:///./resources/js/components/inputs/DateInput.vue","webpack:///./resources/js/components/inputs/SpatialInput.vue?f472","webpack:///./resources/js/components/inputs/SpatialInput.vue?4894","webpack:///resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/mixins/FormMixin.js","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?0331","webpack:///resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?b12f","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue"],"names":["name","props","label","type","String","default","year","Number","month","day","placeholders","Object","errors","computed","now","months","this","isThisYear","splice","days","isThisMonth","watch","truncateDay","methods","length","onYearInput","$emit","value","onMonthInput","onDayInput","component","_vm","_h","$createElement","_c","_self","attrs","has","first","on","_v","domProps","_l","index","key","_s","accuracy","elevation","latitude","longitude","location","hasOtherErrors","Boolean","data","emptyAccuracy","calculateEmptyAccuracy","window","App","gmaps","center","zoom","showDetails","elevationService","position","coordinatesSet","isNaN","mapHasErrors","newAccuracy","centerCoordinates","lat","lng","getElevation","created","setCurrentLocationAsMapCenter","castNumber","onLocationInput","updateLocation","event","target","onLongitudeInput","updateLongitude","onLatitudeInput","updateLatitude","onAccuracyInput","updateAccuracy","onElevationInput","updateElevation","setMarker","updateRadius","radius","google","maps","ElevationService","getElevationForLocations","locations","status","ElevationStatus","OK","results","onZoomChanged","parseInt","Math","pow","navigator","geolocation","getCurrentPosition","staticClass","trans","staticStyle","streetViewControl","strokeWeight","_e","class","$event","directives","rawName","expression","_t","action","required","method","redirectUrl","cancelUrl","submitMore","shouldConfirmSubmit","confirmSubmitMessage","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","form","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","locale","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","Form","resetOnSuccess","e","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","submitWithRedirect","confirmSubmit","onConfirm","options","message","confirmText","cancelText","onCancel","promptForReason","$buefy","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","$refs","input","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","toast","open","notifyNoChangesAndRedirect","setTimeout","href","processing","isDirty","performSubmitWithRedirect","reason","toLowerCase","then","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","reset","populate","hookAfterSubmitWithoutRedirect","error","duration","_get","_isEqual","initial","confirmCancel","preventDefault","taxon","url","except","autofocus","selected","loading","haveThumbnail","thumbnail_url","icon","fetchData","limit","params","forEach","onSelect","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","enterPressed","autocomplete","isActive","ref","nativeOn","indexOf","_k","scopedSlots","_u","fn","native_name"],"mappings":"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","file":"js/4.js?id=7e1cc7e98cd7ba630c93","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{\"label\":_vm.label}},[_c('b-field',{attrs:{\"expanded\":\"\",\"grouped\":\"\"}},[_c('b-field',{attrs:{\"type\":_vm.errors.has('year') ? 'is-danger': '',\"message\":_vm.errors.has('year') ? _vm.errors.first('year'): '',\"expanded\":\"\"}},[_c('b-input',{attrs:{\"placeholder\":_vm.placeholders.year,\"value\":_vm.year},on:{\"input\":_vm.onYearInput}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('month') ? 'is-danger': '',\"message\":_vm.errors.has('month') ? _vm.errors.first('month'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.month,\"value\":_vm.month,\"expanded\":\"\"},on:{\"input\":_vm.onMonthInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{key:(\"month-select-\" + index),domProps:{\"value\":(index + 1),\"textContent\":_vm._s(month)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('day') ? 'is-danger': '',\"message\":_vm.errors.has('day') ? _vm.errors.first('day'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.day,\"value\":_vm.day,\"expanded\":\"\"},on:{\"input\":_vm.onDayInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.days),function(day){return _c('option',{key:(\"day-select-\" + day),domProps:{\"value\":day,\"textContent\":_vm._s(day)}})})],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"","<template>\r\n  <b-field :label=\"label\">\r\n    <b-field expanded grouped>\r\n      <b-field\r\n        :type=\"errors.has('year') ? 'is-danger': ''\"\r\n        :message=\"errors.has('year') ? errors.first('year'): ''\"\r\n        expanded\r\n      >\r\n        <b-input :placeholder=\"placeholders.year\" :value=\"year\" @input=\"onYearInput\" />\r\n      </b-field>\r\n\r\n      <b-field\r\n        :type=\"errors.has('month') ? 'is-danger': ''\"\r\n        :message=\"errors.has('month') ? errors.first('month'): ''\"\r\n        expanded\r\n      >\r\n        <b-select :placeholder=\"placeholders.month\" :value=\"month\" @input=\"onMonthInput\" expanded>\r\n          <option :value=\"null\"></option>\r\n          <option v-for=\"(month, index) in months\" :value=\"(index + 1)\" v-text=\"month\" :key=\"`month-select-${index}`\"></option>\r\n        </b-select>\r\n      </b-field>\r\n\r\n      <b-field\r\n        :type=\"errors.has('day') ? 'is-danger': ''\"\r\n        :message=\"errors.has('day') ? errors.first('day'): ''\"\r\n        expanded\r\n      >\r\n        <b-select :placeholder=\"placeholders.day\" :value=\"day\" @input=\"onDayInput\" expanded>\r\n          <option :value=\"null\"></option>\r\n          <option v-for=\"day in days\" :value=\"day\" v-text=\"day\" :key=\"`day-select-${day}`\"></option>\r\n        </b-select>\r\n      </b-field>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from '@/dayjs'\r\nimport _range from 'lodash/range'\r\n\r\nexport default {\r\n  name: 'nzDateInput',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'Date'\r\n    },\r\n\r\n    year: {\r\n      type: Number,\r\n      default: dayjs().year()\r\n    },\r\n\r\n    month: {\r\n      type: Number,\r\n      default: dayjs().month() + 1\r\n    },\r\n\r\n    day: {\r\n      type: Number,\r\n      default: dayjs().date()\r\n    },\r\n\r\n    placeholders: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          year: 'Year',\r\n          month: 'Month',\r\n          day: 'Day'\r\n        }\r\n      }\r\n    },\r\n\r\n    errors: {\r\n      type: Object,\r\n      default: () => ({ has: () => false })\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    now() {\r\n      return dayjs()\r\n    },\r\n\r\n    months() {\r\n      if (!this.year || this.year > dayjs().year()) return []\r\n\r\n      const isThisYear = this.year === dayjs().year()\r\n\r\n      let months = dayjs.months()\r\n\r\n      if (isThisYear) months.splice(dayjs().month() + 1)\r\n\r\n      return months\r\n    },\r\n\r\n    days() {\r\n      const haveDate = this.year && this.month\r\n\r\n      if (!haveDate) return []\r\n\r\n      const isThisMonth = this.year === dayjs().year() && (this.month - 1) === dayjs().month()\r\n\r\n      let days = dayjs(new Date(this.year, this.month - 1, 1)).daysInMonth()\r\n\r\n      if (isThisMonth) days = dayjs().date()\r\n\r\n      return _range(1, days + 1)\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    year() {\r\n      if (this.year > dayjs().year() || this.months.length < this.month -1)  {\r\n          this.onMonthInput(null)\r\n      }\r\n\r\n      this.truncateDay()\r\n    },\r\n\r\n    month() {\r\n      this.truncateDay()\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    truncateDay() {\r\n      if (this.days.length < this.day)  {\r\n          this.onDayInput(null)\r\n      }\r\n    },\r\n\r\n    onYearInput(value) {\r\n      this.$emit('update:year', +value || null)\r\n    },\r\n\r\n    onMonthInput(value) {\r\n      this.$emit('update:month', value)\r\n    },\r\n\r\n    onDayInput(value) {\r\n      this.$emit('update:day', value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render, staticRenderFns } from \"./DateInput.vue?vue&type=template&id=a96f3ce2&\"\nimport script from \"./DateInput.vue?vue&type=script&lang=js&\"\nexport * from \"./DateInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spatial-input\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.field_observations.map')}},[_c('gmap-map',{staticStyle:{\"width\":\"100%\",\"min-height\":\"400px\"},attrs:{\"center\":_vm.centerCoordinates,\"zoom\":_vm.center.zoom,\"options\":{streetViewControl:false}},on:{\"click\":_vm.setMarker,\"zoom_changed\":_vm.onZoomChanged}},[_c('gmap-marker',{attrs:{\"position\":_vm.position,\"clickable\":true,\"draggable\":true},on:{\"dragend\":_vm.setMarker}}),_vm._v(\" \"),(_vm.position && _vm.newAccuracy)?_c('gmap-circle',{attrs:{\"center\":_vm.position,\"radius\":_vm.newAccuracy,\"editable\":true,\"options\":{ strokeWeight: .75 }},on:{\"radius_changed\":_vm.updateRadius}}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"has-text-right\"},[(_vm.mapHasErrors)?_c('span',{staticClass:\"has-text-danger is-size-7\"},[_vm._v(_vm._s(_vm.trans('Some fields have errors')))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button is-white is-small is-text\",class:{'has-text-danger': _vm.mapHasErrors},attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showDetails = !_vm.showDetails}}},[_vm._v(_vm._s(_vm.trans('labels.field_observations.details')))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetails),expression:\"showDetails\"}]},[_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.latitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('latitude')},attrs:{\"placeholder\":\"f.e. 42.5234\"},domProps:{\"value\":_vm.latitude},on:{\"input\":_vm.onLatitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('latitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('latitude'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.longitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('longitude')},attrs:{\"placeholder\":\"f.e. 19.1234\"},domProps:{\"value\":_vm.longitude},on:{\"input\":_vm.onLongitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('longitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('longitude'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.accuracy_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 100\"},domProps:{\"value\":_vm.accuracy},on:{\"input\":_vm.onAccuracyInput}})]),_vm._v(\" \"),(_vm.errors.has('accuracy'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('accuracy'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.elevation_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 500\"},domProps:{\"value\":_vm.elevation},on:{\"input\":_vm.onElevationInput}})]),_vm._v(\" \"),(_vm.errors.has('elevation'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('elevation'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.location')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('location')},attrs:{\"placeholder\":\"Location\"},domProps:{\"value\":_vm.location},on:{\"input\":_vm.onLocationInput}})]),_vm._v(\" \"),(_vm.errors.has('location'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('location'))}}):_vm._e()]),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"spatial-input\">\r\n    <b-field :label=\"trans('labels.field_observations.map')\" class=\"is-required\">\r\n      <gmap-map\r\n        style=\"width: 100%; min-height: 400px\"\r\n        :center=\"centerCoordinates\"\r\n        :zoom=\"center.zoom\"\r\n        @click=\"setMarker\"\r\n        @zoom_changed=\"onZoomChanged\"\r\n        :options=\"{streetViewControl:false}\"\r\n      >\r\n        <gmap-marker\r\n          :position=\"position\"\r\n          :clickable=\"true\"\r\n          :draggable=\"true\"\r\n          @dragend=\"setMarker\"\r\n        />\r\n\r\n        <gmap-circle\r\n          v-if=\"position && newAccuracy\"\r\n          :center=\"position\"\r\n          :radius=\"newAccuracy\"\r\n          :editable=\"true\"\r\n          @radius_changed=\"updateRadius\"\r\n          :options=\"{ strokeWeight: .75 }\"\r\n        />\r\n      </gmap-map>\r\n    </b-field>\r\n\r\n    <div class=\"has-text-right\">\r\n      <span v-if=\"mapHasErrors\" class=\"has-text-danger is-size-7\">{{ trans('Some fields have errors') }}</span>\r\n\r\n      <button type=\"button\" class=\"button is-white is-small is-text\" :class=\"{'has-text-danger': mapHasErrors}\" @click=\"showDetails = !showDetails\">{{ trans('labels.field_observations.details') }}</button>\r\n    </div>\r\n\r\n    <div v-show=\"showDetails\">\r\n      <div class=\"field is-grouped\">\r\n        <div class=\"field is-expanded is-required\">\r\n          <label class=\"label is-small\">{{ trans('labels.field_observations.latitude') }}</label>\r\n\r\n          <div class=\"control is-fullwidth\">\r\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('latitude')}\" :value=\"latitude\" @input=\"onLatitudeInput\" placeholder=\"f.e. 42.5234\">\r\n          </div>\r\n\r\n          <p class=\"help is-danger\" v-if=\"errors.has('latitude')\" v-text=\"errors.first('latitude')\"></p>\r\n        </div>\r\n\r\n        <div class=\"field is-expanded is-required\">\r\n          <label class=\"label is-small\">{{ trans('labels.field_observations.longitude') }}</label>\r\n\r\n          <div class=\"control is-fullwidth\">\r\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('longitude')}\" :value=\"longitude\" @input=\"onLongitudeInput\" placeholder=\"f.e. 19.1234\">\r\n          </div>\r\n\r\n          <p class=\"help is-danger\" v-if=\"errors.has('longitude')\" v-text=\"errors.first('longitude')\"></p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"field is-grouped\">\r\n        <div class=\"field is-expanded\">\r\n          <label class=\"label is-small\">{{ trans('labels.field_observations.accuracy_m') }}</label>\r\n\r\n          <div class=\"control is-fullwidth\">\r\n            <input class=\"input is-small\" :value=\"accuracy\" @input=\"onAccuracyInput\" placeholder=\"f.e. 100\">\r\n          </div>\r\n\r\n          <p class=\"help is-danger\" v-if=\"errors.has('accuracy')\" v-text=\"errors.first('accuracy')\"></p>\r\n        </div>\r\n\r\n        <div class=\"field is-expanded\">\r\n          <label class=\"label is-small\">{{ trans('labels.field_observations.elevation_m') }}</label>\r\n\r\n          <div class=\"control is-fullwidth\">\r\n            <input class=\"input is-small\" :value=\"elevation\" @input=\"onElevationInput\" placeholder=\"f.e. 500\">\r\n          </div>\r\n\r\n          <p class=\"help is-danger\" v-if=\"errors.has('elevation')\" v-text=\"errors.first('elevation')\"></p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"field is-expanded\">\r\n        <label class=\"label is-small\">{{ trans('labels.field_observations.location') }}</label>\r\n\r\n        <div class=\"control is-fullwidth\">\r\n          <input class=\"input is-small\" :class=\"{'is-danger': errors.has('location')}\" :value=\"location\" @input=\"onLocationInput\" placeholder=\"Location\">\r\n        </div>\r\n\r\n        <p class=\"help is-danger\" v-if=\"errors.has('location')\" v-text=\"errors.first('location')\"></p>\r\n      </div>\r\n\r\n      <slot />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _debounce from 'lodash/debounce'\r\n\r\nconst ZOOM_ONE = 6144000\r\n\r\nexport default {\r\n  name: 'nzSpatialInput',\r\n\r\n  props: {\r\n    accuracy: Number,\r\n    elevation: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    latitude: {\r\n      type: Number,\r\n      default: 41.0\r\n    },\r\n    longitude: {\r\n      type: Number,\r\n      default: 19.0\r\n    },\r\n    location: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    errors: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    hasOtherErrors: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      emptyAccuracy: this.calculateEmptyAccuracy(window.App.gmaps.center.zoom),\r\n      showDetails: true,\r\n      elevationService: null,\r\n      center: window.App.gmaps.center\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * Position object from coordinates.\r\n     *\r\n     * @return {Object}\r\n     */\r\n    position() {\r\n      if (!this.coordinatesSet) {\r\n        return null\r\n      }\r\n\r\n      return {lat: this.latitude, lng: this.longitude}\r\n    },\r\n\r\n    /**\r\n     * Check if coordinate are set.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    coordinatesSet() {\r\n      return !(isNaN(this.latitude)||\r\n        this.latitude === null ||\r\n        isNaN(this.longitude) ||\r\n        this.longitude === null\r\n      )\r\n    },\r\n\r\n    /**\r\n     * Check if any of the fields has an error.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    mapHasErrors() {\r\n      return this.hasOtherErrors ||\r\n          this.errors.has('latitude') ||\r\n          this.errors.has('longitude') ||\r\n          this.errors.has('elevation') ||\r\n          this.errors.has('accuracy') ||\r\n          this.errors.has('location')\r\n    },\r\n\r\n    newAccuracy () {\r\n      return this.accuracy || this.emptyAccuracy\r\n    },\r\n\r\n    centerCoordinates() {\r\n      return this.position || {\r\n        lat: this.center.latitude,\r\n        lng: this.center.longitude\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    /**\r\n     * Get elevation when coordinates change.\r\n     */\r\n    position(value) {\r\n      if (this.coordinatesSet) {\r\n        this.getElevation(value)\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.setCurrentLocationAsMapCenter()\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Cast to number or null.\r\n     *\r\n     * @param  {any} value\r\n     * @return {Number}\r\n     */\r\n    castNumber(value) {\r\n      return isNaN(value) || value === '' ? null : Number(value)\r\n    },\r\n\r\n    /**\r\n     * Handle location input.\r\n     * @param {Object} event\r\n     */\r\n    onLocationInput(event) {\r\n      this.updateLocation(event.target.value)\r\n    },\r\n\r\n    /**\r\n     * Sync location property.\r\n     *\r\n     * @param {String} value\r\n     */\r\n    updateLocation(value) {\r\n      this.$emit('update:location', value)\r\n    },\r\n\r\n    /**\r\n     * Handle longitude input.\r\n     * @param  {[type]} event [description]\r\n     * @return {[type]}       [description]\r\n     */\r\n    onLongitudeInput: _debounce(function (event) {\r\n      this.updateLongitude(event.target.value)\r\n    }, 1000),\r\n\r\n    /**\r\n     * Sync longitude property.\r\n     *\r\n     * @param {Number} value\r\n     */\r\n    updateLongitude(value) {\r\n      this.$emit('update:longitude', this.castNumber(value))\r\n    },\r\n\r\n    /**\r\n     * Handle latitude input.\r\n     *\r\n     * @param {Object} event\r\n     */\r\n    onLatitudeInput: _debounce(function (event) {\r\n      this.updateLatitude(event.target.value)\r\n    }, 1000),\r\n\r\n    /**\r\n     * Sync latitude property.\r\n     *\r\n     * @param {Number} value\r\n     */\r\n    updateLatitude(value) {\r\n      this.$emit('update:latitude', this.castNumber(value))\r\n    },\r\n\r\n    /**\r\n    * Handle accuracy input.\r\n    *\r\n    * @param {Object} event\r\n    */\r\n    onAccuracyInput: _debounce(function (event) {\r\n      this.updateAccuracy(event.target.value)\r\n    }, 1000),\r\n\r\n    /**\r\n     * Sync accuracy property.\r\n     *\r\n     * @param {Number} value\r\n     */\r\n    updateAccuracy(value) {\r\n      this.$emit('update:accuracy', this.castNumber(value))\r\n    },\r\n\r\n    /**\r\n     * Handle elevation input.\r\n     *\r\n     * @param {Object} event\r\n     */\r\n    onElevationInput(event) {\r\n      this.updateElevation(event.target.value)\r\n    },\r\n\r\n    /**\r\n     * Sync elevation property.\r\n     *\r\n     * @param {Number} value\r\n     */\r\n    updateElevation(value) {\r\n      this.$emit('update:elevation', this.castNumber(value))\r\n    },\r\n\r\n    /**\r\n     * Update coordinates from marker position.\r\n     *\r\n     * @param {Object} position\r\n     */\r\n    setMarker(position) {\r\n      let lat = position.latLng.lat()\r\n      let lng = position.latLng.lng()\r\n\r\n      this.updateLatitude(lat)\r\n      this.updateLongitude(lng)\r\n    },\r\n\r\n    /**\r\n     * Update accuracy from circle radius on gmaps.\r\n     *\r\n     * @param  {Number} value\r\n     */\r\n    updateRadius(value) {\r\n      let radius = parseInt(value)\r\n\r\n      if (this.accuracy === null && radius === this.emptyAccuracy) {\r\n        return\r\n      }\r\n\r\n      this.updateAccuracy(radius)\r\n    },\r\n\r\n    /**\r\n     * Get elevation using Google's service.\r\n     *\r\n     * @param  {Object} position\r\n     */\r\n    getElevation(position) {\r\n      // Do nothing if we still don't have gmaps library loaded.\r\n      if (!google || !google.maps || !google.maps.ElevationService) {\r\n        return\r\n      }\r\n\r\n      // We don't initialize service when component is created\r\n      // because Gmap library probably isn't loaded yet,\r\n      // so we do it on first use of this method.\r\n      if (!this.elevationService) {\r\n        this.elevationService = new google.maps.ElevationService()\r\n      }\r\n\r\n      this.elevationService.getElevationForLocations({\r\n        locations: [position]\r\n      }, (results, status) => {\r\n        if (status != google.maps.ElevationStatus.OK || !results.length) {\r\n          return\r\n        }\r\n\r\n        const elevation = parseInt(results[0].elevation)\r\n\r\n        this.$emit('elevation-fetched', elevation)\r\n\r\n        this.updateElevation(elevation)\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Recalculate default accuracy when zoom is changed.\r\n     * @param  {Number} zoom\r\n     */\r\n    onZoomChanged(zoom) {\r\n      this.emptyAccuracy = this.calculateEmptyAccuracy(zoom)\r\n    },\r\n\r\n    /**\r\n     * Calculate accuracy based on map zoom.\r\n     * @param  {Number} zoom\r\n     * @return {Number}\r\n     */\r\n    calculateEmptyAccuracy(zoom) {\r\n      return parseInt(ZOOM_ONE / Math.pow(2, zoom))\r\n    },\r\n\r\n    /**\r\n     * Use browser location to set map center.\r\n     */\r\n    setCurrentLocationAsMapCenter() {\r\n      // We don't want to use this feature if the marker is set.\r\n      if (!navigator.geolocation || this.position) {\r\n        return\r\n      }\r\n\r\n      navigator.geolocation.getCurrentPosition(position => {\r\n        if (this.position) {\r\n          return\r\n        }\r\n\r\n        this.center.latitude = position.coords.latitude\r\n        this.center.longitude = position.coords.longitude\r\n        this.center.zoom = 10\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render, staticRenderFns } from \"./SpatialInput.vue?vue&type=template&id=3a526b40&\"\nimport script from \"./SpatialInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SpatialInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Form from 'form-backend-validation'\r\nimport _pick from 'lodash/pick'\r\nimport _get from 'lodash/get'\r\nimport _isEqual from 'lodash/isEqual'\r\n\r\n\r\nexport default {\r\n  name: 'nzFieldObservationForm',\r\n\r\n  props: {\r\n    action: {\r\n      type: String,\r\n      required: true\r\n    },\r\n\r\n    method: {\r\n      type: String,\r\n      default: 'POST'\r\n    },\r\n\r\n    redirectUrl: String,\r\n    cancelUrl: String,\r\n\r\n    submitMore: Boolean,\r\n    shouldConfirmSubmit: Boolean,\r\n    confirmSubmitMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('You are about to submit')\r\n      }\r\n    },\r\n    shouldAskReason: Boolean,\r\n    shouldConfirmCancel: Boolean,\r\n    submitOnlyDirty: Boolean,\r\n    submitOnlyDirtyMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('There are no changes, the data will not be saved.')\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: this.newForm(),\r\n      keepAfterSubmit: [],\r\n      submittingWithRedirect: false,\r\n      submittingWithoutRedirect: false,\r\n      confirmingSubmit: false,\r\n      confirmingCancel: false,\r\n      locale: window.App.locale\r\n    }\r\n  },\r\n\r\n  created() {\r\n    document.addEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  beforeDestroy() {\r\n    document.removeEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Create new form instance.\r\n     *\r\n     * @param  {Object} data default form data\r\n     * @return {Form}\r\n     */\r\n    newForm(data = {}) {\r\n      return new Form(data, {\r\n        resetOnSuccess: false\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Keyboard shortcuts.\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    registerKeyListener(e) {\r\n      const enter = 13 === (e.which || e.keyCode)\r\n\r\n      if (e.ctrlKey && e.shiftKey && enter) {\r\n        this.submitMore && this.submitWithoutRedirect()\r\n      } else if (e.ctrlKey && enter) {\r\n        this.submitWithRedirect()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Confirm submit.\r\n     *\r\n     * @param {Function} onConfirm\r\n     */\r\n    confirmSubmit(onConfirm) {\r\n      if (this.confirmingSubmit) return\r\n\r\n      this.confirmingSubmit = true\r\n\r\n      const options = {\r\n        message: this.confirmSubmitMessage,\r\n        confirmText: this.trans('buttons.save'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        onConfirm,\r\n        onCancel: () => { this.confirmingSubmit = false }\r\n      }\r\n\r\n      if (!this.shouldAskReason) {\r\n        return this.$buefy.dialog.confirm(options)\r\n      }\r\n\r\n      return this.promptForReason(options)\r\n    },\r\n\r\n    /**\r\n     * Prompt the user for reason of change.\r\n     *\r\n     * @param  {Object} options\r\n     * @return {Vue}\r\n     */\r\n    promptForReason(options) {\r\n      const dialog = this.$buefy.dialog.prompt({\r\n        ...options,\r\n        inputAttrs: {\r\n            placeholder: this.trans('Reason'),\r\n            required: true,\r\n            maxlength: 255\r\n        }\r\n      })\r\n\r\n      // Custom localized validation for the prompt input.\r\n      dialog.$nextTick(() => {\r\n        dialog.$refs.input.addEventListener('invalid', (e) => {\r\n          e.target.setCustomValidity('')\r\n\r\n          if (!e.target.validity.valid) {\r\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\r\n          }\r\n        })\r\n\r\n        dialog.$refs.input.addEventListener('input', (e) => {\r\n          dialog.validationMessage = null\r\n        })\r\n      })\r\n\r\n      return dialog\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes.\r\n     */\r\n    notifyNoChanges() {\r\n      this.$buefy.toast.open({\r\n        message: this.submitOnlyDirtyMessage,\r\n        type: 'is-info'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes and redirect.\r\n     */\r\n    notifyNoChangesAndRedirect() {\r\n      this.notifyNoChanges()\r\n\r\n      setTimeout(() => {\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    submitWithRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\r\n\r\n      this.performSubmitWithRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    performSubmitWithRedirect(reason = null) {\r\n      this.submittingWithRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with redirect.\r\n     */\r\n    onSuccessfulSubmitWithRedirect() {\r\n      this.form.processing = true\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // We want to wait a bit before we send the user to redirect route\r\n      // so we can show the message that the action was successful.\r\n      setTimeout(() => {\r\n        this.form.processing = false\r\n        this.submittingWithRedirect = false\r\n\r\n        this.hookAfterSubmitWithRedirect()\r\n\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Perform after submit with redirect is successful.\r\n     */\r\n    hookAfterSubmitWithRedirect() {},\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    submitWithoutRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\r\n\r\n      this.performSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    performSubmitWithoutRedirect(reason = null) {\r\n      this.submittingWithoutRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithoutRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with no redirect.\r\n     */\r\n    onSuccessfulSubmitWithoutRedirect() {\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // Reset the form but remember some data.\r\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\r\n      this.form.reset()\r\n      this.form.populate(keep)\r\n\r\n      this.hookAfterSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Perform after submit without redirect is successful.\r\n     */\r\n    hookAfterSubmitWithoutRedirect() {},\r\n\r\n    /**\r\n     * Handle failed form submit.\r\n     *\r\n     * @param {Error} error\r\n     */\r\n    onFailedSubmit(error) {\r\n      this.submittingWithRedirect = false\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: _get(error, 'response.data.message', error.message),\r\n        type: 'is-danger'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Check if form is changed.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    isDirty() {\r\n      return ! _isEqual(this.form.data(), this.form.initial)\r\n    },\r\n\r\n    /**\r\n     * Confirmation dialog for canceling.\r\n     */\r\n    confirmCancel() {\r\n      if (this.confirmingCancel) return\r\n\r\n      this.confirmingCancel = true\r\n\r\n      this.$buefy.dialog.confirm({\r\n        message: this.trans('If you leave this page changes will not be saved.'),\r\n        onConfirm: () => {\r\n          this.confirmingCancel = false\r\n          window.location.href = this.cancelUrl\r\n        },\r\n        onCancel: () => { this.confirmingCancel = false },\r\n        cancelText: this.trans('buttons.stay_on_page'),\r\n        confirmText: this.trans('buttons.leave_page'),\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Handle cancel button/link.\r\n     *\r\n     * @param {Event} event\r\n     */\r\n    onCancel(event) {\r\n      if (this.shouldConfirmCancel && this.isDirty()) {\r\n        event.preventDefault()\r\n\r\n        this.confirmCancel()\r\n      }\r\n    }\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-taxon-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[(_vm.haveThumbnail)?_c('img',{attrs:{\"width\":\"32\",\"src\":this.selected.thumbnail_url}}):_vm._e(),_vm._v(\" \"),_c('b-autocomplete',{ref:\"autocomplete\",attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enterPressed($event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-left\"},[(props.option.thumbnail_url)?_c('img',{attrs:{\"width\":\"32\",\"src\":props.option.thumbnail_url}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.name)+_vm._s(props.option.native_name ? (\" (\" + (props.option.native_name) + \")\") : '')+\"\\n          \")])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :label=\"label\" class=\"nz-taxon-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\r\n    <b-field grouped>\r\n      <img width=\"32\" :src=\"this.selected.thumbnail_url\" v-if=\"haveThumbnail\">\r\n\r\n      <b-autocomplete\r\n        ref=\"autocomplete\"\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"name\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        @keydown.native.enter=\"enterPressed\"\r\n      >\r\n        <template slot-scope=\"props\">\r\n          <div class=\"media\">\r\n            <div class=\"media-left\">\r\n              <img width=\"32\" :src=\"props.option.thumbnail_url\" v-if=\"props.option.thumbnail_url\">\r\n            </div>\r\n\r\n            <div class=\"media-content\">\r\n              {{ props.option.name }}{{ props.option.native_name ? ` (${props.option.native_name})` : ''}}\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n      </b-autocomplete>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _debounce from 'lodash/debounce'\r\nimport _get from 'lodash/get'\r\n\r\nexport default {\r\n  name: 'nzTaxonAutocomplete',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'Taxon'\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'Search for taxon...'\r\n    },\r\n    taxon: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    url: {\r\n      type: String,\r\n      default: () => route('api.taxa.index')\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    except: {},\r\n    autofocus: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.taxon || null,\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    haveThumbnail() {\r\n      return this.selected && this.selected.thumbnail_url\r\n    },\r\n\r\n    icon() {\r\n      return this.selected ? 'check' : 'search'\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    taxon(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function() {\r\n      if (!this.value) return\r\n\r\n      this.data = []\r\n      this.loading = true\r\n\r\n      let params = {\r\n        name: this.value,\r\n        limit: 20,\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(this.url, {\r\n        params\r\n      }).then(({\r\n        data\r\n      }) => {\r\n        data.data.forEach(item => this.data.push(item))\r\n        this.loading = false\r\n      }, response => {\r\n        this.loading = false\r\n      })\r\n    }, 500),\r\n\r\n    onSelect(taxon) {\r\n      this.selected = taxon\r\n\r\n      this.$emit('select', taxon)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected)\r\n      if (currentValue && currentValue !== value) {\r\n        this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object'\r\n        ? _get(option, 'name')\r\n        : option\r\n    },\r\n\r\n    enterPressed() {\r\n      if (!this.$refs.autocomplete.isActive) {\r\n        this.$emit('enter')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonAutocomplete.vue?vue&type=template&id=cedb826c&\"\nimport script from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}