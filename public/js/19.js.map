{"version":3,"sources":["webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/pick.js","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue?de1a","webpack:///./resources/js/mixins/PersistentForm.js","webpack:///resources/js/components/forms/LiteratureObservationForm.vue","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue?eaad","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue","webpack:///./node_modules/lodash/now.js","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?6fa7","webpack:///resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?9c07","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./resources/js/expiring-storage.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/_flatRest.js"],"names":["Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","module","exports","value","assignValue","castPath","isIndex","isObject","toKey","object","path","customizer","index","length","lastIndex","nested","key","newValue","objValue","basePickBy","hasIn","paths","basePick","pick","flatRest","props","cacheKey","default","cacheLifetime","computed","storageKey","this","window","location","host","pathname","methods","getFormKey","otherPersistentKeys","saveState","data","_pick","$data","form","expiringStorage","set","restoreState","previousState","get","populate","forEach","$set","clearPersistedState","name","mixins","PersistentForm","FormMixin","components","NzDateInput","NzSpatialInput","NzPublicationAutocomplete","NzTaxonAutocomplete","submitMoreWithSameTaxon","Boolean","observation","type","Object","original_date","original_locality","original_elevation","original_coordinates","original_identification","original_identification_validity","other_original_data","collecting_start_year","collecting_start_month","collecting_end_year","collecting_end_month","place_where_referenced_in_publication","publication_id","taxon_id","year","month","day","is_original_data","cited_publication_id","latitude","longitude","accuracy","elevation","minimum_elevation","maximum_elevation","georeferenced_by","georeferenced_date","observer","identifier","note","sex","number","project","found_on","habitat","stage_id","time","dataset","taxon","publication","cited_publication","sexes","validityOptions","Array","keepAfterSubmit","getAttributesToKeep","submittingWithoutRedirectWithSameTaxon","locale","App","taxonName","publicationCitation","citedPublication","stages","georeferencedDate","val","isValid","toDate","created","newForm","reason","resetOnSuccess","onTaxonSelect","id","onPublicationSelect","citation","onCitedPublicationSelect","onTimeInput","hookAfterSubmitWithoutRedirect","handleIsOriginalDataInput","addNewPublication","href","route","dateFormater","handleElevationFetched","submitWithoutRedirectWithSameTaxon","processing","submitOnlyDirty","shouldConfirmSubmit","confirmSubmit","performSubmitWithoutRedirectWithSameTaxon","confirmingSubmit","shouldAskReason","method","toLowerCase","action","onSuccessfulSubmitWithoutRedirectWithSameTaxon","$buefy","toast","open","message","trans","reset","keep","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","ref","errors","has","first","on","model","callback","$$v","expression","$ziggy","$event","preventDefault","_v","domProps","_s","directives","rawName","_l","label","_n","Date","stage","slot","content","class","_e","submittingWithRedirect","submitWithRedirect","submittingWithoutRedirect","submitWithoutRedirect","cancelUrl","onCancel","root","now","String","placeholder","error","except","autofocus","disabled","selected","loading","icon","watch","fetchData","params","onSelect","user","$emit","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","scopedSlots","_u","fn","_t","baseFlatten","array","arrayPush","isFlattenable","depth","predicate","isStrict","result","ExpiringStorage","cached","JSON","parse","localStorage","getItem","expires","removeItem","lifeTimeInMinutes","currentTime","getTime","setItem","stringify","baseGet","baseSet","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","flatten","overRest","setToString"],"mappings":"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","file":"js/19.js?id=3fc4b24ee6716f245ba0","sourcesContent":["var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"literature-observation-form\",attrs:{\"action\":_vm.action,\"method\":\"POST\",\"lang\":_vm.locale}},[_c('div',{staticClass:\"mb-8\"},[_c('nz-publication-autocomplete',{ref:\"publicationAutocomplete\",staticClass:\"is-required\",attrs:{\"publication\":_vm.form.publication,\"error\":_vm.form.errors.has('publication_id'),\"message\":_vm.form.errors.has('publication_id') ? _vm.form.errors.first('publication_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.literature_observations.publication'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_publication')},on:{\"select\":_vm.onPublicationSelect},model:{value:(_vm.publicationCitation),callback:function ($$v) {_vm.publicationCitation=$$v},expression:\"publicationCitation\"}},[_c('a',{staticClass:\"button\",attrs:{\"title\":_vm.trans('labels.literature_observations.add_new_publication'),\"href\":_vm.$ziggy('admin.publications.create')},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewPublication($event)}}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)]),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.is_original_data'),\"error\":_vm.form.errors.has('is_original_data'),\"message\":_vm.form.errors.has('is_original_data') ? _vm.form.errors.first('is_original_data') : null}},[_c('b-select',{attrs:{\"value\":_vm.form.is_original_data,\"expanded\":\"\"},on:{\"input\":_vm.handleIsOriginalDataInput}},[_c('option',{domProps:{\"value\":true}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.original_data')))]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.citation')))])])],1),_vm._v(\" \"),_c('nz-publication-autocomplete',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.form.is_original_data),expression:\"!form.is_original_data\"}],staticClass:\"is-required\",attrs:{\"publication\":_vm.form.cited_publication,\"error\":_vm.form.errors.has('cited_publication_id'),\"message\":_vm.form.errors.has('cited_publication_id') ? _vm.form.errors.first('cited_publication_id') : null,\"label\":_vm.trans('labels.literature_observations.cited_publication'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_publication')},on:{\"select\":_vm.onCitedPublicationSelect},model:{value:(_vm.citedPublication),callback:function ($$v) {_vm.citedPublication=$$v},expression:\"citedPublication\"}},[_c('a',{staticClass:\"button\",attrs:{\"title\":_vm.trans('labels.literature_observations.add_new_publication'),\"href\":_vm.$ziggy('admin.publications.create')},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewPublication($event)}}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)]),_vm._v(\" \"),_c('nz-taxon-autocomplete',{ref:\"taxonAutocomplete\",staticClass:\"is-required\",attrs:{\"taxon\":_vm.form.taxon,\"error\":_vm.form.errors.has('taxon_id'),\"message\":_vm.form.errors.has('taxon_id') ? _vm.form.errors.first('taxon_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.literature_observations.taxon'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_taxon')},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.taxonName),callback:function ($$v) {_vm.taxonName=$$v},expression:\"taxonName\"}}),_vm._v(\" \"),_c('nz-date-input',{attrs:{\"year\":_vm.form.year,\"month\":_vm.form.month,\"day\":_vm.form.day,\"errors\":_vm.form.errors,\"label\":_vm.trans('labels.literature_observations.date'),\"placeholders\":{\n          year: _vm.trans('labels.literature_observations.year'),\n          month: _vm.trans('labels.literature_observations.month'),\n          day: _vm.trans('labels.literature_observations.day')\n      }},on:{\"update:year\":function($event){return _vm.$set(_vm.form, \"year\", $event)},\"update:month\":function($event){return _vm.$set(_vm.form, \"month\", $event)},\"update:day\":function($event){return _vm.$set(_vm.form, \"day\", $event)}}}),_vm._v(\" \"),_c('div',[_c('h2',{staticClass:\"is-size-4\"},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.verbatim_data')))]),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_identification'),\"type\":_vm.form.errors.has('original_identification') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification') ? _vm.form.errors.first('original_identification') : null}},[_c('b-input',{attrs:{\"name\":\"original_identification\"},model:{value:(_vm.form.original_identification),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification\", $$v)},expression:\"form.original_identification\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_identification_validity'),\"type\":_vm.form.errors.has('original_identification_validity') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification_validity') ? _vm.form.errors.first('original_identification_validity') : null}},[_c('b-select',{attrs:{\"name\":\"original_identification_validity\",\"expanded\":\"\"},model:{value:(_vm.form.original_identification_validity),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification_validity\", $$v)},expression:\"form.original_identification_validity\"}},_vm._l((_vm.validityOptions),function(label,value){return _c('option',{key:value,domProps:{\"value\":value}},[_vm._v(_vm._s(label))])}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_date'),\"type\":_vm.form.errors.has('original_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_date') ? _vm.form.errors.first('original_date') : null}},[_c('b-input',{attrs:{\"name\":\"original_date\"},model:{value:(_vm.form.original_date),callback:function ($$v) {_vm.$set(_vm.form, \"original_date\", $$v)},expression:\"form.original_date\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_locality'),\"type\":_vm.form.errors.has('original_locality') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_locality') ? _vm.form.errors.first('original_locality') : null}},[_c('b-input',{model:{value:(_vm.form.original_locality),callback:function ($$v) {_vm.$set(_vm.form, \"original_locality\", $$v)},expression:\"form.original_locality\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_coordinates'),\"type\":_vm.form.errors.has('original_coordinates') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_coordinates') ? _vm.form.errors.first('original_coordinates') : null}},[_c('b-input',{model:{value:(_vm.form.original_coordinates),callback:function ($$v) {_vm.$set(_vm.form, \"original_coordinates\", $$v)},expression:\"form.original_coordinates\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_elevation'),\"type\":_vm.form.errors.has('original_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_elevation') ? _vm.form.errors.first('original_elevation') : null}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.original_elevation_placeholder')},model:{value:(_vm.form.original_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"original_elevation\", $$v)},expression:\"form.original_elevation\"}})],1)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"mb-8\",attrs:{\"label\":_vm.trans('labels.literature_observations.other_original_data'),\"type\":_vm.form.errors.has('other_original_data') ? 'is-danger' : null,\"message\":_vm.form.errors.has('other_original_data') ? _vm.form.errors.first('other_original_data') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.other_original_data),callback:function ($$v) {_vm.$set(_vm.form, \"other_original_data\", $$v)},expression:\"form.other_original_data\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_start_year'),\"type\":_vm.form.errors.has('collecting_start_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_year') ? _vm.form.errors.first('collecting_start_year') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_start_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_year\", $$v)},expression:\"form.collecting_start_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_start_month'),\"type\":_vm.form.errors.has('collecting_start_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_month') ? _vm.form.errors.first('collecting_start_month') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_start_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_month\", $$v)},expression:\"form.collecting_start_month\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_end_year'),\"type\":_vm.form.errors.has('collecting_end_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_year') ? _vm.form.errors.first('collecting_end_year') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_end_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_year\", $$v)},expression:\"form.collecting_end_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_end_month'),\"type\":_vm.form.errors.has('collecting_end_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_month') ? _vm.form.errors.first('collecting_end_month') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_end_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_month\", $$v)},expression:\"form.collecting_end_month\"}})],1)],1)],1),_vm._v(\" \"),_c('nz-spatial-input',{staticClass:\"mb-4\",attrs:{\"latitude\":_vm.form.latitude,\"longitude\":_vm.form.longitude,\"location\":_vm.form.location,\"accuracy\":_vm.form.accuracy,\"elevation\":_vm.form.elevation,\"errors\":_vm.form.errors,\"has-other-errors\":_vm.form.errors.has('minimum_elevation') || _vm.form.errors.has('maximum_elevation')},on:{\"update:latitude\":function($event){return _vm.$set(_vm.form, \"latitude\", $event)},\"update:longitude\":function($event){return _vm.$set(_vm.form, \"longitude\", $event)},\"update:location\":function($event){return _vm.$set(_vm.form, \"location\", $event)},\"update:accuracy\":function($event){return _vm.$set(_vm.form, \"accuracy\", $event)},\"update:elevation\":function($event){return _vm.$set(_vm.form, \"elevation\", $event)},\"elevation-fetched\":_vm.handleElevationFetched}},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.minimum_elevation_m'),\"type\":_vm.form.errors.has('minimum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('minimum_elevation') ? _vm.form.errors.first('minimum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.minimum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"minimum_elevation\", _vm._n($$v))},expression:\"form.minimum_elevation\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.maximum_elevation_m'),\"type\":_vm.form.errors.has('maximum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('maximum_elevation') ? _vm.form.errors.first('maximum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.maximum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"maximum_elevation\", _vm._n($$v))},expression:\"form.maximum_elevation\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.georeferenced_by'),\"type\":_vm.form.errors.has('georeferenced_by') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_by') ? _vm.form.errors.first('georeferenced_by') : null}},[_c('b-input',{model:{value:(_vm.form.georeferenced_by),callback:function ($$v) {_vm.$set(_vm.form, \"georeferenced_by\", _vm._n($$v))},expression:\"form.georeferenced_by\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.georeferenced_date'),\"type\":_vm.form.errors.has('georeferenced_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_date') ? _vm.form.errors.first('georeferenced_date') : null}},[_c('b-datepicker',{attrs:{\"max-date\":new Date(),\"mobile-native\":false,\"date-formatter\":_vm.dateFormater,\"first-day-of-week\":1,\"placeholder\":\"DD.MM.YYYY\"},model:{value:(_vm.georeferencedDate),callback:function ($$v) {_vm.georeferencedDate=$$v},expression:\"georeferencedDate\"}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.georeferenced_date = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Clear\")])],1)])],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.stage'),\"type\":_vm.form.errors.has('stage_id') ? 'is-danger' : null,\"message\":_vm.form.errors.has('stage_id') ? _vm.form.errors.first('stage_id') : null}},[_c('b-select',{attrs:{\"disabled\":!_vm.stages.length,\"expanded\":\"expanded\"},model:{value:(_vm.form.stage_id),callback:function ($$v) {_vm.$set(_vm.form, \"stage_id\", $$v)},expression:\"form.stage_id\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.choose_a_stage')))]),_vm._v(\" \"),_vm._l((_vm.stages),function(stage){return _c('option',{key:stage.id,domProps:{\"value\":stage.id,\"textContent\":_vm._s(_vm.trans('stages.'+stage.name))}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.sex'),\"type\":_vm.form.errors.has('sex') ? 'is-danger' : null,\"message\":_vm.form.errors.has('sex') ? _vm.form.errors.first('sex') : null}},[_c('b-select',{attrs:{\"expanded\":\"expanded\"},model:{value:(_vm.form.sex),callback:function ($$v) {_vm.$set(_vm.form, \"sex\", $$v)},expression:\"form.sex\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.choose_a_value')))]),_vm._v(\" \"),_vm._l((_vm.sexes),function(label,sex){return _c('option',{key:sex,domProps:{\"value\":sex,\"textContent\":_vm._s(label)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.number'),\"type\":_vm.form.errors.has('number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('number') ? _vm.form.errors.first('number') : null}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.number),callback:function ($$v) {_vm.$set(_vm.form, \"number\", $$v)},expression:\"form.number\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mt-4\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.note'),\"error\":_vm.form.errors.has('note'),\"message\":_vm.form.errors.has('note') ? _vm.form.errors.first('note') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.note),callback:function ($$v) {_vm.$set(_vm.form, \"note\", $$v)},expression:\"form.note\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.habitat'),\"type\":_vm.form.errors.has('habitat') ? 'is-danger' : null,\"message\":_vm.form.errors.has('habitat') ? _vm.form.errors.first('habitat') : null}},[_c('b-input',{model:{value:(_vm.form.habitat),callback:function ($$v) {_vm.$set(_vm.form, \"habitat\", $$v)},expression:\"form.habitat\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.found_on'),\"type\":_vm.form.errors.has('found_on') ? 'is-danger' : null,\"message\":_vm.form.errors.has('found_on') ? _vm.form.errors.first('found_on') : null}},[_c('label',{staticClass:\"label\",attrs:{\"slot\":\"label\",\"for\":\"found_on\"},slot:\"label\"},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.found_on_tooltip')}),expression:\"{content: trans('labels.literature_observations.found_on_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n            \"+_vm._s(_vm.trans('labels.literature_observations.found_on'))+\"\\n          \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"found_on\",\"name\":\"found_on\"},model:{value:(_vm.form.found_on),callback:function ($$v) {_vm.$set(_vm.form, \"found_on\", $$v)},expression:\"form.found_on\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.time'),\"type\":_vm.form.errors.has('time') ? 'is-danger' : null,\"message\":_vm.form.errors.has('time') ? _vm.form.errors.first('time') : null}},[_c('b-timepicker',{attrs:{\"value\":_vm.time,\"placeholder\":_vm.trans('labels.literature_observations.click_to_select'),\"icon\":\"clock-o\",\"mobile-native\":false},on:{\"input\":_vm.onTimeInput}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.time = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"project\"}},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.project_tooltip')}),expression:\"{content: trans('labels.literature_observations.project_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n                \"+_vm._s(_vm.trans('labels.literature_observations.project'))+\"\\n              \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"project\",\"name\":\"project\"},model:{value:(_vm.form.project),callback:function ($$v) {_vm.$set(_vm.form, \"project\", $$v)},expression:\"form.project\"}}),_vm._v(\" \"),(_vm.form.errors.has('project'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('project') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('project'))}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"dataset\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.trans('labels.literature_observations.dataset'))+\"\\n            \")]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"dataset\",\"name\":\"dataset\"},model:{value:(_vm.form.dataset),callback:function ($$v) {_vm.$set(_vm.form, \"dataset\", $$v)},expression:\"form.dataset\"}}),_vm._v(\" \"),(_vm.form.errors.has('dataset'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('dataset') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('dataset'))}}):_vm._e()],1)])]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.observer'),\"type\":_vm.form.errors.has('observer') ? 'is-danger' : null,\"message\":_vm.form.errors.has('observer') ? _vm.form.errors.first('observer') : null}},[_c('b-input',{attrs:{\"name\":\"observer\"},model:{value:(_vm.form.observer),callback:function ($$v) {_vm.$set(_vm.form, \"observer\", $$v)},expression:\"form.observer\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.identifier'),\"type\":_vm.form.errors.has('identifier') ? 'is-danger' : null,\"message\":_vm.form.errors.has('identifier') ? _vm.form.errors.first('identifier') : null}},[_c('b-input',{attrs:{\"name\":\"identifier\"},model:{value:(_vm.form.identifier),callback:function ($$v) {_vm.$set(_vm.form, \"identifier\", $$v)},expression:\"form.identifier\"}})],1)],1)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.place_where_referenced_in_publication'),\"type\":_vm.form.errors.has('place_where_referenced_in_publication') ? 'is-danger' : null,\"message\":_vm.form.errors.has('place_where_referenced_in_publication') ? _vm.form.errors.first('place_where_referenced_in_publication') : null}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.place_where_referenced_in_publication_placeholder')},model:{value:(_vm.form.place_where_referenced_in_publication),callback:function ($$v) {_vm.$set(_vm.form, \"place_where_referenced_in_publication\", $$v)},expression:\"form.place_where_referenced_in_publication\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-loading': _vm.submittingWithRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save'))+\"\\n  \")]),_vm._v(\" \"),(_vm.submitMore)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_more_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_more_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirect,\n      'is-loading': _vm.submittingWithoutRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save_more'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.submitMoreWithSameTaxon)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_more_same_taxon_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_more_same_taxon_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirectWithSameTaxon,\n      'is-loading': _vm.submittingWithoutRedirectWithSameTaxon\n    },attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirectWithSameTaxon($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('labels.literature_observations.save_more_same_taxon'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),_c('a',{staticClass:\"button is-text\",attrs:{\"href\":_vm.cancelUrl},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _pick from 'lodash/pick'\r\nimport expiringStorage from '@/expiring-storage'\r\n\r\nexport default {\r\n  props: {\r\n    cacheKey: { default: null },\r\n    cacheLifetime: { default: 60 * 24 }\r\n  },\r\n\r\n  computed: {\r\n    storageKey() {\r\n      return this.cacheKey\r\n        ? `nz-form.${this.cacheKey}`\r\n        : `nz-form.${window.location.host}${window.location.pathname}`\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    getFormKey() {\r\n      return 'form'\r\n    },\r\n\r\n    otherPersistentKeys() {\r\n      return []\r\n    },\r\n\r\n    saveState() {\r\n      const data = {\r\n        ..._pick(this.$data, this.otherPersistentKeys()),\r\n        form: this[this.getFormKey()].data()\r\n      }\r\n\r\n      expiringStorage.set(this.storageKey, data, this.cacheLifetime)\r\n    },\r\n\r\n    restoreState() {\r\n      const previousState = expiringStorage.get(this.storageKey);\r\n\r\n      if (previousState === null) {\r\n        return\r\n      }\r\n\r\n      this[this.getFormKey()].populate(previousState.form)\r\n\r\n      this.otherPersistentKeys().forEach(key => {\r\n        if (previousState[key] !== undefined) {\r\n          this.$set(this, key, previousState[key])\r\n        }\r\n      })\r\n\r\n      this.clearPersistedState()\r\n    },\r\n\r\n    clearPersistedState() {\r\n      expiringStorage.delete(this.storageKey)\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <form :action=\"action\" method=\"POST\" :lang=\"locale\" class=\"literature-observation-form\">\r\n    <div class=\"mb-8\">\r\n      <nz-publication-autocomplete\r\n        class=\"is-required\"\r\n        v-model=\"publicationCitation\"\r\n        @select=\"onPublicationSelect\"\r\n        :publication=\"form.publication\"\r\n        :error=\"form.errors.has('publication_id')\"\r\n        :message=\"form.errors.has('publication_id') ? form.errors.first('publication_id') : null\"\r\n        autofocus=\"autofocus\"\r\n        ref=\"publicationAutocomplete\"\r\n        :label=\"trans('labels.literature_observations.publication')\"\r\n        :placeholder=\"trans('labels.literature_observations.search_for_publication')\"\r\n      >\r\n        <a\r\n          class=\"button\"\r\n          :title=\"trans('labels.literature_observations.add_new_publication')\"\r\n          :href=\"$ziggy('admin.publications.create')\"\r\n          @click.prevent=\"addNewPublication\"\r\n        >\r\n          <b-icon icon=\"plus\" />\r\n        </a>\r\n      </nz-publication-autocomplete>\r\n\r\n      <b-field\r\n        class=\"is-required\"\r\n        :label=\"trans('labels.literature_observations.is_original_data')\"\r\n        :error=\"form.errors.has('is_original_data')\"\r\n        :message=\"form.errors.has('is_original_data') ? form.errors.first('is_original_data') : null\"\r\n      >\r\n        <b-select :value=\"form.is_original_data\" @input=\"handleIsOriginalDataInput\" expanded>\r\n          <option :value=\"true\">{{ trans('labels.literature_observations.original_data') }}</option>\r\n          <option :value=\"false\">{{ trans('labels.literature_observations.citation') }}</option>\r\n        </b-select>\r\n      </b-field>\r\n\r\n      <nz-publication-autocomplete\r\n        v-show=\"!form.is_original_data\"\r\n        v-model=\"citedPublication\"\r\n        @select=\"onCitedPublicationSelect\"\r\n        class=\"is-required\"\r\n        :publication=\"form.cited_publication\"\r\n        :error=\"form.errors.has('cited_publication_id')\"\r\n        :message=\"form.errors.has('cited_publication_id') ? form.errors.first('cited_publication_id') : null\"\r\n        :label=\"trans('labels.literature_observations.cited_publication')\"\r\n        :placeholder=\"trans('labels.literature_observations.search_for_publication')\"\r\n      >\r\n        <a\r\n          class=\"button\"\r\n          :title=\"trans('labels.literature_observations.add_new_publication')\"\r\n          :href=\"$ziggy('admin.publications.create')\"\r\n          @click.prevent=\"addNewPublication\"\r\n        >\r\n          <b-icon icon=\"plus\" />\r\n        </a>\r\n      </nz-publication-autocomplete>\r\n\r\n      <nz-taxon-autocomplete\r\n        v-model=\"taxonName\"\r\n        @select=\"onTaxonSelect\"\r\n        class=\"is-required\"\r\n        :taxon=\"form.taxon\"\r\n        :error=\"form.errors.has('taxon_id')\"\r\n        :message=\"form.errors.has('taxon_id') ? form.errors.first('taxon_id') : null\"\r\n        autofocus=\"autofocus\"\r\n        ref=\"taxonAutocomplete\"\r\n        :label=\"trans('labels.literature_observations.taxon')\"\r\n        :placeholder=\"trans('labels.literature_observations.search_for_taxon')\"\r\n      />\r\n\r\n      <nz-date-input\r\n        :year.sync=\"form.year\"\r\n        :month.sync=\"form.month\"\r\n        :day.sync=\"form.day\"\r\n        :errors=\"form.errors\"\r\n        :label=\"trans('labels.literature_observations.date')\"\r\n        :placeholders=\"{\r\n            year: trans('labels.literature_observations.year'),\r\n            month: trans('labels.literature_observations.month'),\r\n            day: trans('labels.literature_observations.day')\r\n        }\"\r\n      />\r\n\r\n      <div>\r\n        <h2 class=\"is-size-4\">{{ trans('labels.literature_observations.verbatim_data') }}</h2>\r\n\r\n        <b-field\r\n          class=\"is-required\"\r\n          :label=\"trans('labels.literature_observations.original_identification')\"\r\n          :type=\"form.errors.has('original_identification') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('original_identification') ? form.errors.first('original_identification') : null\"\r\n        >\r\n          <b-input name=\"original_identification\" v-model=\"form.original_identification\" />\r\n        </b-field>\r\n\r\n        <b-field\r\n          class=\"is-required\"\r\n          :label=\"trans('labels.literature_observations.original_identification_validity')\"\r\n          :type=\"form.errors.has('original_identification_validity') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('original_identification_validity') ? form.errors.first('original_identification_validity') : null\"\r\n        >\r\n          <b-select name=\"original_identification_validity\" v-model=\"form.original_identification_validity\" expanded>\r\n            <option :value=\"value\" v-for=\"(label, value) in validityOptions\" :key=\"value\">{{ label }}</option>\r\n          </b-select>\r\n        </b-field>\r\n\r\n        <div class=\"columns\">\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.original_date')\"\r\n            :type=\"form.errors.has('original_date') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('original_date') ? form.errors.first('original_date') : null\"\r\n          >\r\n            <b-input name=\"original_date\" v-model=\"form.original_date\"/>\r\n          </b-field>\r\n\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.original_locality')\"\r\n            :type=\"form.errors.has('original_locality') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('original_locality') ? form.errors.first('original_locality') : null\"\r\n          >\r\n            <b-input v-model=\"form.original_locality\"/>\r\n          </b-field>\r\n        </div>\r\n\r\n        <div class=\"columns\">\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.original_coordinates')\"\r\n            :type=\"form.errors.has('original_coordinates') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('original_coordinates') ? form.errors.first('original_coordinates') : null\"\r\n          >\r\n            <b-input v-model=\"form.original_coordinates\"/>\r\n          </b-field>\r\n\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.original_elevation')\"\r\n            :type=\"form.errors.has('original_elevation') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('original_elevation') ? form.errors.first('original_elevation') : null\"\r\n          >\r\n            <b-input v-model=\"form.original_elevation\" :placeholder=\"trans('labels.literature_observations.original_elevation_placeholder')\"/>\r\n          </b-field>\r\n        </div>\r\n\r\n        <b-field\r\n          class=\"mb-8\"\r\n          :label=\"trans('labels.literature_observations.other_original_data')\"\r\n          :type=\"form.errors.has('other_original_data') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('other_original_data') ? form.errors.first('other_original_data') : null\"\r\n        >\r\n           <b-input type=\"textarea\" v-model=\"form.other_original_data\" />\r\n        </b-field>\r\n\r\n        <div class=\"columns\">\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.collecting_start_year')\"\r\n            :type=\"form.errors.has('collecting_start_year') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('collecting_start_year') ? form.errors.first('collecting_start_year') : null\"\r\n          >\r\n            <b-input v-model=\"form.collecting_start_year\"/>\r\n          </b-field>\r\n\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.collecting_start_month')\"\r\n            :type=\"form.errors.has('collecting_start_month') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('collecting_start_month') ? form.errors.first('collecting_start_month') : null\"\r\n          >\r\n            <b-input v-model=\"form.collecting_start_month\"/>\r\n          </b-field>\r\n        </div>\r\n\r\n        <div class=\"columns\">\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.collecting_end_year')\"\r\n            :type=\"form.errors.has('collecting_end_year') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('collecting_end_year') ? form.errors.first('collecting_end_year') : null\"\r\n          >\r\n            <b-input v-model=\"form.collecting_end_year\"/>\r\n          </b-field>\r\n\r\n          <b-field\r\n            class=\"column\"\r\n            :label=\"trans('labels.literature_observations.collecting_end_month')\"\r\n            :type=\"form.errors.has('collecting_end_month') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('collecting_end_month') ? form.errors.first('collecting_end_month') : null\"\r\n          >\r\n            <b-input v-model=\"form.collecting_end_month\"/>\r\n          </b-field>\r\n        </div>\r\n      </div>\r\n\r\n      <nz-spatial-input\r\n        class=\"mb-4\"\r\n        :latitude.sync=\"form.latitude\"\r\n        :longitude.sync=\"form.longitude\"\r\n        :location.sync=\"form.location\"\r\n        :accuracy.sync=\"form.accuracy\"\r\n        :elevation.sync=\"form.elevation\"\r\n        @elevation-fetched=\"handleElevationFetched\"\r\n        :errors=\"form.errors\"\r\n        :has-other-errors=\"form.errors.has('minimum_elevation') || form.errors.has('maximum_elevation')\"\r\n      >\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.minimum_elevation_m')\"\r\n          :type=\"form.errors.has('minimum_elevation') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('minimum_elevation') ? form.errors.first('minimum_elevation') : null\"\r\n          custom-class=\"is-small\"\r\n        >\r\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.minimum_elevation\"/>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.maximum_elevation_m')\"\r\n          :type=\"form.errors.has('maximum_elevation') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('maximum_elevation') ? form.errors.first('maximum_elevation') : null\"\r\n          custom-class=\"is-small\"\r\n        >\r\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.maximum_elevation\"/>\r\n        </b-field>\r\n      </nz-spatial-input>\r\n\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          <b-field\r\n            :label=\"trans('labels.literature_observations.georeferenced_by')\"\r\n            :type=\"form.errors.has('georeferenced_by') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('georeferenced_by') ? form.errors.first('georeferenced_by') : null\"\r\n          >\r\n            <b-input v-model.number=\"form.georeferenced_by\"/>\r\n          </b-field>\r\n        </div>\r\n\r\n        <div class=\"column\">\r\n          <b-field\r\n            :label=\"trans('labels.literature_observations.georeferenced_date')\"\r\n            :type=\"form.errors.has('georeferenced_date') ? 'is-danger' : null\"\r\n            :message=\"form.errors.has('georeferenced_date') ? form.errors.first('georeferenced_date') : null\"\r\n          >\r\n            <b-datepicker\r\n              v-model=\"georeferencedDate\"\r\n              :max-date=\"new Date()\"\r\n              :mobile-native=\"false\"\r\n              :date-formatter=\"dateFormater\"\r\n              :first-day-of-week=\"1\"\r\n              placeholder=\"DD.MM.YYYY\"\r\n            >\r\n              <button type=\"button\" class=\"button is-danger\" @click=\"form.georeferenced_date = null\">\r\n                <b-icon icon=\"close\" />\r\n                <span>Clear</span>\r\n              </button>\r\n            </b-datepicker>\r\n          </b-field>\r\n        </div>\r\n      </div>\r\n\r\n      <b-field :label=\"trans('labels.literature_observations.stage')\" :type=\"form.errors.has('stage_id') ? 'is-danger' : null\" :message=\"form.errors.has('stage_id') ? form.errors.first('stage_id') : null\">\r\n        <b-select v-model=\"form.stage_id\" :disabled=\"!stages.length\" expanded=\"expanded\">\r\n          <option :value=\"null\">{{ trans('labels.literature_observations.choose_a_stage') }}</option>\r\n          <option v-for=\"stage in stages\" :value=\"stage.id\" :key=\"stage.id\" v-text=\"trans('stages.'+stage.name)\"></option>\r\n        </b-select>\r\n      </b-field>\r\n\r\n      <b-field :label=\"trans('labels.literature_observations.sex')\" :type=\"form.errors.has('sex') ? 'is-danger' : null\" :message=\"form.errors.has('sex') ? form.errors.first('sex') : null\">\r\n        <b-select v-model=\"form.sex\" expanded=\"expanded\">\r\n          <option :value=\"null\">{{ trans('labels.literature_observations.choose_a_value') }}</option>\r\n          <option v-for=\"(label,sex) in sexes\" :key=\"sex\" :value=\"sex\" v-text=\"label\"></option>\r\n        </b-select>\r\n      </b-field>\r\n\r\n      <b-field\r\n        :label=\"trans('labels.literature_observations.number')\"\r\n        :type=\"form.errors.has('number') ? 'is-danger' : null\"\r\n        :message=\"form.errors.has('number') ? form.errors.first('number') : null\"\r\n      >\r\n        <b-input type=\"number\" v-model=\"form.number\"/>\r\n      </b-field>\r\n\r\n      <div class=\"mt-4\">\r\n        <b-field :label=\"trans('labels.literature_observations.note')\" :error=\"form.errors.has('note')\" :message=\"form.errors.has('note') ? form.errors.first('note') : null\"><b-input type=\"textarea\" v-model=\"form.note\"/></b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.habitat')\"\r\n          :type=\"form.errors.has('habitat') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('habitat') ? form.errors.first('habitat') : null\"\r\n        >\r\n          <b-input v-model=\"form.habitat\"/>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.found_on')\"\r\n          :type=\"form.errors.has('found_on') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('found_on') ? form.errors.first('found_on') : null\"\r\n        >\r\n          <label for=\"found_on\" class=\"label\" slot=\"label\">\r\n            <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.literature_observations.found_on_tooltip')}\">\r\n              {{ trans('labels.literature_observations.found_on') }}\r\n            </span>\r\n          </label>\r\n\r\n          <b-input id=\"found_on\" name=\"found_on\" v-model=\"form.found_on\"/>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.time')\"\r\n          :type=\"form.errors.has('time') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('time') ? form.errors.first('time') : null\"\r\n        >\r\n          <b-timepicker\r\n            :value=\"time\"\r\n            @input=\"onTimeInput\"\r\n            :placeholder=\"trans('labels.literature_observations.click_to_select')\"\r\n            icon=\"clock-o\"\r\n            :mobile-native=\"false\"\r\n          >\r\n            <button type=\"button\" class=\"button is-danger\" @click=\"form.time = null\">\r\n              <b-icon icon=\"close\"></b-icon>\r\n            </button>\r\n          </b-timepicker>\r\n        </b-field>\r\n\r\n        <div class=\"columns\">\r\n          <div class=\"column\">\r\n            <div class=\"field\">\r\n              <label for=\"project\" class=\"label\">\r\n                <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.literature_observations.project_tooltip')}\">\r\n                  {{ trans('labels.literature_observations.project') }}\r\n                </span>\r\n              </label>\r\n\r\n              <b-input id=\"project\" name=\"project\" v-model=\"form.project\"/>\r\n\r\n              <p v-if=\"form.errors.has('project')\" v-html=\"form.errors.first('project')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('project') }\"/>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"column\">\r\n            <div class=\"field\">\r\n              <label for=\"dataset\" class=\"label\">\r\n                {{ trans('labels.literature_observations.dataset') }}\r\n              </label>\r\n\r\n              <b-input id=\"dataset\" name=\"dataset\" v-model=\"form.dataset\"/>\r\n\r\n              <p v-if=\"form.errors.has('dataset')\" v-html=\"form.errors.first('dataset')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('dataset') }\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.observer')\"\r\n          :type=\"form.errors.has('observer') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('observer') ? form.errors.first('observer') : null\"\r\n        >\r\n          <b-input name=\"observer\" v-model=\"form.observer\"/>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.literature_observations.identifier')\"\r\n          :type=\"form.errors.has('identifier') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('identifier') ? form.errors.first('identifier') : null\"\r\n        >\r\n          <b-input name=\"identifier\" v-model=\"form.identifier\"/>\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <b-field\r\n      :label=\"trans('labels.literature_observations.place_where_referenced_in_publication')\"\r\n      :type=\"form.errors.has('place_where_referenced_in_publication') ? 'is-danger' : null\"\r\n      :message=\"form.errors.has('place_where_referenced_in_publication') ? form.errors.first('place_where_referenced_in_publication') : null\"\r\n    >\r\n      <b-input v-model=\"form.place_where_referenced_in_publication\" :placeholder=\"trans('labels.literature_observations.place_where_referenced_in_publication_placeholder')\"/>\r\n    </b-field>\r\n\r\n    <hr>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"button is-primary\"\r\n      :class=\"{\r\n        'is-loading': submittingWithRedirect\r\n      }\"\r\n      @click.prevent=\"submitWithRedirect\"\r\n      v-tooltip=\"{content: trans('labels.literature_observations.save_tooltip')}\"\r\n    >\r\n      {{ trans('buttons.save') }}\r\n    </button>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"button is-primary\"\r\n      :class=\"{\r\n        'is-outlined': !submittingWithoutRedirect,\r\n        'is-loading': submittingWithoutRedirect\r\n      }\"\r\n      @click.prevent=\"submitWithoutRedirect\"\r\n      v-if=\"submitMore\"\r\n      v-tooltip=\"{content: trans('labels.literature_observations.save_more_tooltip')}\">\r\n      {{ trans('buttons.save_more') }}\r\n    </button>\r\n\r\n    <button\r\n      type=\"button\"\r\n      class=\"button is-primary\"\r\n      :class=\"{\r\n        'is-outlined': !submittingWithoutRedirectWithSameTaxon,\r\n        'is-loading': submittingWithoutRedirectWithSameTaxon\r\n      }\"\r\n      @click.prevent=\"submitWithoutRedirectWithSameTaxon\"\r\n      v-if=\"submitMoreWithSameTaxon\"\r\n      v-tooltip=\"{content: trans('labels.literature_observations.save_more_same_taxon_tooltip')}\">\r\n      {{ trans('labels.literature_observations.save_more_same_taxon') }}\r\n    </button>\r\n\r\n    <a :href=\"cancelUrl\" class=\"button is-text\" @click=\"onCancel\">{{ trans('buttons.cancel') }}</a>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport Form from 'form-backend-validation'\r\nimport dayjs from '@/dayjs'\r\nimport _get from 'lodash/get'\r\nimport _find from 'lodash/find'\r\nimport _pick from 'lodash/pick'\r\nimport FormMixin from '@/mixins/FormMixin'\r\nimport PersistentForm from '@/mixins/PersistentForm'\r\nimport NzDateInput from '@/components/inputs/DateInput'\r\nimport NzSpatialInput from '@/components/inputs/SpatialInput'\r\nimport NzPublicationAutocomplete from '@/components/inputs/PublicationAutocomplete'\r\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\r\n\r\nexport default {\r\n  name: 'nzLiteratureObservationForm',\r\n\r\n  mixins: [PersistentForm, FormMixin],\r\n\r\n  components: {\r\n    NzDateInput,\r\n    NzSpatialInput,\r\n    NzPublicationAutocomplete,\r\n    NzTaxonAutocomplete\r\n  },\r\n\r\n  props: {\r\n    submitMoreWithSameTaxon: Boolean,\r\n\r\n    observation: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          original_date: null,\r\n          original_locality: null,\r\n          original_elevation: null,\r\n          original_coordinates: null,\r\n          original_identification: null,\r\n          original_identification_validity: null,\r\n          other_original_data: null,\r\n          collecting_start_year: null,\r\n          collecting_start_month: null,\r\n          collecting_end_year: null,\r\n          collecting_end_month: null,\r\n          place_where_referenced_in_publication: null,\r\n          publication_id: null,\r\n          taxon_id: null,\r\n          year: dayjs().year(),\r\n          month: dayjs().month() + 1,\r\n          day: dayjs().date(),\r\n          is_original_data: true,\r\n          cited_publication_id: null,\r\n          latitude: null,\r\n          longitude: null,\r\n          location: null,\r\n          accuracy: null,\r\n          elevation: null,\r\n          minimum_elevation: null,\r\n          maximum_elevation: null,\r\n          georeferenced_by: null,\r\n          georeferenced_date: null,\r\n\r\n          observer: null,\r\n          identifier: null,\r\n          note: null,\r\n          sex: null,\r\n          number: null,\r\n          project: null,\r\n          found_on: null,\r\n          habitat: null,\r\n          stage_id: null,\r\n          time: null,\r\n          dataset: null,\r\n\r\n          taxon: null,\r\n          publication: null,\r\n          cited_publication: null\r\n        }\r\n      }\r\n    },\r\n\r\n    sexes: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n\r\n    validityOptions: {\r\n      type: [Array, Object],\r\n      default: () => []\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      keepAfterSubmit: this.getAttributesToKeep(),\r\n      submittingWithoutRedirectWithSameTaxon: false,\r\n      locale: window.App.locale,\r\n      taxonName: _get(this.observation, 'taxon.name', ''),\r\n      publicationCitation: _get(this.observation, 'publication.citation', ''),\r\n      citedPublication: _get(this.observation, 'cited_publication.citation', '')\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    stages() {\r\n      return this.form.taxon\r\n        ? this.form.taxon.stages\r\n        : []\r\n    },\r\n\r\n    time() {\r\n      return this.form.time\r\n        ? dayjs(this.form.time, 'HH:mm').toDate()\r\n        : null\r\n    },\r\n\r\n    georeferencedDate: {\r\n      get() {\r\n        const val = dayjs(this.form.georeferenced_date)\r\n\r\n        return val.isValid() ? val.toDate() : null\r\n      },\r\n\r\n      set(value) {\r\n        this.form.georeferenced_date = dayjs(value).format('YYYY-MM-DD')\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.restoreState()\r\n  },\r\n\r\n  methods: {\r\n    otherPersistentKeys() {\r\n      return ['taxonName', 'publicationCitation', 'citedPublication']\r\n    },\r\n\r\n    /**\r\n     * Create new form instance.\r\n     *\r\n     * @return {Form}\r\n     */\r\n    newForm() {\r\n      return new Form({\r\n        ...this.observation,\r\n        reason: null\r\n      }, {\r\n        resetOnSuccess: false\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Handle taxon being selected.\r\n     *\r\n     * @param {Object} value\r\n     */\r\n    onTaxonSelect(taxon) {\r\n      this.form.taxon = taxon || null\r\n      this.form.taxon_id = taxon ? taxon.id : null\r\n      this.taxonName = taxon ? taxon.name : null\r\n\r\n      const invalidStage = !_find(this.stages, stage => stage.id === this.form.stage_id)\r\n\r\n      if (invalidStage) {\r\n        this.form.stage_id = null\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Handle publication being selected.\r\n     *\r\n     * @param {Object} value\r\n     */\r\n    onPublicationSelect(publication) {\r\n      this.form.publication = publication || null\r\n      this.form.publication_id = publication ? publication.id : null\r\n      this.publicationCitation = publication ? publication.citation : null\r\n    },\r\n\r\n    /**\r\n     * Handle cited publication being selected.\r\n     *\r\n     * @param {Object} value\r\n     */\r\n    onCitedPublicationSelect(publication) {\r\n      this.form.cited_publication = publication || null\r\n      this.form.cited_publication_id = publication ? publication.id : null\r\n      this.citedPublication = publication ? publication.citation : null\r\n    },\r\n\r\n    /**\r\n     * Set time.\r\n     */\r\n    onTimeInput(value) {\r\n      this.form.time = value ? dayjs(value).format('HH:mm') : null\r\n    },\r\n\r\n    /**\r\n     * Attributes to keep after submit without redirect.\r\n     *\r\n     * @return {Array}\r\n     */\r\n    getAttributesToKeep() {\r\n      return [\r\n        'location',\r\n        'accuracy',\r\n        'elevation',\r\n        'latitude',\r\n        'longitude',\r\n        'year',\r\n        'month',\r\n        'day',\r\n        'project',\r\n        'observer',\r\n        'identifier',\r\n        'dataset',\r\n        'publication',\r\n        'publication_id',\r\n        'cited_publication',\r\n        'cited_publication_id',\r\n        'is_original_data',\r\n        'minimum_elevation',\r\n        'maximum_elevation',\r\n        'original_locality',\r\n        'original_elevation',\r\n        'original_coordinates',\r\n        'georeferenced_by',\r\n        'georeferenced_date'\r\n      ]\r\n    },\r\n\r\n    hookAfterSubmitWithoutRedirect() {\r\n      this.taxonName = ''\r\n    },\r\n\r\n    handleIsOriginalDataInput(value) {\r\n      if (value) {\r\n        this.onCitedPublicationSelect(null)\r\n      }\r\n\r\n      this.form.is_original_data = value\r\n    },\r\n\r\n    addNewPublication() {\r\n      this.saveState()\r\n\r\n      window.location.href = route('admin.publications.create')\r\n    },\r\n\r\n    dateFormater(date) {\r\n      return dayjs(date).format('DD.MM.YYYY')\r\n    },\r\n\r\n    handleElevationFetched(elevation) {\r\n      this.form.minimum_elevation = elevation\r\n      this.form.maximum_elevation = elevation\r\n    },\r\n\r\n    /**\r\n     * Submit the form and stay to add more, with same taxon.\r\n     */\r\n    submitWithoutRedirectWithSameTaxon() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirectWithSameTaxon)\r\n\r\n      this.performSubmitWithoutRedirectWithSameTaxon()\r\n    },\r\n\r\n    /**\r\n     * Submit the form and stay to add more, with same taxon.\r\n     */\r\n    performSubmitWithoutRedirectWithSameTaxon(reason = null) {\r\n      this.submittingWithoutRedirectWithSameTaxon = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithoutRedirectWithSameTaxon)\r\n          .catch(error => {\r\n            this.submittingWithoutRedirectWithSameTaxon = false\r\n            this.onFailedSubmit(error)\r\n          })\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with no redirect.\r\n     */\r\n    onSuccessfulSubmitWithoutRedirectWithSameTaxon() {\r\n      this.submittingWithoutRedirectWithSameTaxon = false\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // Reset the form but remember some data.\r\n      const keep = _pick(this.form.data(), this.keepAfterSubmit.concat([\r\n        'original_identification_validity', 'place_where_referenced_in_publication',\r\n        'taxon', 'taxon_id', 'original_identification',\r\n      ]))\r\n      this.form.reset()\r\n      this.form.populate(keep)\r\n    },\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LiteratureObservationForm.vue?vue&type=template&id=33a205a0&\"\nimport script from \"./LiteratureObservationForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LiteratureObservationForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-publication-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"citation\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.citation)+\"\\n          \")])])]}}])}),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :label=\"label\" class=\"nz-publication-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\r\n    <b-field grouped>\r\n      <b-autocomplete\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"citation\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        :disabled=\"disabled\"\r\n      >\r\n        <template slot-scope=\"props\">\r\n          <div class=\"media\">\r\n            <div class=\"media-content\">\r\n              {{ props.option.citation }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </b-autocomplete>\r\n\r\n      <slot />\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _debounce from 'lodash/debounce'\r\nimport _get from 'lodash/get'\r\n\r\nexport default {\r\n  name: 'nzPublicationAutocomplete',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'Publication'\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'Search for publication...'\r\n    },\r\n    publication: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    route: {\r\n      type: String,\r\n      default: 'api.autocomplete.publications.index'\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    except: {},\r\n    autofocus: Boolean,\r\n    disabled: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.publication || null,\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    icon() {\r\n      return this.selected ? 'check' : 'search'\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    publication(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function() {\r\n      if (!this.value) return\r\n\r\n      this.data = []\r\n      this.loading = true\r\n\r\n      let params = {\r\n        citation: this.value,\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(route(this.route), { params }).then(({ data }) => {\r\n        data.data.forEach((item) => this.data.push(item))\r\n        this.loading = false\r\n      }, response => {\r\n        this.loading = false\r\n      })\r\n    }, 500),\r\n\r\n    onSelect(user) {\r\n      this.selected = user\r\n\r\n      this.$emit('select', user)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected)\r\n      if (currentValue && currentValue !== value) {\r\n          this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object'\r\n        ? _get(option, 'citation')\r\n        : option\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationAutocomplete.vue?vue&type=template&id=84ec607a&\"\nimport script from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","class ExpiringStorage {\r\n  get(key) {\r\n    const cached = JSON.parse(\r\n      localStorage.getItem(key)\r\n    )\r\n\r\n    if (! cached) {\r\n      return null\r\n    }\r\n\r\n    const expires = new Date(cached.expires)\r\n\r\n    if (expires < new Date()) {\r\n      localStorage.removeItem(key)\r\n      return null\r\n    }\r\n\r\n    return cached.value\r\n  }\r\n\r\n  has(key) {\r\n    return this.get(key) !== null\r\n  }\r\n\r\n  set(key, value, lifeTimeInMinutes) {\r\n    const currentTime = new Date().getTime()\r\n\r\n    const expires = new Date(currentTime + lifeTimeInMinutes * 60000)\r\n\r\n    localStorage.setItem(key, JSON.stringify({ value, expires }))\r\n  }\r\n\r\n  delete(key) {\r\n    const cached = this.get(key)\r\n\r\n    if (cached) {\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ExpiringStorage()\r\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n"],"sourceRoot":""}