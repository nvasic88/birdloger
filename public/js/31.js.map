{"version":3,"sources":["webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?6fa7","webpack:///resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?9c07","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./resources/js/components/inputs/UserAutocomplete.vue?200d","webpack:///resources/js/components/inputs/UserAutocomplete.vue","webpack:///./resources/js/components/inputs/UserAutocomplete.vue?9f60","webpack:///./resources/js/components/inputs/UserAutocomplete.vue","webpack:///./resources/js/components/tables/LiteratureObservationsTable.vue?65c5","webpack:///resources/js/components/tables/LiteratureObservationsTable.vue","webpack:///./resources/js/components/tables/LiteratureObservationsTable.vue?8162","webpack:///./resources/js/components/tables/LiteratureObservationsTable.vue"],"names":["name","props","label","type","String","default","placeholder","publication","Object","route","value","error","Boolean","message","except","autofocus","disabled","data","selected","this","loading","computed","icon","watch","methods","fetchData","citation","params","forEach","onSelect","user","$emit","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","scopedSlots","_u","key","fn","_v","_s","_t","full_name","email","mixins","FilterableTableMixin","components","NzPerPageSelect","NzSortableColumnHeader","NzExportModal","NzPublicationAutocomplete","NzTaxonAutocomplete","NzUserAutocomplete","perPageOptions","Array","validator","length","listRoute","viewRoute","editRoute","deleteRoute","empty","showActivityLog","exportUrl","exportColumns","total","sortField","sortOrder","defaultSortOrder","page","perPage","checkedRows","activityLog","showExportModal","exporting","months","dayjs","days","hasActions","exportable","checkedIds","map","actionRunning","created","restoreState","loadAsyncData","$on","sort_by","per_page","response","getPersistantKeys","onPageChange","saveState","onSort","field","order","onPerPageChange","confirmRemove","$buefy","dialog","confirm","trans","confirmText","cancelText","onConfirm","remove","editLink","row","id","viewLink","openActivityLogModal","activity","filterDefaults","taxon","taxon_id","include_child_taxa","selected_taxon","year","month","day","observer","project","selected_publication","publication_id","publication_citation","openExportModal","onExportDone","finishedExport","url","modal","open","parent","ExportDownloadModal","canCancel","hasModalCard","toast","duration","onTaxonSelect","newFilter","onPublicationSelect","filters","truncate","$event","showFilter","class","filterIsActive","slot","_e","preventDefault","applyFilter","model","callback","$$v","$set","expression","domProps","_l","index","clearFilter","proxy","ref","location","latitude","longitude","elevation","accuracy","column","directives","rawName","content","_f"],"mappings":"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","file":"js/31.js?id=188ef8b07351ddd19b76","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-publication-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"citation\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.citation)+\"\\n          \")])])]}}])}),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :label=\"label\" class=\"nz-publication-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\r\n    <b-field grouped>\r\n      <b-autocomplete\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"citation\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        :disabled=\"disabled\"\r\n      >\r\n        <template slot-scope=\"props\">\r\n          <div class=\"media\">\r\n            <div class=\"media-content\">\r\n              {{ props.option.citation }}\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </b-autocomplete>\r\n\r\n      <slot />\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _debounce from 'lodash/debounce'\r\nimport _get from 'lodash/get'\r\n\r\nexport default {\r\n  name: 'nzPublicationAutocomplete',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'Publication'\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'Search for publication...'\r\n    },\r\n    publication: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    route: {\r\n      type: String,\r\n      default: 'api.autocomplete.publications.index'\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    except: {},\r\n    autofocus: Boolean,\r\n    disabled: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.publication || null,\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    icon() {\r\n      return this.selected ? 'check' : 'search'\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    publication(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function() {\r\n      if (!this.value) return\r\n\r\n      this.data = []\r\n      this.loading = true\r\n\r\n      let params = {\r\n        citation: this.value,\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(route(this.route), { params }).then(({ data }) => {\r\n        data.data.forEach((item) => this.data.push(item))\r\n        this.loading = false\r\n      }, response => {\r\n        this.loading = false\r\n      })\r\n    }, 500),\r\n\r\n    onSelect(user) {\r\n      this.selected = user\r\n\r\n      this.$emit('select', user)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected)\r\n      if (currentValue && currentValue !== value) {\r\n          this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object'\r\n        ? _get(option, 'citation')\r\n        : option\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationAutocomplete.vue?vue&type=template&id=84ec607a&\"\nimport script from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-user-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"full_name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.full_name)+\" \"),_c('small',[_vm._v(\"<\"+_vm._s(props.option.email)+\">\")])])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :label=\"label\" class=\"nz-user-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\r\n    <b-field grouped>\r\n      <b-autocomplete\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"full_name\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        :disabled=\"disabled\"\r\n      >\r\n        <template slot-scope=\"props\">\r\n          <div class=\"media\">\r\n            <div class=\"media-content\">\r\n              {{ props.option.full_name }} <small>&lt;{{ props.option.email }}&gt;</small>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n      </b-autocomplete>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _debounce from 'lodash/debounce'\r\nimport _get from 'lodash/get'\r\n\r\nexport default {\r\n  name: 'nzUserAutocomplete',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'User'\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'Search for user...'\r\n    },\r\n    user: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    route: {\r\n      type: String,\r\n      default: 'api.autocomplete.users.index'\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    except: {},\r\n    autofocus: Boolean,\r\n    disabled: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.user || null,\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    icon() {\r\n      return this.selected ? 'check' : null\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    user(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function() {\r\n      if (!this.value) return\r\n\r\n      this.data = []\r\n      this.loading = true\r\n\r\n      let params = {\r\n        name: this.value,\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(route(this.route), { params }).then(({ data }) => {\r\n        data.data.forEach((item) => this.data.push(item))\r\n        this.loading = false\r\n      }, response => {\r\n        this.loading = false\r\n      })\r\n    }, 500),\r\n\r\n    onSelect(user) {\r\n      this.selected = user\r\n\r\n      this.$emit('select', user)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected)\r\n      if (currentValue && currentValue !== value) {\r\n        this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object'\r\n        ? _get(option, 'full_name')\r\n        : option\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAutocomplete.vue?vue&type=template&id=5566d9c1&\"\nimport script from \"./UserAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field-observations-table\"},[_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_c('button',{staticClass:\"button is-touch-full\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showFilter = !_vm.showFilter}}},[_c('b-icon',{class:[_vm.filterIsActive ? 'has-text-primary' : 'has-text-grey'],attrs:{\"icon\":\"filter\",\"size\":_vm.filterIsActive ? null : 'is-small'}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans('buttons.filters')))])],1)])]),_vm._v(\" \"),(_vm.hasActions)?_c('div',{staticClass:\"level-right\"},[_c('div',{staticClass:\"level-item\"},[_c('b-dropdown',{attrs:{\"position\":\"is-bottom-left\"}},[_c('button',{staticClass:\"button is-touch-full\",class:{'is-loading': _vm.actionRunning},attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(_vm._s(_vm.trans('labels.actions')))]),_vm._v(\" \"),_c('span',{staticClass:\"icon has-text-grey\"},[_c('i',{staticClass:\"fa fa-angle-down\"})])]),_vm._v(\" \"),(_vm.exportable)?_c('b-dropdown-item',{on:{\"click\":_vm.openExportModal}},[_c('b-icon',{staticClass:\"has-text-grey\",attrs:{\"icon\":\"download\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans('buttons.export')))])],1):_vm._e()],1)],1)]):_vm._e()]),_vm._v(\" \"),_c('b-collapse',{staticClass:\"mt-4\",attrs:{\"open\":_vm.showFilter}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.applyFilter($event)}}},[_c('div',{staticClass:\"columns is-multiline\"},[_c('div',{staticClass:\"column is half\"},[_c('nz-taxon-autocomplete',{attrs:{\"taxon\":_vm.newFilter.selected_taxon,\"label\":_vm.trans('labels.literature_observations.taxon'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_taxon')},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.newFilter.taxon),callback:function ($$v) {_vm.$set(_vm.newFilter, \"taxon\", $$v)},expression:\"newFilter.taxon\"}}),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.newFilter.include_child_taxa),callback:function ($$v) {_vm.$set(_vm.newFilter, \"include_child_taxa\", $$v)},expression:\"newFilter.include_child_taxa\"}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.include_lower_taxa')))])],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column is-half\",attrs:{\"label\":_vm.trans('labels.literature_observations.date')}},[_c('b-field',{attrs:{\"expanded\":\"\",\"grouped\":\"\"}},[_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.year')},model:{value:(_vm.newFilter.year),callback:function ($$v) {_vm.$set(_vm.newFilter, \"year\", $$v)},expression:\"newFilter.year\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.month'),\"expanded\":\"\"},model:{value:(_vm.newFilter.month),callback:function ($$v) {_vm.$set(_vm.newFilter, \"month\", $$v)},expression:\"newFilter.month\"}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{key:index,domProps:{\"value\":(index + 1),\"textContent\":_vm._s(month)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.day'),\"expanded\":\"\"},model:{value:(_vm.newFilter.day),callback:function ($$v) {_vm.$set(_vm.newFilter, \"day\", $$v)},expression:\"newFilter.day\"}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.days),function(day){return _c('option',{key:day,domProps:{\"value\":day,\"textContent\":_vm._s(day)}})})],2)],1)],1)],1),_vm._v(\" \"),_c('nz-user-autocomplete',{staticClass:\"column is-half\",attrs:{\"label\":_vm.trans('labels.literature_observations.observer'),\"placeholder\":\"\"},model:{value:(_vm.newFilter.observer),callback:function ($$v) {_vm.$set(_vm.newFilter, \"observer\", $$v)},expression:\"newFilter.observer\"}}),_vm._v(\" \"),_c('b-field',{staticClass:\"column is-half\",attrs:{\"label\":_vm.trans('labels.literature_observations.project')}},[_c('b-input',{attrs:{\"expanded\":\"\"},model:{value:(_vm.newFilter.project),callback:function ($$v) {_vm.$set(_vm.newFilter, \"project\", $$v)},expression:\"newFilter.project\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column is-one-third\",attrs:{\"label\":_vm.trans('labels.id')}},[_c('b-input',{attrs:{\"expanded\":\"\"},model:{value:(_vm.newFilter.id),callback:function ($$v) {_vm.$set(_vm.newFilter, \"id\", $$v)},expression:\"newFilter.id\"}})],1),_vm._v(\" \"),_c('nz-publication-autocomplete',{staticClass:\"column is-two-thirds\",attrs:{\"publication\":_vm.newFilter.selected_publication,\"label\":_vm.trans('labels.literature_observations.publication'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_publication')},on:{\"select\":_vm.onPublicationSelect},model:{value:(_vm.newFilter.publication_citation),callback:function ($$v) {_vm.$set(_vm.newFilter, \"publication_citation\", $$v)},expression:\"newFilter.publication_citation\"}})],1),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary is-outlined\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.trans('buttons.apply')))]),_vm._v(\" \"),_c('button',{staticClass:\"button\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.clearFilter}},[_vm._v(_vm._s(_vm.trans('buttons.clear')))])])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-table',{attrs:{\"data\":_vm.data,\"loading\":_vm.loading,\"paginated\":\"\",\"backend-pagination\":\"\",\"total\":_vm.total,\"per-page\":_vm.perPage,\"current-page\":_vm.page,\"pagination-position\":\"both\",\"backend-sorting\":\"\",\"default-sort-direction\":\"asc\",\"default-sort\":[_vm.sortField, _vm.sortOrder],\"detailed\":\"\",\"mobile-cards\":\"\",\"checkable\":_vm.hasActions,\"checked-rows\":_vm.checkedRows},on:{\"page-change\":_vm.onPageChange,\"sort\":_vm.onSort,\"update:checkedRows\":function($event){_vm.checkedRows=$event},\"update:checked-rows\":function($event){_vm.checkedRows=$event}},scopedSlots:_vm._u([{key:\"top-left\",fn:function(){return [_c('nz-per-page-select',{attrs:{\"value\":_vm.perPage,\"options\":_vm.perPageOptions},on:{\"input\":_vm.onPerPageChange}})]},proxy:true},{key:\"bottom-left\",fn:function(){return [_c('nz-per-page-select',{attrs:{\"value\":_vm.perPage,\"options\":_vm.perPageOptions},on:{\"input\":_vm.onPerPageChange}})]},proxy:true},{key:\"empty\",fn:function(){return [_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"content has-text-grey has-text-centered\"},[_c('p',[_vm._v(_vm._s(_vm.empty))])])])]},proxy:true},{key:\"detail\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('article',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_c('div',{staticClass:\"content\"},[_c('strong',[_vm._v(_vm._s(row.location))]),_vm._v(\" \"),_c('small',[_vm._v(_vm._s(row.latitude)+\", \"+_vm._s(row.longitude))]),_c('br'),_vm._v(\" \"),_c('small',[_vm._v(_vm._s(_vm.trans('labels.literature_observations.elevation'))+\": \"+_vm._s(row.elevation)+\"m\")]),_c('br'),_vm._v(\" \"),(row.accuracy)?_c('small',[_vm._v(_vm._s(_vm.trans('labels.literature_observations.accuracy'))+\": \"+_vm._s(row.accuracy)+\"m\")]):_vm._e()])])])]}}])},[_vm._v(\" \"),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"id\",\"label\":_vm.trans('labels.id'),\"width\":\"40\",\"numeric\":\"\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n        \"+_vm._s(row.id)+\"\\n      \")]}},{key:\"header\",fn:function(ref){\nvar column = ref.column;\nreturn [_c('nz-sortable-column-header',{attrs:{\"column\":column,\"sort\":{ field: _vm.sortField, order: _vm.sortOrder }}})]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"taxon_name\",\"label\":_vm.trans('labels.literature_observations.taxon'),\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n        \"+_vm._s(row.taxon ? row.taxon.name : '')+\"\\n      \")]}},{key:\"header\",fn:function(ref){\nvar column = ref.column;\nreturn [_c('nz-sortable-column-header',{attrs:{\"column\":column,\"sort\":{ field: _vm.sortField, order: _vm.sortOrder }}})]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"year\",\"label\":_vm.trans('labels.literature_observations.year'),\"numeric\":\"\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n        \"+_vm._s(row.year)+\"\\n      \")]}},{key:\"header\",fn:function(ref){\nvar column = ref.column;\nreturn [_c('nz-sortable-column-header',{attrs:{\"column\":column,\"sort\":{ field: _vm.sortField, order: _vm.sortOrder }}})]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"month\",\"label\":_vm.trans('labels.literature_observations.month'),\"numeric\":\"\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n        \"+_vm._s(row.month)+\"\\n      \")]}},{key:\"header\",fn:function(ref){\nvar column = ref.column;\nreturn [_c('nz-sortable-column-header',{attrs:{\"column\":column,\"sort\":{ field: _vm.sortField, order: _vm.sortOrder }}})]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"day\",\"label\":_vm.trans('labels.literature_observations.day'),\"numeric\":\"\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n        \"+_vm._s(row.day)+\"\\n      \")]}},{key:\"header\",fn:function(ref){\nvar column = ref.column;\nreturn [_c('nz-sortable-column-header',{attrs:{\"column\":column,\"sort\":{ field: _vm.sortField, order: _vm.sortOrder }}})]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"publication_citation\",\"label\":_vm.trans('labels.literature_observations.publication')},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({ content: row.publication.citation }),expression:\"{ content: row.publication.citation }\"}]},[_vm._v(\"\\n          \"+_vm._s(_vm._f(\"truncate\")(row.publication.citation,50))+\"\\n        \")])]}}])}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"width\":\"150\",\"numeric\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(_vm.showActivityLog && row.activity)?_c('a',{attrs:{\"title\":_vm.trans('Activity Log')},on:{\"click\":function($event){$event.preventDefault();return _vm.openActivityLogModal(row)}}},[_c('b-icon',{attrs:{\"icon\":\"history\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.viewRoute)?_c('a',{attrs:{\"href\":_vm.viewLink(row),\"title\":_vm.trans('buttons.view')}},[_c('b-icon',{attrs:{\"icon\":\"eye\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.editRoute)?_c('a',{attrs:{\"href\":_vm.editLink(row),\"title\":_vm.trans('buttons.edit')}},[_c('b-icon',{attrs:{\"icon\":\"edit\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.deleteRoute)?_c('a',{attrs:{\"title\":_vm.trans('buttons.delete')},on:{\"click\":function($event){$event.preventDefault();return _vm.confirmRemove(row)}}},[_c('b-icon',{attrs:{\"icon\":\"trash\"}})],1):_vm._e()]}}])})],1),_vm._v(\" \"),_c('b-modal',{attrs:{\"active\":_vm.activityLog.length > 0,\"has-modal-card\":\"\"},on:{\"close\":function($event){_vm.activityLog = []}}},[_c('div',{staticClass:\"modal-card\"},[_c('div',{staticClass:\"modal-card-head\"},[_c('b-icon',{attrs:{\"icon\":\"history\"}}),_vm._v(\" \"),_c('p',{staticClass:\"modal-card-title\"},[_vm._v(_vm._s(_vm.trans('Activity Log')))])],1),_vm._v(\" \"),_c('div',{staticClass:\"modal-card-body\"},[_c('nz-literature-observation-activity-log',{attrs:{\"activities\":_vm.activityLog}})],1)])]),_vm._v(\" \"),_c('b-modal',{attrs:{\"active\":_vm.showExportModal,\"has-modal-card\":\"\",\"can-cancel\":[]},on:{\"close\":function($event){_vm.showExportModal = false}}},[_c('nz-export-modal',{attrs:{\"checked\":_vm.checkedIds,\"columns\":_vm.exportColumns,\"url\":_vm.exportUrl,\"types\":['custom', 'darwin_core']},on:{\"cancel\":function($event){_vm.showExportModal = false},\"done\":_vm.onExportDone}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"field-observations-table\">\r\n    <div class=\"level\">\r\n      <div class=\"level-left\">\r\n        <div class=\"level-item\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"button is-touch-full\"\r\n            @click=\"showFilter = !showFilter\"\r\n          >\r\n            <b-icon\r\n              icon=\"filter\"\r\n              :size=\"filterIsActive ? null : 'is-small'\"\r\n              :class=\"[filterIsActive ? 'has-text-primary' : 'has-text-grey']\"\r\n            />\r\n\r\n            <span>{{ trans('buttons.filters') }}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"level-right\" v-if=\"hasActions\">\r\n        <div class=\"level-item\">\r\n          <b-dropdown position=\"is-bottom-left\">\r\n            <button\r\n              class=\"button is-touch-full\"\r\n              slot=\"trigger\"\r\n              :class=\"{'is-loading': actionRunning}\"\r\n            >\r\n              <span>{{ trans('labels.actions') }}</span>\r\n\r\n              <span class=\"icon has-text-grey\">\r\n                  <i class=\"fa fa-angle-down\"></i>\r\n              </span>\r\n            </button>\r\n\r\n            <b-dropdown-item\r\n              @click=\"openExportModal\"\r\n              v-if=\"exportable\"\r\n            >\r\n              <b-icon icon=\"download\" class=\"has-text-grey\" />\r\n\r\n              <span>{{ trans('buttons.export') }}</span>\r\n            </b-dropdown-item>\r\n          </b-dropdown>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <b-collapse :open=\"showFilter\" class=\"mt-4\">\r\n      <form @submit.prevent=\"applyFilter\">\r\n        <div class=\"columns is-multiline\">\r\n          <div class=\"column is half\">\r\n            <nz-taxon-autocomplete\r\n              @select=\"onTaxonSelect\"\r\n              v-model=\"newFilter.taxon\"\r\n              :taxon=\"newFilter.selected_taxon\"\r\n              :label=\"trans('labels.literature_observations.taxon')\"\r\n              :placeholder=\"trans('labels.literature_observations.search_for_taxon')\"\r\n            />\r\n            <b-checkbox v-model=\"newFilter.include_child_taxa\">{{ trans('labels.literature_observations.include_lower_taxa') }}</b-checkbox>\r\n          </div>\r\n\r\n          <b-field :label=\"trans('labels.literature_observations.date')\" class=\"column is-half\">\r\n            <b-field expanded grouped>\r\n              <b-field expanded>\r\n                <b-input\r\n                  :placeholder=\"trans('labels.literature_observations.year')\"\r\n                  v-model=\"newFilter.year\"\r\n                />\r\n              </b-field>\r\n\r\n              <b-field expanded>\r\n                <b-select\r\n                  :placeholder=\"trans('labels.literature_observations.month')\"\r\n                  v-model=\"newFilter.month\"\r\n                  expanded\r\n                >\r\n                  <option :value=\"null\"></option>\r\n\r\n                  <option v-for=\"(month, index) in months\" :key=\"index\" :value=\"(index + 1)\" v-text=\"month\"></option>\r\n                </b-select>\r\n              </b-field>\r\n\r\n              <b-field expanded>\r\n                <b-select\r\n                  :placeholder=\"trans('labels.literature_observations.day')\"\r\n                  v-model=\"newFilter.day\"\r\n                  expanded\r\n                >\r\n                  <option :value=\"null\"></option>\r\n\r\n                  <option v-for=\"day in days\" :value=\"day\" :key=\"day\" v-text=\"day\"></option>\r\n                </b-select>\r\n              </b-field>\r\n            </b-field>\r\n          </b-field>\r\n\r\n          <nz-user-autocomplete\r\n            class=\"column is-half\"\r\n            v-model=\"newFilter.observer\"\r\n            :label=\"trans('labels.literature_observations.observer')\"\r\n            placeholder=\"\"\r\n          />\r\n\r\n          <b-field :label=\"trans('labels.literature_observations.project')\" class=\"column is-half\">\r\n            <b-input v-model=\"newFilter.project\" expanded />\r\n          </b-field>\r\n\r\n          <b-field :label=\"trans('labels.id')\" class=\"column is-one-third\">\r\n            <b-input v-model=\"newFilter.id\" expanded />\r\n          </b-field>\r\n\r\n          <nz-publication-autocomplete\r\n            class=\"column is-two-thirds\"\r\n            v-model=\"newFilter.publication_citation\"\r\n            @select=\"onPublicationSelect\"\r\n            :publication=\"newFilter.selected_publication\"\r\n            :label=\"trans('labels.literature_observations.publication')\"\r\n            :placeholder=\"trans('labels.literature_observations.search_for_publication')\"\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"button is-primary is-outlined\">{{ trans('buttons.apply') }}</button>\r\n        <button type=\"button\" class=\"button\" @click=\"clearFilter\">{{ trans('buttons.clear') }}</button>\r\n      </form>\r\n    </b-collapse>\r\n\r\n    <hr>\r\n\r\n    <b-table\r\n      :data=\"data\"\r\n      :loading=\"loading\"\r\n\r\n      paginated\r\n      backend-pagination\r\n      :total=\"total\"\r\n      :per-page=\"perPage\"\r\n      :current-page=\"page\"\r\n      @page-change=\"onPageChange\"\r\n      pagination-position=\"both\"\r\n\r\n      backend-sorting\r\n      default-sort-direction=\"asc\"\r\n      :default-sort=\"[sortField, sortOrder]\"\r\n      @sort=\"onSort\"\r\n\r\n      detailed\r\n      mobile-cards\r\n\r\n      :checkable=\"hasActions\"\r\n      :checked-rows.sync=\"checkedRows\"\r\n    >\r\n      <template #top-left>\r\n        <nz-per-page-select :value=\"perPage\" @input=\"onPerPageChange\" :options=\"perPageOptions\" />\r\n      </template>\r\n      <template #bottom-left>\r\n        <nz-per-page-select :value=\"perPage\" @input=\"onPerPageChange\" :options=\"perPageOptions\" />\r\n      </template>\r\n\r\n      <b-table-column field=\"id\" :label=\"trans('labels.id')\" width=\"40\" numeric sortable>\r\n        <template #default=\"{ row }\">\r\n          {{ row.id }}\r\n        </template>\r\n        <template #header=\"{ column }\">\r\n          <nz-sortable-column-header :column=\"column\" :sort=\"{ field: sortField, order: sortOrder }\" />\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"taxon_name\" :label=\"trans('labels.literature_observations.taxon')\" sortable>\r\n        <template #default=\"{ row }\">\r\n          {{ row.taxon ? row.taxon.name : '' }}\r\n        </template>\r\n\r\n        <template #header=\"{ column }\">\r\n          <nz-sortable-column-header :column=\"column\" :sort=\"{ field: sortField, order: sortOrder }\" />\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"year\" :label=\"trans('labels.literature_observations.year')\" numeric sortable>\r\n        <template #default=\"{ row }\">\r\n          {{ row.year }}\r\n        </template>\r\n        <template #header=\"{ column }\">\r\n          <nz-sortable-column-header :column=\"column\" :sort=\"{ field: sortField, order: sortOrder }\" />\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"month\" :label=\"trans('labels.literature_observations.month')\" numeric sortable>\r\n        <template #default=\"{ row }\">\r\n          {{ row.month }}\r\n        </template>\r\n        <template #header=\"{ column }\">\r\n          <nz-sortable-column-header :column=\"column\" :sort=\"{ field: sortField, order: sortOrder }\" />\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"day\" :label=\"trans('labels.literature_observations.day')\" numeric sortable>\r\n        <template #default=\"{ row }\">\r\n          {{ row.day }}\r\n        </template>\r\n        <template #header=\"{ column }\">\r\n          <nz-sortable-column-header :column=\"column\" :sort=\"{ field: sortField, order: sortOrder }\" />\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"publication_citation\" :label=\"trans('labels.literature_observations.publication')\">\r\n        <template #default=\"{ row }\">\r\n          <span v-tooltip=\"{ content: row.publication.citation }\">\r\n            {{ row.publication.citation | truncate(50) }}\r\n          </span>\r\n        </template>\r\n      </b-table-column>\r\n\r\n      <b-table-column width=\"150\" numeric v-slot=\"{ row }\">\r\n        <a @click.prevent=\"openActivityLogModal(row)\" v-if=\"showActivityLog && row.activity\" :title=\"trans('Activity Log')\"><b-icon icon=\"history\" /></a>\r\n\r\n        <a :href=\"viewLink(row)\" v-if=\"viewRoute\" :title=\"trans('buttons.view')\"><b-icon icon=\"eye\" /></a>\r\n\r\n        <a :href=\"editLink(row)\" v-if=\"editRoute\" :title=\"trans('buttons.edit')\"><b-icon icon=\"edit\" /></a>\r\n\r\n        <a @click.prevent=\"confirmRemove(row)\" v-if=\"deleteRoute\" :title=\"trans('buttons.delete')\"><b-icon icon=\"trash\" /></a>\r\n      </b-table-column>\r\n\r\n      <template #empty>\r\n        <section class=\"section\">\r\n          <div class=\"content has-text-grey has-text-centered\">\r\n            <p>{{ empty }}</p>\r\n          </div>\r\n        </section>\r\n      </template>\r\n\r\n      <template #detail=\"{ row }\">\r\n        <article class=\"media\">\r\n          <div class=\"media-content\">\r\n            <div class=\"content\">\r\n              <strong>{{ row.location }}</strong>\r\n\r\n              <small>{{ row.latitude }}, {{ row.longitude }}</small><br>\r\n\r\n              <small>{{ trans('labels.literature_observations.elevation') }}: {{ row.elevation}}m</small><br>\r\n\r\n              <small v-if=\"row.accuracy\">{{ trans('labels.literature_observations.accuracy') }}: {{ row.accuracy}}m</small>\r\n            </div>\r\n          </div>\r\n        </article>\r\n      </template>\r\n    </b-table>\r\n\r\n    <b-modal :active=\"activityLog.length > 0\" @close=\"activityLog = []\" has-modal-card>\r\n      <div class=\"modal-card\">\r\n        <div class=\"modal-card-head\">\r\n          <b-icon icon=\"history\" />\r\n          <p class=\"modal-card-title\">{{ trans('Activity Log') }}</p>\r\n        </div>\r\n        <div class=\"modal-card-body\">\r\n          <nz-literature-observation-activity-log :activities=\"activityLog\" />\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n\r\n    <b-modal :active=\"showExportModal\" @close=\"showExportModal = false\" has-modal-card :can-cancel=\"[]\">\r\n      <!-- :filter=\"filter\" -->\r\n      <nz-export-modal\r\n        :checked=\"checkedIds\"\r\n        :columns=\"exportColumns\"\r\n        :url=\"exportUrl\"\r\n        @cancel=\"showExportModal = false\"\r\n        @done=\"onExportDone\"\r\n        :types=\"['custom', 'darwin_core']\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _range from 'lodash/range'\r\nimport dayjs from '@/dayjs'\r\nimport FilterableTableMixin from '@/mixins/FilterableTableMixin'\r\nimport PersistentTableMixin from '@/mixins/PersistentTableMixin'\r\nimport ExportDownloadModal from '@/components/exports/ExportDownloadModal'\r\nimport NzPublicationAutocomplete from '@/components/inputs/PublicationAutocomplete'\r\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\r\nimport NzUserAutocomplete from '@/components/inputs/UserAutocomplete'\r\nimport NzPerPageSelect from '@/components/table/PerPageSelect'\r\nimport NzSortableColumnHeader from '@/components/table/SortableColumnHeader'\r\nimport NzExportModal from '@/components/exports/ExportModal'\r\n\r\nexport default {\r\n  name: 'nzLiteratureObservationsTable',\r\n\r\n  mixins: [FilterableTableMixin, PersistentTableMixin],\r\n\r\n  components: {\r\n    NzPerPageSelect,\r\n    NzSortableColumnHeader,\r\n    NzExportModal,\r\n    NzPublicationAutocomplete,\r\n    NzTaxonAutocomplete,\r\n    NzUserAutocomplete\r\n  },\r\n\r\n  props: {\r\n    perPageOptions: {\r\n      type: Array,\r\n      default() {\r\n        return [15, 30, 50, 100]\r\n      },\r\n      validator(value) {\r\n        return value.length\r\n      }\r\n    },\r\n    listRoute: String,\r\n    viewRoute: String,\r\n    editRoute: String,\r\n    deleteRoute: String,\r\n    empty: {\r\n      type: String,\r\n      default: 'Nothing here.'\r\n    },\r\n    showActivityLog: Boolean,\r\n    exportUrl: String,\r\n    exportColumns: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      total: 0,\r\n      loading: false,\r\n      sortField: 'id',\r\n      sortOrder: 'desc',\r\n      defaultSortOrder: 'asc',\r\n      page: 1,\r\n      perPage: this.perPageOptions[0],\r\n      checkedRows: [],\r\n      activityLog: [],\r\n      showExportModal: false,\r\n      exporting: false,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    months() {\r\n      return dayjs.months()\r\n    },\r\n\r\n    days() {\r\n      return _range(1, 32)\r\n    },\r\n\r\n    hasActions() {\r\n      return this.exportable\r\n    },\r\n\r\n    checkedIds() {\r\n      return this.checkedRows.map(row => row.id)\r\n    },\r\n\r\n    exportable() {\r\n      return !!(this.exportUrl && this.exportColumns.length)\r\n    },\r\n\r\n    actionRunning() {\r\n      return this.exporting\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.restoreState()\r\n    this.loadAsyncData()\r\n\r\n    this.$on('filter', () => {\r\n      this.page = 1\r\n      this.saveState()\r\n      this.loadAsyncData()\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    loadAsyncData() {\r\n      this.loading = true\r\n      this.checkedRows = []\r\n\r\n      const { selected_taxon, selected_publication, publication_citation, ...filter } = this.filter\r\n\r\n      return axios.get(route(this.listRoute).withQuery({\r\n        ...filter,\r\n        sort_by: `${this.sortField}.${this.sortOrder}`,\r\n        page: this.page,\r\n        per_page: this.perPage,\r\n      })).then(({ data: response }) => {\r\n        this.data = []\r\n        this.total = response.meta.total\r\n        response.data.forEach((item) => this.data.push(item))\r\n        this.loading = false\r\n      }, (response) => {\r\n        this.data = []\r\n        this.total = 0\r\n        this.loading = false\r\n      })\r\n    },\r\n\r\n    getPersistantKeys() {\r\n      return [\r\n        'sortField', 'sortOrder', 'perPage', 'page',\r\n        'newFilter', 'filter', 'filterIsActive'\r\n      ]\r\n    },\r\n\r\n    /*\r\n     * Handle page-change event\r\n     */\r\n    onPageChange(page) {\r\n      this.page = page\r\n\r\n      this.saveState()\r\n\r\n      this.loadAsyncData()\r\n    },\r\n\r\n    /*\r\n     * Handle sort event\r\n     */\r\n    onSort(field, order) {\r\n      this.sortField = field\r\n      this.sortOrder = order\r\n\r\n      this.saveState()\r\n\r\n      this.loadAsyncData()\r\n    },\r\n\r\n    onPerPageChange(perPage) {\r\n      if (perPage === this.perPage) return\r\n\r\n      this.perPage = perPage\r\n\r\n      this.saveState()\r\n\r\n      this.loadAsyncData()\r\n    },\r\n\r\n    confirmRemove(row) {\r\n      this.$buefy.dialog.confirm({\r\n        message: this.trans('Are you sure you want to delete this record?'),\r\n        confirmText: this.trans('buttons.delete'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        type: 'is-danger',\r\n        onConfirm: () => { this.remove(row) }\r\n      })\r\n    },\r\n\r\n    remove(row) {\r\n      return axios.delete(route(this.deleteRoute, row.id)).then(response => {\r\n        this.$buefy.toast.open({\r\n          message: this.trans('Record deleted'),\r\n          type: 'is-success'\r\n        })\r\n\r\n        this.loadAsyncData()\r\n      }).catch(error => { console.error(error) })\r\n    },\r\n\r\n    editLink(row) {\r\n      return route(this.editRoute, row.id)\r\n    },\r\n\r\n    viewLink(row) {\r\n      return this.viewRoute ? route(this.viewRoute, row.id) : null\r\n    },\r\n\r\n    openActivityLogModal(row) {\r\n      this.activityLog = row.activity\r\n    },\r\n\r\n    filterDefaults() {\r\n      return {\r\n        taxon: null,\r\n        taxon_id: null,\r\n        include_child_taxa: false,\r\n        selected_taxon: null,\r\n        year: null,\r\n        month: null,\r\n        day: null,\r\n        observer: null,\r\n        project: null,\r\n        selected_publication: null,\r\n        publication_id: null,\r\n        publication_citation: null,\r\n        id: null\r\n      }\r\n    },\r\n\r\n    openExportModal() {\r\n      this.showExportModal = true\r\n    },\r\n\r\n    onExportDone(finishedExport) {\r\n      this.showExportModal = false\r\n\r\n      if (finishedExport.url) {\r\n        this.$buefy.modal.open({\r\n          parent: this,\r\n          component: ExportDownloadModal,\r\n          canCancel: [],\r\n          hasModalCard: true,\r\n          props: {\r\n            url: finishedExport.url,\r\n          }\r\n        })\r\n      } else {\r\n        this.$buefy.toast.open({\r\n          duration: 0,\r\n          message: `Something's not good, also I'm on bottom`,\r\n          type: 'is-danger'\r\n        })\r\n      }\r\n    },\r\n\r\n    onTaxonSelect(taxon) {\r\n      this.newFilter.taxon_id = taxon ? taxon.id : null\r\n      this.newFilter.selected_taxon = taxon\r\n    },\r\n\r\n    onPublicationSelect(publication) {\r\n      this.newFilter.publication_id = publication ? publication.id : null\r\n      this.newFilter.selected_publication = publication\r\n    }\r\n  },\r\n\r\n  filters: {\r\n    /**\r\n     * Filter to truncate string, accepts a length parameter\r\n     */\r\n    truncate(value, length) {\r\n      return value.length > length\r\n        ? value.substr(0, length) + '...'\r\n        : value\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationsTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationsTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LiteratureObservationsTable.vue?vue&type=template&id=2e8859fc&\"\nimport script from \"./LiteratureObservationsTable.vue?vue&type=script&lang=js&\"\nexport * from \"./LiteratureObservationsTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}