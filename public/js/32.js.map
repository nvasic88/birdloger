{"version":3,"sources":["webpack:///./resources/js/components/forms/PublicationForm.vue?ac7d","webpack:///resources/js/components/inputs/PublicationAttachmentUpload.vue","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue?1e5a","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue?70d9","webpack:///resources/js/components/forms/PublicationForm.vue","webpack:///./resources/js/components/forms/PublicationForm.vue?8668","webpack:///./resources/js/components/forms/PublicationForm.vue","webpack:///./resources/js/mixins/FormMixin.js"],"names":["name","props","attachment","Object","data","newAttachment","this","reader","uploading","progress","error","computed","hasAttachment","Boolean","methods","onInput","file","upload","remove","openUpload","$refs","input","click","axios","post","route","makeForm","headers","Accept","onUploadProgress","form","append","handleError","$el","querySelector","value","response","$buefy","toast","open","duration","message","position","type","errors","trans","_vm","_h","$createElement","_c","_self","attrs","staticClass","domProps","_v","_s","_e","url","original_name","on","directives","rawName","expression","ref","components","mixins","FormMixin","publication","default","publicationTypes","Array","resetOnSuccess","chosenType","typeHasName","has_name","typeHasEditors","has_editors","typeRequiresEditors","requires_editors","typeHasPublisher","has_publisher","typeRequiresPublisher","requires_publisher","typeHasIssue","has_issue","typeRequiresIssue","requires_issue","typeHasPlace","has_place","typeRequiresPlace","requires_place","typeHasPageRange","has_page_range","nameLabel","titleLabel","addAuthor","authors","push","addEditor","editors","removeAuthor","removeItemFromField","index","removeEditor","field","removeErrorForItem","keys","forEach","match","newErrors","errorField","record","handleAttachmentUploaded","attachment_id","id","handleRemovedAttachment","authorHasError","has","getAuthorError","first","editorHasError","getEditorError","action","method","locale","$event","preventDefault","submitWithRedirect","model","callback","$$v","$set","_l","publicationType","key","label","class","slot","content","_","i","cancelUrl","String","required","redirectUrl","submitMore","shouldConfirmSubmit","confirmSubmitMessage","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","window","App","created","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","Form","e","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","confirmSubmit","onConfirm","options","confirmText","cancelText","onCancel","promptForReason","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","target","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","notifyNoChangesAndRedirect","setTimeout","location","href","processing","isDirty","performSubmitWithRedirect","reason","toLowerCase","then","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","reset","populate","hookAfterSubmitWithoutRedirect","_get","_isEqual","initial","confirmCancel","event"],"mappings":"mGAAA,I,oMCwBA,ICxBiO,EDwBjO,CACEA,KAAM,gCAENC,MAAO,CACLC,WAAYC,QAGdC,KAPF,WAQI,MAAO,CACLC,cAAeC,KAAKJ,WACpBK,OAAQ,KACRC,WAAW,EACXC,SAAU,EACVC,MAAO,OAIXC,SAAU,CACRC,cADJ,WAEM,OAAOC,QAAQP,KAAKD,iBAIxBS,QAAS,CACPC,QADJ,SACA,GACMT,KAAKI,MAAQ,KAERM,EAGHV,KAAKW,OAAOD,GAFZV,KAAKY,UAMTC,WAXJ,WAYMb,KAAKc,MAAMH,OAAOG,MAAMC,MAAMC,SAGhCL,OAfJ,SAeA,cAEM,OADAX,KAAKE,WAAY,EACVe,MAAMC,KAAKC,MAAM,qCAAsCnB,KAAKoB,SAASV,GAAO,CACjFW,QAAS,CACP,eAAgB,sBAChBC,OAAQ,oBAEVC,iBAAkB,SAA1B,GACU,EAAV,6CAEA,kBACQ,IAAR,cACQ,EAAR,gBAEQ,EAAR,aACQ,EAAR,WAEQ,EAAR,uBAfA,MAgBA,mBAGIH,SApCJ,SAoCA,GACM,IAAN,eAIM,OAFAI,EAAKC,OAAO,aAAcf,GAEnBc,GAGT,OA5CJ,WA4CA,I,EAAA,c,EAAA,2FACA,gBADA,iDAGA,mCAEA,qBALA,0C,kLAQIE,YApDJ,SAoDA,GAOM,GANA1B,KAAKE,WAAY,EACjBF,KAAKG,SAAW,EAGhBH,KAAK2B,IAAIC,cAAc,sBAAsBC,MAAQ,IAEhDzB,EAAM0B,SACT,OAAO9B,KAAK+B,OAAOC,MAAMC,KAAK,CAC5BC,SAAU,IACVC,QAAS/B,EAAM+B,QACfC,SAAU,SACVC,KAAM,cAIVrC,KAAKI,MAAQA,EAAM0B,SAAShC,KAAKwC,OAAO1C,WAAW,IAAMI,KAAKuC,MAAM,Y,YEjG3D,EAXC,YACd,GCRW,WAAa,IAAIC,EAAIxC,KAASyC,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,MAAM,CAAC,QAAUL,EAAIpC,OAAS,KAAK,KAAOoC,EAAIpC,MAAQ,YAAc,KAAK,SAAW,KAAK,CAACuC,EAAG,UAAU,CAACG,YAAY,QAAQ,CAAEN,EAAa,UAAEG,EAAG,WAAW,CAACG,YAAY,+BAA+BD,MAAM,CAAC,IAAM,OAAOE,SAAS,CAAC,MAAQP,EAAIrC,WAAW,CAACqC,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIrC,UAAU,OAAOqC,EAAIU,KAAKV,EAAIQ,GAAG,KAAOR,EAAIlC,cAA8YqC,EAAG,MAAM,CAACG,YAAY,4CAA4C,CAACH,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,IAAI,CAACE,MAAM,CAAC,KAAOL,EAAIzC,cAAcoD,IAAI,SAAWX,EAAIzC,cAAcqD,cAAc,OAAS,WAAW,CAACZ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIzC,cAAcqD,oBAAoBZ,EAAIQ,GAAG,KAAKL,EAAG,SAAS,CAACG,YAAY,+BAA+BD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQb,EAAI5B,SAAS,CAAC+B,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,YAAY,KAA9xBF,EAAG,WAAW,CAACW,WAAW,CAAC,CAAC5D,KAAK,OAAO6D,QAAQ,SAAS1B,OAAQW,EAAItC,UAAWsD,WAAW,eAAeC,IAAI,SAASZ,MAAM,CAAC,OAAS,wBAAwBQ,GAAG,CAAC,MAAQb,EAAI/B,UAAU,CAACkC,EAAG,SAAS,CAACG,YAAY,sBAAsBD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQb,EAAI3B,aAAa,CAAC8B,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,YAAYL,EAAIQ,GAAG,KAAKL,EAAG,OAAO,CAACH,EAAIQ,GAAG,sBAAsB,MAA0a,IAAI,KAC1sC,IDUpB,EACA,KACA,KACA,M,47CE8PF,IC5QqN,ED4QrN,CACEtD,KAAM,oBAENgE,WAAY,EAAd,GACA,UAGEC,OAAQ,CAACC,EAAX,GAEEjE,MAAO,CACLkE,YAAa,CACXxB,KAAMxC,OACNiE,QAAN,kBACA,UACA,UACA,UACA,WACA,eACA,WACA,WACA,gBACA,gBACA,SACA,cACA,WACA,WACA,UACA,gBACA,sBAIIC,iBAAkB,CAChB1B,KAAM2B,MACNF,QAAN,uBAIEhE,KAtCF,WAuCI,MAAO,CACL0B,KAAM,IAAI,EAAhB,OACA,kBACA,CACQyC,gBAAgB,MAKtB5D,SAAU,CACR6D,WADJ,WAEM,OAAO,IAAb,+CAGIC,YALJ,WAMM,QAAOnE,KAAKkE,YAAalE,KAAKkE,WAAWE,UAG3CC,eATJ,WAUM,QAAOrE,KAAKkE,YAAalE,KAAKkE,WAAWI,aAG3CC,oBAbJ,WAcM,QAAOvE,KAAKkE,YAAalE,KAAKkE,WAAWM,kBAG3CC,iBAjBJ,WAkBM,QAAOzE,KAAKkE,YAAalE,KAAKkE,WAAWQ,eAG3CC,sBArBJ,WAsBM,QAAO3E,KAAKkE,YAAalE,KAAKkE,WAAWU,oBAG3CC,aAzBJ,WA0BM,QAAO7E,KAAKkE,YAAalE,KAAKkE,WAAWY,WAG3CC,kBA7BJ,WA8BM,QAAO/E,KAAKkE,YAAalE,KAAKkE,WAAWc,gBAG3CC,aAjCJ,WAkCM,QAAOjF,KAAKkE,YAAalE,KAAKkE,WAAWgB,WAG3CC,kBArCJ,WAsCM,QAAOnF,KAAKkE,YAAalE,KAAKkE,WAAWkB,gBAG3CC,iBAzCJ,WA0CM,QAAOrF,KAAKkE,YAAalE,KAAKkE,WAAWoB,gBAG3CC,UA7CJ,WA8CM,IAAN,iBAEM,OAAOvF,KAAKuC,MAAM,uBAAxB,8DAGIiD,WAnDJ,WAoDM,IAAN,iBAEM,OAAOxF,KAAKuC,MAAM,uBAAxB,iEAIE/B,QAAS,CACPiF,UADJ,WAEMzF,KAAKwB,KAAKkE,QAAQC,KAAK,CAA7B,8BAGIC,UALJ,WAMM5F,KAAKwB,KAAKqE,QAAQF,KAAK,CAA7B,8BAGIG,aATJ,SASA,GACM9F,KAAK+F,oBAAoB,UAAWC,IAGtCC,aAbJ,SAaA,GACMjG,KAAK+F,oBAAoB,UAAWC,IAGtCD,oBAjBJ,SAiBA,KACM/F,KAAKwB,KAAK0E,GAAS,GAAzB,SACA,yBADA,EAEA,0BAIMlG,KAAKmG,mBAAmBD,EAAOF,IAGjCG,mBA3BJ,SA2BA,KAIM,IAAN,yBACA,KAEMtG,OAAOuG,KAAK9D,GAAQ+D,SAAQ,SAAlC,GACQ,IAAR,gDAEYC,GAASA,EAAM,GAAKN,EACtBO,EAAU,GAApB,mCACA,IACUA,EAAUC,GAAclE,EAAOkE,OAInCxG,KAAKwB,KAAKc,OAAOmE,OAAOF,IAG1BG,yBA/CJ,SA+CA,GACM1G,KAAKwB,KAAK5B,WAAaA,EACvBI,KAAKwB,KAAKmF,cAAgB/G,EAAWgH,IAGvCC,wBApDJ,WAqDM7G,KAAKwB,KAAK5B,WAAa,KACvBI,KAAKwB,KAAKmF,cAAgB,MAG5BG,eAzDJ,SAyDA,GACM,OAAO9G,KAAKwB,KAAKc,OAAOyE,IAAI,WAAlC,YACA,0DACA,yDAGIC,eA/DJ,SA+DA,GACM,OAAOhH,KAAKwB,KAAKc,OAAO2E,MAAM,WAApC,YACA,4DACA,2DAGIC,eArEJ,SAqEA,GACM,OAAOlH,KAAKwB,KAAKc,OAAOyE,IAAI,WAAlC,YACA,0DACA,yDAGII,eA3EJ,SA2EA,GACM,OAAOnH,KAAKwB,KAAKc,OAAO2E,MAAM,WAApC,YACA,4DACA,6DE7bI,EAAY,YACd,GPRW,WAAa,IAAIzE,EAAIxC,KAASyC,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACG,YAAY,mBAAmBD,MAAM,CAAC,OAASL,EAAI4E,OAAO,OAAS5E,EAAI6E,OAAO,KAAO7E,EAAI8E,QAAQjE,GAAG,CAAC,OAAS,SAASkE,GAAgC,OAAxBA,EAAOC,iBAAwBhF,EAAIiF,mBAAmBF,MAAW,CAAC5E,EAAG,MAAM,CAACG,YAAY,WAAW,CAACH,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,MAAQL,EAAID,MAAM,4BAA4B,YAAY,OAAO,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,QAAU,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,QAAUvE,EAAIhB,KAAKc,OAAO2E,MAAM,QAAU,OAAO,CAACtE,EAAG,WAAW,CAACE,MAAM,CAAC,GAAK,OAAO,KAAO,OAAO,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAS,KAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,OAAQoG,IAAMpE,WAAW,cAAchB,EAAIsF,GAAItF,EAAoB,kBAAE,SAASuF,GAAiB,OAAOpF,EAAG,SAAS,CAACqF,IAAID,EAAgBlG,MAAMkB,SAAS,CAAC,MAAQgF,EAAgBlG,QAAQ,CAACW,EAAIQ,GAAG,iBAAiBR,EAAIS,GAAG8E,EAAgBE,OAAO,qBAAoB,IAAI,GAAGzF,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,MAAQL,EAAID,MAAM,4BAA4B,YAAY,OAAO,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,QAAU,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,QAAUvE,EAAIhB,KAAKc,OAAO2E,MAAM,QAAU,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,OAAO,KAAO,OAAO,KAAO,SAAS,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAS,KAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,OAAQoG,IAAMpE,WAAW,gBAAgB,GAAGhB,EAAIQ,GAAG,KAAMR,EAAe,YAAEG,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,MAAQL,EAAI+C,UAAU,YAAY,OAAO,KAAO/C,EAAIhB,KAAKc,OAAOyE,IAAI,QAAU,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,QAAUvE,EAAIhB,KAAKc,OAAO2E,MAAM,QAAU,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,OAAO,KAAO,OAAO,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAS,KAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,OAAQoG,IAAMpE,WAAW,gBAAgB,GAAGhB,EAAIU,KAAKV,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,MAAQL,EAAIgD,WAAW,YAAY,QAAQ,KAAOhD,EAAIhB,KAAKc,OAAOyE,IAAI,SAAW,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,SAAWvE,EAAIhB,KAAKc,OAAO2E,MAAM,SAAW,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQ,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAU,MAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,QAASoG,IAAMpE,WAAW,iBAAiB,GAAGhB,EAAIQ,GAAG,KAAMR,EAAoB,iBAAEG,EAAG,UAAU,CAACuF,MAAM,CAAC,cAAe1F,EAAImC,uBAAuB9B,MAAM,CAAC,MAAQL,EAAID,MAAM,iCAAiC,YAAY,YAAY,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,aAAe,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,aAAevE,EAAIhB,KAAKc,OAAO2E,MAAM,aAAe,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,YAAY,KAAO,YAAY,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAc,UAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,YAAaoG,IAAMpE,WAAW,qBAAqB,GAAGhB,EAAIU,KAAKV,EAAIQ,GAAG,KAAMR,EAAgB,aAAEG,EAAG,UAAU,CAACuF,MAAM,CAAC,cAAe1F,EAAIuC,mBAAmBlC,MAAM,CAAC,MAAQL,EAAID,MAAM,6BAA6B,YAAY,QAAQ,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,SAAW,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,SAAWvE,EAAIhB,KAAKc,OAAO2E,MAAM,SAAW,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQ,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAU,MAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,QAASoG,IAAMpE,WAAW,iBAAiB,GAAGhB,EAAIU,KAAKV,EAAIQ,GAAG,KAAMR,EAAgB,aAAEG,EAAG,UAAU,CAACuF,MAAM,CAAC,cAAe1F,EAAI2C,mBAAmBtC,MAAM,CAAC,MAAQL,EAAID,MAAM,6BAA6B,YAAY,QAAQ,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,SAAW,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,SAAWvE,EAAIhB,KAAKc,OAAO2E,MAAM,SAAW,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQ,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAU,MAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,QAASoG,IAAMpE,WAAW,iBAAiB,GAAGhB,EAAIU,KAAKV,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAID,MAAM,kCAAkC,YAAY,aAAa,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,cAAgB,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,cAAgBvE,EAAIhB,KAAKc,OAAO2E,MAAM,cAAgB,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,aAAa,KAAO,aAAa,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAe,WAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,aAAcoG,IAAMpE,WAAW,sBAAsB,GAAGhB,EAAIQ,GAAG,KAAMR,EAAoB,iBAAEG,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAID,MAAM,kCAAkC,YAAY,aAAa,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,cAAgB,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,cAAgBvE,EAAIhB,KAAKc,OAAO2E,MAAM,cAAgB,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,aAAa,KAAO,aAAa,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAe,WAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,aAAcoG,IAAMpE,WAAW,sBAAsB,GAAGhB,EAAIU,KAAKV,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAID,MAAM,2BAA2B,YAAY,MAAM,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,OAAS,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,OAASvE,EAAIhB,KAAKc,OAAO2E,MAAM,OAAS,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,MAAM,KAAO,MAAM,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAQ,IAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,MAAOoG,IAAMpE,WAAW,eAAe,GAAGhB,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,YAAY,WAAW,KAAOL,EAAIhB,KAAKc,OAAOyE,IAAI,YAAc,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,YAAcvE,EAAIhB,KAAKc,OAAO2E,MAAM,YAAc,OAAO,CAACtE,EAAG,QAAQ,CAACG,YAAY,QAAQD,MAAM,CAAC,KAAO,QAAQ,IAAM,YAAYsF,KAAK,SAAS,CAACxF,EAAG,OAAO,CAACW,WAAW,CAAC,CAAC5D,KAAK,UAAU6D,QAAQ,YAAY1B,MAAM,CAAEuG,QAAS5F,EAAID,MAAM,yCAA0CiB,WAAW,6DAA6DV,YAAY,aAAa,CAACN,EAAIQ,GAAG,iBAAiBR,EAAIS,GAAGT,EAAID,MAAM,iCAAiC,oBAAoBC,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,WAAW,KAAO,WAAW,KAAO,WAAW,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAa,SAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,WAAYoG,IAAMpE,WAAW,oBAAoB,IAAI,GAAGhB,EAAIQ,GAAG,KAAKL,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,UAAU,CAACG,YAAY,cAAcD,MAAM,CAAC,MAAQL,EAAID,MAAM,+BAA+B,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,WAAa,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,WAAavE,EAAIhB,KAAKc,OAAO2E,MAAM,WAAa,KAAK,QAAS,IAAQ,CAACzE,EAAIsF,GAAItF,EAAIhB,KAAY,SAAE,SAAS6G,EAAEC,GAAG,OAAO3F,EAAG,UAAU,CAACqF,IAAIM,EAAEzF,MAAM,CAAC,KAAOL,EAAIsE,eAAewB,GAAK,YAAc,KAAK,QAAU9F,EAAIsE,eAAewB,GAAK9F,EAAIwE,eAAesB,GAAK,KAAK,SAAW,GAAG,QAAS,IAAQ,CAAC3F,EAAG,UAAU,CAACE,MAAM,CAAC,KAAOL,EAAIsE,eAAewB,GAAK,YAAc,KAAK,SAAW,KAAK,CAAC3F,EAAG,UAAU,CAACE,MAAM,CAAC,KAAQ,WAAayF,EAAI,gBAAiB,YAAc9F,EAAID,MAAM,kCAAkC,SAAW,IAAImF,MAAM,CAAC7F,MAAOW,EAAIhB,KAAKkE,QAAQ4C,GAAa,WAAEX,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAKkE,QAAQ4C,GAAI,aAAcV,IAAMpE,WAAW,gCAAgChB,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,KAAQ,WAAayF,EAAI,eAAgB,YAAc9F,EAAID,MAAM,iCAAiC,SAAW,IAAImF,MAAM,CAAC7F,MAAOW,EAAIhB,KAAKkE,QAAQ4C,GAAY,UAAEX,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAKkE,QAAQ4C,GAAI,YAAaV,IAAMpE,WAAW,+BAA+BhB,EAAIQ,GAAG,KAAKL,EAAG,IAAI,CAACG,YAAY,WAAW,CAACH,EAAG,SAAS,CAACG,YAAY,+BAA+BD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQ,SAASkE,GAAQ,OAAO/E,EAAIsD,aAAawC,MAAM,CAAC3F,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,eAAe,MAAM,IAAI,MAAKL,EAAIQ,GAAG,KAAKL,EAAG,SAAS,CAACG,YAAY,kCAAkCD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQb,EAAIiD,YAAY,CAACjD,EAAIQ,GAAG,eAAeR,EAAIS,GAAGT,EAAID,MAAM,mCAAmC,iBAAiB,GAAGC,EAAIQ,GAAG,KAAMR,EAAkB,eAAEG,EAAG,UAAU,CAACuF,MAAM,CAAC,cAAe1F,EAAI+B,qBAAqB1B,MAAM,CAAC,MAAQL,EAAID,MAAM,+BAA+B,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,WAAa,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,WAAavE,EAAIhB,KAAKc,OAAO2E,MAAM,WAAa,KAAK,QAAS,IAAQ,CAACzE,EAAIsF,GAAItF,EAAIhB,KAAY,SAAE,SAAS6G,EAAEC,GAAG,OAAO3F,EAAG,UAAU,CAACqF,IAAIM,EAAEzF,MAAM,CAAC,KAAOL,EAAI0E,eAAeoB,GAAK,YAAc,KAAK,QAAU9F,EAAI0E,eAAeoB,GAAK9F,EAAI2E,eAAemB,GAAK,KAAK,SAAW,GAAG,QAAS,IAAQ,CAAC3F,EAAG,UAAU,CAACE,MAAM,CAAC,KAAOL,EAAI0E,eAAeoB,GAAK,YAAc,KAAK,SAAW,KAAK,CAAC3F,EAAG,UAAU,CAACE,MAAM,CAAC,KAAQ,WAAayF,EAAI,gBAAiB,YAAc9F,EAAID,MAAM,kCAAkC,SAAW,IAAImF,MAAM,CAAC7F,MAAOW,EAAIhB,KAAKqE,QAAQyC,GAAa,WAAEX,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAKqE,QAAQyC,GAAI,aAAcV,IAAMpE,WAAW,gCAAgChB,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,KAAQ,WAAayF,EAAI,eAAgB,YAAc9F,EAAID,MAAM,iCAAiC,SAAW,IAAImF,MAAM,CAAC7F,MAAOW,EAAIhB,KAAKqE,QAAQyC,GAAY,UAAEX,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAKqE,QAAQyC,GAAI,YAAaV,IAAMpE,WAAW,+BAA+BhB,EAAIQ,GAAG,KAAKL,EAAG,IAAI,CAACG,YAAY,WAAW,CAACH,EAAG,SAAS,CAACG,YAAY,+BAA+BD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQ,SAASkE,GAAQ,OAAO/E,EAAIyD,aAAaqC,MAAM,CAAC3F,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,eAAe,MAAM,IAAI,MAAKL,EAAIQ,GAAG,KAAKL,EAAG,SAAS,CAACG,YAAY,kCAAkCD,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQb,EAAIoD,YAAY,CAACpD,EAAIQ,GAAG,eAAeR,EAAIS,GAAGT,EAAID,MAAM,mCAAmC,iBAAiB,GAAGC,EAAIU,KAAKV,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAID,MAAM,4BAA4B,KAAOC,EAAIhB,KAAKc,OAAOyE,IAAI,QAAU,YAAc,KAAK,QAAUvE,EAAIhB,KAAKc,OAAOyE,IAAI,QAAUvE,EAAIhB,KAAKc,OAAO2E,MAAM,QAAU,OAAO,CAACtE,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,OAAO,SAAW,IAAI6E,MAAM,CAAC7F,MAAOW,EAAIhB,KAAS,KAAEmG,SAAS,SAAUC,GAAMpF,EAAIqF,KAAKrF,EAAIhB,KAAM,OAAQoG,IAAMpE,WAAW,gBAAgB,GAAGhB,EAAIQ,GAAG,KAAKL,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAID,MAAM,oCAAoC,CAACI,EAAG,mCAAmC,CAACE,MAAM,CAAC,WAAaL,EAAIhB,KAAK5B,YAAYyD,GAAG,CAAC,SAAWb,EAAIkE,yBAAyB,QAAUlE,EAAIqE,4BAA4B,IAAI,KAAKrE,EAAIQ,GAAG,KAAKL,EAAG,MAAMH,EAAIQ,GAAG,KAAKL,EAAG,SAAS,CAACG,YAAY,oBAAoBD,MAAM,CAAC,KAAO,WAAW,CAACL,EAAIQ,GAAGR,EAAIS,GAAGT,EAAID,MAAM,oBAAoBC,EAAIQ,GAAG,KAAKL,EAAG,IAAI,CAACG,YAAY,SAASD,MAAM,CAAC,KAAOL,EAAI+F,YAAY,CAAC/F,EAAIQ,GAAGR,EAAIS,GAAGT,EAAID,MAAM,0BAC1nU,IOUpB,EACA,KACA,KACA,MAIa,Y,0zBCZA,KACb7C,KAAM,yBAENC,MAAO,CACLyH,OAAQ,CACN/E,KAAMmG,OACNC,UAAU,GAGZpB,OAAQ,CACNhF,KAAMmG,OACN1E,QAAS,QAGX4E,YAAaF,OACbD,UAAWC,OAEXG,WAAYpI,QACZqI,oBAAqBrI,QACrBsI,qBAAsB,CACpBxG,KAAMmG,OADc,mBAGlB,OAAOxI,KAAKuC,MAAM,6BAGtBuG,gBAAiBvI,QACjBwI,oBAAqBxI,QACrByI,gBAAiBzI,QACjB0I,uBAAwB,CACtB5G,KAAMmG,OADgB,mBAGpB,OAAOxI,KAAKuC,MAAM,wDAKxBzC,KApCa,WAqCX,MAAO,CACL0B,KAAMxB,KAAKkJ,UACXC,gBAAiB,GACjBC,wBAAwB,EACxBC,2BAA2B,EAC3BC,kBAAkB,EAClBC,kBAAkB,EAClBjC,OAAQkC,OAAOC,IAAInC,SAIvBoC,QAhDa,WAiDXC,SAASC,iBAAiB,QAAS5J,KAAK6J,sBAG1CC,cApDa,WAqDXH,SAASI,oBAAoB,QAAS/J,KAAK6J,sBAG7CrJ,QAAS,CAOP0I,QAPO,WAOY,IAAXpJ,EAAW,uDAAJ,GACb,OAAO,IAAIkK,IAAKlK,EAAM,CACpBmE,gBAAgB,KASpB4F,oBAlBO,SAkBaI,GAClB,IAAMC,EAAQ,MAAQD,EAAEE,OAASF,EAAEG,SAE/BH,EAAEI,SAAWJ,EAAEK,UAAYJ,EAC7BlK,KAAK2I,YAAc3I,KAAKuK,wBACfN,EAAEI,SAAWH,GACtBlK,KAAKyH,sBAST+C,cAjCO,SAiCOC,GAAW,WACvB,IAAIzK,KAAKsJ,iBAAT,CAEAtJ,KAAKsJ,kBAAmB,EAExB,IAAMoB,EAAU,CACdvI,QAASnC,KAAK6I,qBACd8B,YAAa3K,KAAKuC,MAAM,gBACxBqI,WAAY5K,KAAKuC,MAAM,kBACvBkI,YACAI,SAAU,WAAQ,EAAKvB,kBAAmB,IAG5C,OAAKtJ,KAAK8I,gBAIH9I,KAAK8K,gBAAgBJ,GAHnB1K,KAAK+B,OAAOgJ,OAAOC,QAAQN,KAYtCI,gBA3DO,SA2DSJ,GAAS,WACjBK,EAAS/K,KAAK+B,OAAOgJ,OAAOE,OAAnB,OACVP,GADU,IAEbQ,WAAY,CACRC,YAAanL,KAAKuC,MAAM,UACxBkG,UAAU,EACV2C,UAAW,QAmBjB,OAdAL,EAAOM,WAAU,WACfN,EAAOjK,MAAMC,MAAM6I,iBAAiB,WAAW,SAACK,GAC9CA,EAAEqB,OAAOC,kBAAkB,IAEtBtB,EAAEqB,OAAOE,SAASC,OACrBxB,EAAEqB,OAAOC,kBAAkB,EAAKhJ,MAAM,6DAI1CwI,EAAOjK,MAAMC,MAAM6I,iBAAiB,SAAS,SAACK,GAC5Cc,EAAOW,kBAAoB,WAIxBX,GAMTY,gBA1FO,WA2FL3L,KAAK+B,OAAOC,MAAMC,KAAK,CACrBE,QAASnC,KAAKiJ,uBACd5G,KAAM,aAOVuJ,2BApGO,WAoGsB,WAC3B5L,KAAK2L,kBAELE,YAAW,WACL,EAAKnD,cACPc,OAAOsC,SAASC,KAAO,EAAKrD,eAE7B,MAMLjB,mBAjHO,WAkHL,IAAIzH,KAAKwB,KAAKwK,WAEd,OAAIhM,KAAKgJ,kBAAoBhJ,KAAKiM,UAAkBjM,KAAK4L,6BAErD5L,KAAK4I,oBAA4B5I,KAAKwK,cAAcxK,KAAKkM,gCAE7DlM,KAAKkM,6BAMPA,0BA9HO,WA8HkC,IAAfC,EAAe,uDAAN,KACjCnM,KAAKoJ,wBAAyB,EAC9BpJ,KAAKsJ,kBAAmB,EAEpBtJ,KAAK8I,kBACP9I,KAAKwB,KAAK2K,OAASA,GAGrBnM,KAAKwB,KAAKxB,KAAKqH,OAAO+E,eAAepM,KAAKoH,QACrCiF,KAAKrM,KAAKsM,gCADf,MAEWtM,KAAKuM,iBAMlBD,+BA9IO,WA8I0B,WAC/BtM,KAAKwB,KAAKwK,YAAa,EAEvBhM,KAAK+B,OAAOC,MAAMC,KAAK,CACrBE,QAASnC,KAAKuC,MAAM,sBACpBF,KAAM,eAKRwJ,YAAW,WACT,EAAKrK,KAAKwK,YAAa,EACvB,EAAK5C,wBAAyB,EAE9B,EAAKoD,8BAED,EAAK9D,cACPc,OAAOsC,SAASC,KAAO,EAAKrD,eAE7B,MAML8D,4BAvKO,aA4KPjC,sBA5KO,WA6KL,IAAIvK,KAAKwB,KAAKwK,WAEd,OAAIhM,KAAKgJ,kBAAqBhJ,KAAKiM,UAAkBjM,KAAK2L,kBAEtD3L,KAAK4I,oBAA4B5I,KAAKwK,cAAcxK,KAAKyM,mCAE7DzM,KAAKyM,gCAMPA,6BAzLO,WAyLqC,IAAfN,EAAe,uDAAN,KACpCnM,KAAKqJ,2BAA4B,EACjCrJ,KAAKsJ,kBAAmB,EAEpBtJ,KAAK8I,kBACP9I,KAAKwB,KAAK2K,OAASA,GAGrBnM,KAAKwB,KAAKxB,KAAKqH,OAAO+E,eAAepM,KAAKoH,QACrCiF,KAAKrM,KAAK0M,mCADf,MAEW1M,KAAKuM,iBAMlBG,kCAzMO,WA0ML1M,KAAKqJ,2BAA4B,EAEjCrJ,KAAK+B,OAAOC,MAAMC,KAAK,CACrBE,QAASnC,KAAKuC,MAAM,sBACpBF,KAAM,eAIR,IAAMsK,EAAOC,IAAM5M,KAAKwB,KAAK1B,OAAQE,KAAKmJ,iBAC1CnJ,KAAKwB,KAAKqL,QACV7M,KAAKwB,KAAKsL,SAASH,GAEnB3M,KAAK+M,kCAMPA,+BA5NO,aAmOPR,eAnOO,SAmOQnM,GACbJ,KAAKoJ,wBAAyB,EAC9BpJ,KAAKqJ,2BAA4B,EAEjCrJ,KAAK+B,OAAOC,MAAMC,KAAK,CACrBC,SAAU,KACVC,QAAS6K,IAAK5M,EAAO,wBAAyBA,EAAM+B,SACpDE,KAAM,eASV4J,QAnPO,WAoPL,OAASgB,IAASjN,KAAKwB,KAAK1B,OAAQE,KAAKwB,KAAK0L,UAMhDC,cA1PO,WA0PS,WACVnN,KAAKuJ,mBAETvJ,KAAKuJ,kBAAmB,EAExBvJ,KAAK+B,OAAOgJ,OAAOC,QAAQ,CACzB7I,QAASnC,KAAKuC,MAAM,qDACpBkI,UAAW,WACT,EAAKlB,kBAAmB,EACxBC,OAAOsC,SAASC,KAAO,EAAKxD,WAE9BsC,SAAU,WAAQ,EAAKtB,kBAAmB,GAC1CqB,WAAY5K,KAAKuC,MAAM,wBACvBoI,YAAa3K,KAAKuC,MAAM,0BAS5BsI,SAhRO,SAgREuC,GACHpN,KAAK+I,qBAAuB/I,KAAKiM,YACnCmB,EAAM5F,iBAENxH,KAAKmN","file":"js/32.js?id=f345de25170b9f1f3f27","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"publication-form\",attrs:{\"action\":_vm.action,\"method\":_vm.method,\"lang\":_vm.locale},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.type'),\"label-for\":\"type\",\"type\":_vm.form.errors.has('type') ? 'is-danger' : null,\"message\":_vm.form.errors.has('type') ? _vm.form.errors.first('type') : null}},[_c('b-select',{attrs:{\"id\":\"type\",\"name\":\"type\",\"expanded\":\"\"},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.publicationTypes),function(publicationType){return _c('option',{key:publicationType.value,domProps:{\"value\":publicationType.value}},[_vm._v(\"\\n            \"+_vm._s(publicationType.label)+\"\\n          \")])}),0)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.year'),\"label-for\":\"year\",\"type\":_vm.form.errors.has('year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('year') ? _vm.form.errors.first('year') : null}},[_c('b-input',{attrs:{\"id\":\"year\",\"name\":\"year\",\"type\":\"number\",\"expanded\":\"\"},model:{value:(_vm.form.year),callback:function ($$v) {_vm.$set(_vm.form, \"year\", $$v)},expression:\"form.year\"}})],1),_vm._v(\" \"),(_vm.typeHasName)?_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.nameLabel,\"label-for\":\"name\",\"type\":_vm.form.errors.has('name') ? 'is-danger' : null,\"message\":_vm.form.errors.has('name') ? _vm.form.errors.first('name') : null}},[_c('b-input',{attrs:{\"id\":\"name\",\"name\":\"name\",\"expanded\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.titleLabel,\"label-for\":\"title\",\"type\":_vm.form.errors.has('title') ? 'is-danger' : null,\"message\":_vm.form.errors.has('title') ? _vm.form.errors.first('title') : null}},[_c('b-input',{attrs:{\"id\":\"title\",\"name\":\"title\",\"expanded\":\"\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),(_vm.typeHasPublisher)?_c('b-field',{class:{'is-required': _vm.typeRequiresPublisher},attrs:{\"label\":_vm.trans('labels.publications.publisher'),\"label-for\":\"publisher\",\"type\":_vm.form.errors.has('publisher') ? 'is-danger' : null,\"message\":_vm.form.errors.has('publisher') ? _vm.form.errors.first('publisher') : null}},[_c('b-input',{attrs:{\"id\":\"publisher\",\"name\":\"publisher\",\"expanded\":\"\"},model:{value:(_vm.form.publisher),callback:function ($$v) {_vm.$set(_vm.form, \"publisher\", $$v)},expression:\"form.publisher\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.typeHasIssue)?_c('b-field',{class:{'is-required': _vm.typeRequiresIssue},attrs:{\"label\":_vm.trans('labels.publications.issue'),\"label-for\":\"issue\",\"type\":_vm.form.errors.has('issue') ? 'is-danger' : null,\"message\":_vm.form.errors.has('issue') ? _vm.form.errors.first('issue') : null}},[_c('b-input',{attrs:{\"id\":\"issue\",\"name\":\"issue\",\"expanded\":\"\"},model:{value:(_vm.form.issue),callback:function ($$v) {_vm.$set(_vm.form, \"issue\", $$v)},expression:\"form.issue\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.typeHasPlace)?_c('b-field',{class:{'is-required': _vm.typeRequiresPlace},attrs:{\"label\":_vm.trans('labels.publications.place'),\"label-for\":\"place\",\"type\":_vm.form.errors.has('place') ? 'is-danger' : null,\"message\":_vm.form.errors.has('place') ? _vm.form.errors.first('place') : null}},[_c('b-input',{attrs:{\"id\":\"place\",\"name\":\"place\",\"expanded\":\"\"},model:{value:(_vm.form.place),callback:function ($$v) {_vm.$set(_vm.form, \"place\", $$v)},expression:\"form.place\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.page_count'),\"label-for\":\"page_count\",\"type\":_vm.form.errors.has('page_count') ? 'is-danger' : null,\"message\":_vm.form.errors.has('page_count') ? _vm.form.errors.first('page_count') : null}},[_c('b-input',{attrs:{\"id\":\"page_count\",\"name\":\"page_count\",\"expanded\":\"\"},model:{value:(_vm.form.page_count),callback:function ($$v) {_vm.$set(_vm.form, \"page_count\", $$v)},expression:\"form.page_count\"}})],1),_vm._v(\" \"),(_vm.typeHasPageRange)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.page_range'),\"label-for\":\"page_range\",\"type\":_vm.form.errors.has('page_range') ? 'is-danger' : null,\"message\":_vm.form.errors.has('page_range') ? _vm.form.errors.first('page_range') : null}},[_c('b-input',{attrs:{\"id\":\"page_range\",\"name\":\"page_range\",\"expanded\":\"\"},model:{value:(_vm.form.page_range),callback:function ($$v) {_vm.$set(_vm.form, \"page_range\", $$v)},expression:\"form.page_range\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.doi'),\"label-for\":\"doi\",\"type\":_vm.form.errors.has('doi') ? 'is-danger' : null,\"message\":_vm.form.errors.has('doi') ? _vm.form.errors.first('doi') : null}},[_c('b-input',{attrs:{\"id\":\"doi\",\"name\":\"doi\",\"expanded\":\"\"},model:{value:(_vm.form.doi),callback:function ($$v) {_vm.$set(_vm.form, \"doi\", $$v)},expression:\"form.doi\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label-for\":\"citation\",\"type\":_vm.form.errors.has('citation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('citation') ? _vm.form.errors.first('citation') : null}},[_c('label',{staticClass:\"label\",attrs:{\"slot\":\"label\",\"for\":\"citation\"},slot:\"label\"},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.publications.citation_tooltip')}),expression:\"{content: trans('labels.publications.citation_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n            \"+_vm._s(_vm.trans('labels.publications.citation'))+\"\\n          \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"citation\",\"type\":\"textarea\",\"name\":\"citation\",\"expanded\":\"\"},model:{value:(_vm.form.citation),callback:function ($$v) {_vm.$set(_vm.form, \"citation\", $$v)},expression:\"form.citation\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.authors'),\"type\":_vm.form.errors.has('authors') ? 'is-danger' : null,\"message\":_vm.form.errors.has('authors') ? _vm.form.errors.first('authors') : null,\"addons\":false}},[_vm._l((_vm.form.authors),function(_,i){return _c('b-field',{key:i,attrs:{\"type\":_vm.authorHasError(i) ? 'is-danger' : null,\"message\":_vm.authorHasError(i) ? _vm.getAuthorError(i) : null,\"expanded\":\"\",\"addons\":false}},[_c('b-field',{attrs:{\"type\":_vm.authorHasError(i) ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-input',{attrs:{\"name\":(\"authors[\" + i + \"][first_name]\"),\"placeholder\":_vm.trans('labels.publications.first_name'),\"expanded\":\"\"},model:{value:(_vm.form.authors[i].first_name),callback:function ($$v) {_vm.$set(_vm.form.authors[i], \"first_name\", $$v)},expression:\"form.authors[i].first_name\"}}),_vm._v(\" \"),_c('b-input',{attrs:{\"name\":(\"authors[\" + i + \"][last_name]\"),\"placeholder\":_vm.trans('labels.publications.last_name'),\"expanded\":\"\"},model:{value:(_vm.form.authors[i].last_name),callback:function ($$v) {_vm.$set(_vm.form.authors[i], \"last_name\", $$v)},expression:\"form.authors[i].last_name\"}}),_vm._v(\" \"),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeAuthor(i)}}},[_c('b-icon',{attrs:{\"icon\":\"times\",\"size\":\"is-small\"}})],1)])],1)],1)}),_vm._v(\" \"),_c('button',{staticClass:\"button is-secondary is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addAuthor}},[_vm._v(\"\\n          \"+_vm._s(_vm.trans('labels.publications.add_author'))+\"\\n        \")])],2),_vm._v(\" \"),(_vm.typeHasEditors)?_c('b-field',{class:{'is-required': _vm.typeRequiresEditors},attrs:{\"label\":_vm.trans('labels.publications.editors'),\"type\":_vm.form.errors.has('editors') ? 'is-danger' : null,\"message\":_vm.form.errors.has('editors') ? _vm.form.errors.first('editors') : null,\"addons\":false}},[_vm._l((_vm.form.editors),function(_,i){return _c('b-field',{key:i,attrs:{\"type\":_vm.editorHasError(i) ? 'is-danger' : null,\"message\":_vm.editorHasError(i) ? _vm.getEditorError(i) : null,\"expanded\":\"\",\"addons\":false}},[_c('b-field',{attrs:{\"type\":_vm.editorHasError(i) ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-input',{attrs:{\"name\":(\"editors[\" + i + \"][first_name]\"),\"placeholder\":_vm.trans('labels.publications.first_name'),\"expanded\":\"\"},model:{value:(_vm.form.editors[i].first_name),callback:function ($$v) {_vm.$set(_vm.form.editors[i], \"first_name\", $$v)},expression:\"form.editors[i].first_name\"}}),_vm._v(\" \"),_c('b-input',{attrs:{\"name\":(\"editors[\" + i + \"][last_name]\"),\"placeholder\":_vm.trans('labels.publications.last_name'),\"expanded\":\"\"},model:{value:(_vm.form.editors[i].last_name),callback:function ($$v) {_vm.$set(_vm.form.editors[i], \"last_name\", $$v)},expression:\"form.editors[i].last_name\"}}),_vm._v(\" \"),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeEditor(i)}}},[_c('b-icon',{attrs:{\"icon\":\"times\",\"size\":\"is-small\"}})],1)])],1)],1)}),_vm._v(\" \"),_c('button',{staticClass:\"button is-secondary is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addEditor}},[_vm._v(\"\\n          \"+_vm._s(_vm.trans('labels.publications.add_editor'))+\"\\n        \")])],2):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.link'),\"type\":_vm.form.errors.has('link') ? 'is-danger' : null,\"message\":_vm.form.errors.has(\"link\") ? _vm.form.errors.first(\"link\") : null}},[_c('b-input',{attrs:{\"name\":\"link\",\"expanded\":\"\"},model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.attachment')}},[_c('nz-publication-attachment-upload',{attrs:{\"attachment\":_vm.form.attachment},on:{\"uploaded\":_vm.handleAttachmentUploaded,\"removed\":_vm.handleRemovedAttachment}})],1)],1)]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.trans('buttons.save')))]),_vm._v(\" \"),_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.cancelUrl}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :message=\"error || null\" :type=\"error ? 'is-danger' : null\" expanded>\r\n    <b-field class=\"file\">\r\n      <progress class=\"progress is-primary is-small\" :value=\"progress\" max=\"100\" v-if=\"uploading\">{{ progress }}%</progress>\r\n\r\n      <b-upload @input=\"onInput\" accept=\".pdf,.odt,.doc,.docx\" v-show=\"!uploading\" v-if=\"!hasAttachment\" ref=\"upload\">\r\n        <button type=\"button\" @click=\"openUpload\" class=\"button is-secondary\">\r\n          <b-icon icon=\"upload\"></b-icon>\r\n          <span>Upload Document</span>\r\n        </button>\r\n      </b-upload>\r\n      <div class=\"flex items-center justify-between w-full\" v-else>\r\n        <div class=\"mr-4\">\r\n          <a :href=\"newAttachment.url\" :download=\"newAttachment.original_name\" target=\"_blank\">{{ newAttachment.original_name }}</a>\r\n        </div>\r\n        <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"remove\">\r\n          <b-icon icon=\"times\" />\r\n        </button>\r\n      </div>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'nzPublicationAttachmentUpload',\r\n\r\n  props: {\r\n    attachment: Object\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      newAttachment: this.attachment,\r\n      reader: null,\r\n      uploading: false,\r\n      progress: 0,\r\n      error: null,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    hasAttachment() {\r\n      return Boolean(this.newAttachment)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    onInput(file) {\r\n      this.error = null\r\n\r\n      if (!file) {\r\n        this.remove()\r\n      } else {\r\n        this.upload(file)\r\n      }\r\n    },\r\n\r\n    openUpload() {\r\n      this.$refs.upload.$refs.input.click()\r\n    },\r\n\r\n    upload(file) {\r\n      this.uploading = true\r\n      return axios.post(route('api.publication-attachments.store'), this.makeForm(file), {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          Accept: 'application/json'\r\n        },\r\n        onUploadProgress: progressEvent => {\r\n           this.progress = Math.floor((progressEvent.loaded * 100) / progressEvent.total)\r\n        }\r\n      }).then(response => {\r\n        const attachment = response.data.data\r\n        this.newAttachment = attachment\r\n\r\n        this.uploading = false\r\n        this.progress = 0\r\n\r\n        this.$emit('uploaded', attachment)\r\n      }).catch(this.handleError)\r\n    },\r\n\r\n    makeForm(file) {\r\n      let form = new FormData()\r\n\r\n      form.append('attachment', file)\r\n\r\n      return form\r\n    },\r\n\r\n    async remove() {\r\n      if (!this.hasAttachment) return\r\n\r\n      this.$emit('removed', this.newAttachment)\r\n\r\n      this.newAttachment = null\r\n    },\r\n\r\n    handleError(error) {\r\n      this.uploading = false\r\n      this.progress = 0\r\n\r\n      // Clear the input so we can select the same file if needed.\r\n      this.$el.querySelector('input[type=\"file\"]').value = ''\r\n\r\n      if (!error.response) {\r\n        return this.$buefy.toast.open({\r\n          duration: 5000,\r\n          message: error.message,\r\n          position: 'is-top',\r\n          type: 'is-danger'\r\n        })\r\n      }\r\n\r\n      this.error = error.response.data.errors.attachment[0] || this.trans('Error')\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationAttachmentUpload.vue?vue&type=template&id=25972744&\"\nimport script from \"./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{\"message\":_vm.error || null,\"type\":_vm.error ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-field',{staticClass:\"file\"},[(_vm.uploading)?_c('progress',{staticClass:\"progress is-primary is-small\",attrs:{\"max\":\"100\"},domProps:{\"value\":_vm.progress}},[_vm._v(_vm._s(_vm.progress)+\"%\")]):_vm._e(),_vm._v(\" \"),(!_vm.hasAttachment)?_c('b-upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.uploading),expression:\"!uploading\"}],ref:\"upload\",attrs:{\"accept\":\".pdf,.odt,.doc,.docx\"},on:{\"input\":_vm.onInput}},[_c('button',{staticClass:\"button is-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openUpload}},[_c('b-icon',{attrs:{\"icon\":\"upload\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Upload Document\")])],1)]):_c('div',{staticClass:\"flex items-center justify-between w-full\"},[_c('div',{staticClass:\"mr-4\"},[_c('a',{attrs:{\"href\":_vm.newAttachment.url,\"download\":_vm.newAttachment.original_name,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.newAttachment.original_name))])]),_vm._v(\" \"),_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.remove}},[_c('b-icon',{attrs:{\"icon\":\"times\"}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <form :action=\"action\" :method=\"method\" :lang=\"locale\" class=\"publication-form\" @submit.prevent=\"submitWithRedirect\">\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <b-field\r\n          :label=\"trans('labels.publications.type')\"\r\n          label-for=\"type\"\r\n          :type=\"form.errors.has('type') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('type') ? form.errors.first('type') : null\"\r\n          class=\"is-required\"\r\n        >\r\n          <b-select id=\"type\" name=\"type\" v-model=\"form.type\" expanded>\r\n            <option\r\n              v-for=\"publicationType in publicationTypes\"\r\n              :value=\"publicationType.value\"\r\n              :key=\"publicationType.value\"\r\n            >\r\n              {{ publicationType.label }}\r\n            </option>\r\n          </b-select>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.publications.year')\"\r\n          label-for=\"year\"\r\n          :type=\"form.errors.has('year') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('year') ? form.errors.first('year') : null\"\r\n          class=\"is-required\"\r\n        >\r\n          <b-input id=\"year\" name=\"year\" v-model=\"form.year\" type=\"number\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasName\"\r\n          :label=\"nameLabel\"\r\n          label-for=\"name\"\r\n          :type=\"form.errors.has('name') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('name') ? form.errors.first('name') : null\"\r\n          class=\"is-required\"\r\n        >\r\n          <b-input id=\"name\" name=\"name\" v-model=\"form.name\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"titleLabel\"\r\n          label-for=\"title\"\r\n          :type=\"form.errors.has('title') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('title') ? form.errors.first('title') : null\"\r\n          class=\"is-required\"\r\n        >\r\n          <b-input id=\"title\" name=\"title\" v-model=\"form.title\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasPublisher\"\r\n          :label=\"trans('labels.publications.publisher')\"\r\n          label-for=\"publisher\"\r\n          :class=\"{'is-required': typeRequiresPublisher}\"\r\n          :type=\"form.errors.has('publisher') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('publisher') ? form.errors.first('publisher') : null\"\r\n        >\r\n          <b-input id=\"publisher\" name=\"publisher\" v-model=\"form.publisher\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasIssue\"\r\n          :label=\"trans('labels.publications.issue')\"\r\n          label-for=\"issue\"\r\n          :type=\"form.errors.has('issue') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('issue') ? form.errors.first('issue') : null\"\r\n          :class=\"{'is-required': typeRequiresIssue}\"\r\n        >\r\n          <b-input id=\"issue\" name=\"issue\" v-model=\"form.issue\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasPlace\"\r\n          :label=\"trans('labels.publications.place')\"\r\n          label-for=\"place\"\r\n          :class=\"{'is-required': typeRequiresPlace}\"\r\n          :type=\"form.errors.has('place') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('place') ? form.errors.first('place') : null\"\r\n        >\r\n          <b-input id=\"place\" name=\"place\" v-model=\"form.place\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.publications.page_count')\"\r\n          label-for=\"page_count\"\r\n          :type=\"form.errors.has('page_count') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('page_count') ? form.errors.first('page_count') : null\"\r\n        >\r\n          <b-input id=\"page_count\" name=\"page_count\" v-model=\"form.page_count\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasPageRange\"\r\n          :label=\"trans('labels.publications.page_range')\"\r\n          label-for=\"page_range\"\r\n          :type=\"form.errors.has('page_range') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('page_range') ? form.errors.first('page_range') : null\"\r\n        >\r\n          <b-input id=\"page_range\" name=\"page_range\" v-model=\"form.page_range\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.publications.doi')\"\r\n          label-for=\"doi\"\r\n          :type=\"form.errors.has('doi') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('doi') ? form.errors.first('doi') : null\"\r\n        >\r\n          <b-input id=\"doi\" name=\"doi\" v-model=\"form.doi\" expanded />\r\n        </b-field>\r\n\r\n        <b-field\r\n          label-for=\"citation\"\r\n          :type=\"form.errors.has('citation') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('citation') ? form.errors.first('citation') : null\"\r\n        >\r\n          <label for=\"citation\" class=\"label\" slot=\"label\">\r\n            <span\r\n              class=\"is-dashed\"\r\n              v-tooltip=\"{content: trans('labels.publications.citation_tooltip')}\"\r\n            >\r\n              {{ trans('labels.publications.citation') }}\r\n            </span>\r\n          </label>\r\n\r\n          <b-input id=\"citation\" type=\"textarea\" name=\"citation\" v-model=\"form.citation\" expanded />\r\n        </b-field>\r\n      </div>\r\n\r\n      <div class=\"column\">\r\n        <b-field\r\n          :label=\"trans('labels.publications.authors')\"\r\n          :type=\"form.errors.has('authors') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('authors') ? form.errors.first('authors') : null\"\r\n          class=\"is-required\"\r\n          :addons=\"false\"\r\n        >\r\n          <b-field\r\n            v-for=\"(_,i) in form.authors\"\r\n            :key=\"i\"\r\n            :type=\"authorHasError(i) ? 'is-danger' : null\"\r\n            :message=\"authorHasError(i) ? getAuthorError(i) : null\"\r\n            expanded\r\n            :addons=\"false\"\r\n          >\r\n            <b-field\r\n              :type=\"authorHasError(i) ? 'is-danger' : null\"\r\n              expanded\r\n            >\r\n              <b-input\r\n                :name=\"`authors[${i}][first_name]`\"\r\n                v-model=\"form.authors[i].first_name\"\r\n                :placeholder=\"trans('labels.publications.first_name')\"\r\n                expanded\r\n              />\r\n\r\n              <b-input\r\n                :name=\"`authors[${i}][last_name]`\"\r\n                v-model=\"form.authors[i].last_name\"\r\n                :placeholder=\"trans('labels.publications.last_name')\"\r\n                expanded\r\n              />\r\n\r\n              <p class=\"control\">\r\n                <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"removeAuthor(i)\">\r\n                  <b-icon icon=\"times\" size=\"is-small\"/>\r\n                </button>\r\n              </p>\r\n\r\n            </b-field>\r\n          </b-field>\r\n\r\n          <button\r\n            type=\"button\"\r\n            class=\"button is-secondary is-outlined\"\r\n            @click=\"addAuthor\"\r\n          >\r\n            {{ trans('labels.publications.add_author') }}\r\n          </button>\r\n        </b-field>\r\n\r\n        <b-field\r\n          v-if=\"typeHasEditors\"\r\n          :class=\"{'is-required': typeRequiresEditors}\"\r\n          :label=\"trans('labels.publications.editors')\"\r\n          :type=\"form.errors.has('editors') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has('editors') ? form.errors.first('editors') : null\"\r\n          :addons=\"false\"\r\n        >\r\n          <b-field\r\n            v-for=\"(_,i) in form.editors\"\r\n            :key=\"i\"\r\n            :type=\"editorHasError(i) ? 'is-danger' : null\"\r\n            :message=\"editorHasError(i) ? getEditorError(i) : null\"\r\n            expanded\r\n            :addons=\"false\"\r\n          >\r\n            <b-field\r\n              :type=\"editorHasError(i) ? 'is-danger' : null\"\r\n              expanded\r\n            >\r\n              <b-input\r\n                :name=\"`editors[${i}][first_name]`\"\r\n                v-model=\"form.editors[i].first_name\"\r\n                :placeholder=\"trans('labels.publications.first_name')\"\r\n                expanded\r\n              />\r\n\r\n              <b-input\r\n                :name=\"`editors[${i}][last_name]`\"\r\n                v-model=\"form.editors[i].last_name\"\r\n                :placeholder=\"trans('labels.publications.last_name')\"\r\n                expanded\r\n              />\r\n\r\n              <p class=\"control\">\r\n                <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"removeEditor(i)\">\r\n                  <b-icon icon=\"times\" size=\"is-small\"/>\r\n                </button>\r\n              </p>\r\n\r\n            </b-field>\r\n          </b-field>\r\n\r\n          <button\r\n            type=\"button\"\r\n            class=\"button is-secondary is-outlined\"\r\n            @click=\"addEditor\"\r\n          >\r\n            {{ trans('labels.publications.add_editor') }}\r\n          </button>\r\n        </b-field>\r\n\r\n        <b-field\r\n          :label=\"trans('labels.publications.link')\"\r\n          :type=\"form.errors.has('link') ? 'is-danger' : null\"\r\n          :message=\"form.errors.has(`link`) ? form.errors.first(`link`) : null\"\r\n        >\r\n          <b-input name=\"link\" v-model=\"form.link\" expanded/>\r\n        </b-field>\r\n\r\n        <b-field :label=\"trans('labels.publications.attachment')\">\r\n          <nz-publication-attachment-upload\r\n            @uploaded=\"handleAttachmentUploaded\"\r\n            @removed=\"handleRemovedAttachment\"\r\n            :attachment=\"form.attachment\"\r\n          />\r\n        </b-field>\r\n      </div>\r\n    </div>\r\n\r\n    <hr>\r\n\r\n    <button type=\"submit\" class=\"button is-primary\">{{ trans('buttons.save') }}</button>\r\n\r\n    <a :href=\"cancelUrl\" class=\"button\">{{ trans('buttons.cancel') }}</a>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport Form from 'form-backend-validation'\r\nimport _find from 'lodash/find'\r\nimport FormMixin from '@/mixins/FormMixin'\r\nimport PublicationAttachmentUpload from '@/components/inputs/PublicationAttachmentUpload'\r\n\r\nexport default {\r\n  name: 'nzPublicationForm',\r\n\r\n  components: {\r\n    [PublicationAttachmentUpload.name]: PublicationAttachmentUpload\r\n  },\r\n\r\n  mixins: [FormMixin],\r\n\r\n  props: {\r\n    publication: {\r\n      type: Object,\r\n      default: () => ({\r\n        type: null,\r\n        year: null,\r\n        name: null,\r\n        title: null,\r\n        publisher: null,\r\n        issue: null,\r\n        place: null,\r\n        page_count: null,\r\n        page_range: null,\r\n        doi: null,\r\n        citation: null,\r\n        authors: [],\r\n        editors: [],\r\n        link: null,\r\n        attachment: null,\r\n        attachment_id: null\r\n      })\r\n    },\r\n\r\n    publicationTypes: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: new Form({\r\n        ...this.publication\r\n      }, {\r\n        resetOnSuccess: false\r\n      })\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    chosenType() {\r\n      return _find(this.publicationTypes, { value: this.form.type })\r\n    },\r\n\r\n    typeHasName() {\r\n      return this.chosenType ? this.chosenType.has_name : false\r\n    },\r\n\r\n    typeHasEditors() {\r\n      return this.chosenType ? this.chosenType.has_editors : false\r\n    },\r\n\r\n    typeRequiresEditors() {\r\n      return this.chosenType ? this.chosenType.requires_editors : false\r\n    },\r\n\r\n    typeHasPublisher() {\r\n      return this.chosenType ? this.chosenType.has_publisher : false\r\n    },\r\n\r\n    typeRequiresPublisher() {\r\n      return this.chosenType ? this.chosenType.requires_publisher : false\r\n    },\r\n\r\n    typeHasIssue() {\r\n      return this.chosenType ? this.chosenType.has_issue : false\r\n    },\r\n\r\n    typeRequiresIssue() {\r\n      return this.chosenType ? this.chosenType.requires_issue : false\r\n    },\r\n\r\n    typeHasPlace() {\r\n      return this.chosenType ? this.chosenType.has_place : false\r\n    },\r\n\r\n    typeRequiresPlace() {\r\n      return this.chosenType ? this.chosenType.requires_place : false\r\n    },\r\n\r\n    typeHasPageRange() {\r\n      return this.chosenType ? this.chosenType.has_page_range : false\r\n    },\r\n\r\n    nameLabel() {\r\n      const type = this.form.type\r\n\r\n      return this.trans(`labels.publications.${type}_name`, {}, this.trans('labels.publications.name'))\r\n    },\r\n\r\n    titleLabel() {\r\n      const type = this.form.type\r\n\r\n      return this.trans(`labels.publications.${type}_title`, {}, this.trans('labels.publications.title'))\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    addAuthor() {\r\n      this.form.authors.push({ first_name: '', last_name: '' })\r\n    },\r\n\r\n    addEditor() {\r\n      this.form.editors.push({ first_name: '', last_name: '' })\r\n    },\r\n\r\n    removeAuthor(index) {\r\n      this.removeItemFromField('authors', index)\r\n    },\r\n\r\n    removeEditor(index) {\r\n      this.removeItemFromField('editors', index)\r\n    },\r\n\r\n    removeItemFromField(field, index) {\r\n      this.form[field] = [\r\n        ...this.form[field].slice(0, index),\r\n        ...this.form[field].slice(index + 1)\r\n      ]\r\n\r\n      // We don't want to show that error after removing the erroneous field.\r\n      this.removeErrorForItem(field, index)\r\n    },\r\n\r\n    removeErrorForItem(field, index) {\r\n      // One problem may occur if we delete the previous field and are left\r\n      // with error showing for noncorresponding field. We need to shift\r\n      // the key of all later errors so they match the correct field.\r\n      const errors = this.form.errors.all()\r\n      const newErrors = {}\r\n\r\n      Object.keys(errors).forEach(errorField => {\r\n        const match = errorField.match(new RegExp(`^${field}.\\(\\\\d+\\)$`))\r\n\r\n        if (match && match[1] > index) {\r\n          newErrors[`${field}.${match[1] - 1}`] = errors[errorField]\r\n        } else if (!match) {\r\n          newErrors[errorField] = errors[errorField]\r\n        }\r\n      })\r\n\r\n      this.form.errors.record(newErrors)\r\n    },\r\n\r\n    handleAttachmentUploaded(attachment) {\r\n      this.form.attachment = attachment\r\n      this.form.attachment_id = attachment.id\r\n    },\r\n\r\n    handleRemovedAttachment() {\r\n      this.form.attachment = null\r\n      this.form.attachment_id = null\r\n    },\r\n\r\n    authorHasError(index) {\r\n      return this.form.errors.has(`authors.${index}`) ||\r\n        this.form.errors.has(`authors.${index}.first_name`) ||\r\n        this.form.errors.has(`authors.${index}.last_name`)\r\n    },\r\n\r\n    getAuthorError(index) {\r\n      return this.form.errors.first(`authors.${index}`) ||\r\n        this.form.errors.first(`authors.${index}.first_name`) ||\r\n        this.form.errors.first(`authors.${index}.last_name`)\r\n    },\r\n\r\n    editorHasError(index) {\r\n      return this.form.errors.has(`editors.${index}`) ||\r\n        this.form.errors.has(`editors.${index}.first_name`) ||\r\n        this.form.errors.has(`editors.${index}.last_name`)\r\n    },\r\n\r\n    getEditorError(index) {\r\n      return this.form.errors.first(`editors.${index}`) ||\r\n        this.form.errors.first(`editors.${index}.first_name`) ||\r\n        this.form.errors.first(`editors.${index}.last_name`)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationForm.vue?vue&type=template&id=88d8b0ca&\"\nimport script from \"./PublicationForm.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Form from 'form-backend-validation'\r\nimport _pick from 'lodash/pick'\r\nimport _get from 'lodash/get'\r\nimport _isEqual from 'lodash/isEqual'\r\n\r\n\r\nexport default {\r\n  name: 'nzFieldObservationForm',\r\n\r\n  props: {\r\n    action: {\r\n      type: String,\r\n      required: true\r\n    },\r\n\r\n    method: {\r\n      type: String,\r\n      default: 'POST'\r\n    },\r\n\r\n    redirectUrl: String,\r\n    cancelUrl: String,\r\n\r\n    submitMore: Boolean,\r\n    shouldConfirmSubmit: Boolean,\r\n    confirmSubmitMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('You are about to submit')\r\n      }\r\n    },\r\n    shouldAskReason: Boolean,\r\n    shouldConfirmCancel: Boolean,\r\n    submitOnlyDirty: Boolean,\r\n    submitOnlyDirtyMessage: {\r\n      type: String,\r\n      default() {\r\n        return this.trans('There are no changes, the data will not be saved.')\r\n      }\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      form: this.newForm(),\r\n      keepAfterSubmit: [],\r\n      submittingWithRedirect: false,\r\n      submittingWithoutRedirect: false,\r\n      confirmingSubmit: false,\r\n      confirmingCancel: false,\r\n      locale: window.App.locale\r\n    }\r\n  },\r\n\r\n  created() {\r\n    document.addEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  beforeDestroy() {\r\n    document.removeEventListener('keyup', this.registerKeyListener)\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * Create new form instance.\r\n     *\r\n     * @param  {Object} data default form data\r\n     * @return {Form}\r\n     */\r\n    newForm(data = {}) {\r\n      return new Form(data, {\r\n        resetOnSuccess: false\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Keyboard shortcuts.\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    registerKeyListener(e) {\r\n      const enter = 13 === (e.which || e.keyCode)\r\n\r\n      if (e.ctrlKey && e.shiftKey && enter) {\r\n        this.submitMore && this.submitWithoutRedirect()\r\n      } else if (e.ctrlKey && enter) {\r\n        this.submitWithRedirect()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Confirm submit.\r\n     *\r\n     * @param {Function} onConfirm\r\n     */\r\n    confirmSubmit(onConfirm) {\r\n      if (this.confirmingSubmit) return\r\n\r\n      this.confirmingSubmit = true\r\n\r\n      const options = {\r\n        message: this.confirmSubmitMessage,\r\n        confirmText: this.trans('buttons.save'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        onConfirm,\r\n        onCancel: () => { this.confirmingSubmit = false }\r\n      }\r\n\r\n      if (!this.shouldAskReason) {\r\n        return this.$buefy.dialog.confirm(options)\r\n      }\r\n\r\n      return this.promptForReason(options)\r\n    },\r\n\r\n    /**\r\n     * Prompt the user for reason of change.\r\n     *\r\n     * @param  {Object} options\r\n     * @return {Vue}\r\n     */\r\n    promptForReason(options) {\r\n      const dialog = this.$buefy.dialog.prompt({\r\n        ...options,\r\n        inputAttrs: {\r\n            placeholder: this.trans('Reason'),\r\n            required: true,\r\n            maxlength: 255\r\n        }\r\n      })\r\n\r\n      // Custom localized validation for the prompt input.\r\n      dialog.$nextTick(() => {\r\n        dialog.$refs.input.addEventListener('invalid', (e) => {\r\n          e.target.setCustomValidity('')\r\n\r\n          if (!e.target.validity.valid) {\r\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\r\n          }\r\n        })\r\n\r\n        dialog.$refs.input.addEventListener('input', (e) => {\r\n          dialog.validationMessage = null\r\n        })\r\n      })\r\n\r\n      return dialog\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes.\r\n     */\r\n    notifyNoChanges() {\r\n      this.$buefy.toast.open({\r\n        message: this.submitOnlyDirtyMessage,\r\n        type: 'is-info'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Notify the user there are no changes and redirect.\r\n     */\r\n    notifyNoChangesAndRedirect() {\r\n      this.notifyNoChanges()\r\n\r\n      setTimeout(() => {\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    submitWithRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\r\n\r\n      this.performSubmitWithRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form with redirect.\r\n     */\r\n    performSubmitWithRedirect(reason = null) {\r\n      this.submittingWithRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with redirect.\r\n     */\r\n    onSuccessfulSubmitWithRedirect() {\r\n      this.form.processing = true\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // We want to wait a bit before we send the user to redirect route\r\n      // so we can show the message that the action was successful.\r\n      setTimeout(() => {\r\n        this.form.processing = false\r\n        this.submittingWithRedirect = false\r\n\r\n        this.hookAfterSubmitWithRedirect()\r\n\r\n        if (this.redirectUrl) {\r\n          window.location.href = this.redirectUrl\r\n        }\r\n      }, 500)\r\n    },\r\n\r\n    /**\r\n     * Perform after submit with redirect is successful.\r\n     */\r\n    hookAfterSubmitWithRedirect() {},\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    submitWithoutRedirect() {\r\n      if (this.form.processing) return\r\n\r\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\r\n\r\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\r\n\r\n      this.performSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Submit the form and stay to add more.\r\n     */\r\n    performSubmitWithoutRedirect(reason = null) {\r\n      this.submittingWithoutRedirect = true\r\n      this.confirmingSubmit = false\r\n\r\n      if (this.shouldAskReason) {\r\n        this.form.reason = reason\r\n      }\r\n\r\n      this.form[this.method.toLowerCase()](this.action)\r\n          .then(this.onSuccessfulSubmitWithoutRedirect)\r\n          .catch(this.onFailedSubmit)\r\n    },\r\n\r\n    /**\r\n     * Handle successful form submit with no redirect.\r\n     */\r\n    onSuccessfulSubmitWithoutRedirect() {\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Saved successfully'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      // Reset the form but remember some data.\r\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\r\n      this.form.reset()\r\n      this.form.populate(keep)\r\n\r\n      this.hookAfterSubmitWithoutRedirect()\r\n    },\r\n\r\n    /**\r\n     * Perform after submit without redirect is successful.\r\n     */\r\n    hookAfterSubmitWithoutRedirect() {},\r\n\r\n    /**\r\n     * Handle failed form submit.\r\n     *\r\n     * @param {Error} error\r\n     */\r\n    onFailedSubmit(error) {\r\n      this.submittingWithRedirect = false\r\n      this.submittingWithoutRedirect = false\r\n\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: _get(error, 'response.data.message', error.message),\r\n        type: 'is-danger'\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Check if form is changed.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    isDirty() {\r\n      return ! _isEqual(this.form.data(), this.form.initial)\r\n    },\r\n\r\n    /**\r\n     * Confirmation dialog for canceling.\r\n     */\r\n    confirmCancel() {\r\n      if (this.confirmingCancel) return\r\n\r\n      this.confirmingCancel = true\r\n\r\n      this.$buefy.dialog.confirm({\r\n        message: this.trans('If you leave this page changes will not be saved.'),\r\n        onConfirm: () => {\r\n          this.confirmingCancel = false\r\n          window.location.href = this.cancelUrl\r\n        },\r\n        onCancel: () => { this.confirmingCancel = false },\r\n        cancelText: this.trans('buttons.stay_on_page'),\r\n        confirmText: this.trans('buttons.leave_page'),\r\n      })\r\n    },\r\n\r\n    /**\r\n     * Handle cancel button/link.\r\n     *\r\n     * @param {Event} event\r\n     */\r\n    onCancel(event) {\r\n      if (this.shouldConfirmCancel && this.isDirty()) {\r\n        event.preventDefault()\r\n\r\n        this.confirmCancel()\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}