(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{WYMz:function(e,t,s){"use strict";var o=s("vDqi"),r=s.n(o),a=s("sEfC"),n=s.n(a),i=s("mwIZ"),l=s.n(i);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u={name:"nzUserAutocomplete",props:{label:{type:String,default:"User"},placeholder:{type:String,default:"Search for user..."},user:{type:Object,default:null},route:{type:String,default:"api.autocomplete.users.index"},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean,disabled:Boolean},data:function(){return{data:[],selected:this.user||null,loading:!1}},computed:{icon:function(){return this.selected?"check":null}},watch:{user:function(e){this.selected=e}},methods:{fetchData:n()((function(){var e=this;if(this.value){this.data=[],this.loading=!0;var t={name:this.value};this.except&&(t.except=this.except),r.a.get(route(this.route),{params:t}).then((function(t){t.data.data.forEach((function(t){return e.data.push(t)})),e.loading=!1}),(function(t){e.loading=!1}))}}),500),onSelect:function(e){this.selected=e,this.$emit("select",e)},onInput:function(e){var t=this.getValue(this.selected);t&&t!==e&&this.onSelect(null),this.$emit("input",e),this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(e){if(e)return"object"===c(e)?l()(e,"full_name"):e}}},d=s("KHd+"),f=Object(d.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-field",{staticClass:"nz-user-autocomplete",attrs:{label:e.label,type:e.error?"is-danger":null,message:e.message}},[s("b-field",{attrs:{grouped:""}},[s("b-autocomplete",{attrs:{value:e.value,data:e.data,field:"full_name",loading:e.loading,icon:e.icon,placeholder:e.placeholder,expanded:"",autofocus:e.autofocus,disabled:e.disabled},on:{input:e.onInput,select:e.onSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"media"},[s("div",{staticClass:"media-content"},[e._v("\n            "+e._s(t.option.full_name)+" "),s("small",[e._v("<"+e._s(t.option.email)+">")])])])]}}])})],1)],1)}),[],!1,null,null,null);t.a=f.exports},"gKG+":function(e,t,s){"use strict";var o=s("0XPj"),r=s.n(o);function a(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function e(t){for(var s in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)this[s]=t[s]}var t,s,o;return t=e,(s=[{key:"hasRole",value:function(e){return Array.isArray(e)||(e=[e]),!!r()(this.roles.map((function(e){return e.name})),e).length}}])&&a(t.prototype,s),o&&a(t,o),e}();t.a={data:function(){return{currentUser:new n(window.App.User)}},computed:{isCuratorOrAdmin:function(){return this.currentUser.hasRole(["admin","curator"])}}}},nWYc:function(e,t,s){"use strict";var o=s("+9FD"),r=s.n(o),a=s("dfMu"),n=s.n(a),i=s("T5TR");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=p(e);if(t){var r=p(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return m(this,s)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,s,o,r=f(a);function a(){return c(this,a),r.apply(this,arguments)}return t=a,(s=[{key:"setBoxToRealPosition",value:function(e){var t=this.imageEl.naturalWidth,s=this.imageEl.naturalHeight,o=t/this.imageEl.offsetWidth,r=s/this.imageEl.offsetHeight;this.box=new i.a(Math.round(e.x/o),Math.round(e.y/r),Math.round((e.x+e.width)/o),Math.round((e.y+e.height)/r)),this.redraw()}}])&&u(t.prototype,s),o&&u(t,o),a}(n.a),b={name:"nzImageCropModal",mixins:[s("aa4y").a],props:{canCancel:{type:[Array,Boolean],default:function(){return["escape","x"]}},imageUrl:String,crop:Object},data:function(){return{croppr:null,newCrop:this.crop,preserveRatio:!1}},mounted:function(){document.addEventListener("keydown",this.ctrlIsPressed),document.addEventListener("keyup",this.ctrlIsNotPressed)},beforeDestroy:function(){document.removeEventListener("keydown",this.ctrlIsPressed),document.removeEventListener("keyup",this.ctrlIsNotPressed)},watch:{isActive:function(e){var t=this;this.handleScroll(),this.croppr=null,e&&this.$nextTick((function(){t.croppr=new v(t.$refs.cropModalImage,{onCropEnd:function(e){t.newCrop=e},onInitialize:function(e){t.newCrop&&e.setBoxToRealPosition(t.newCrop)}})}))}},methods:{handleScroll:function(){"undefined"!=typeof window&&(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,document.body.classList.toggle("is-noscroll",this.isActive),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null))},cropImage:function(){this.$emit("update:crop",this.newCrop),this.close()},ctrlIsPressed:function(e){17==e.which&&this.croppr&&(this.croppr.options.aspectRatio=this.croppr.box.height()/this.croppr.box.width())},ctrlIsNotPressed:function(e){17==e.which&&this.croppr&&(this.croppr.options.aspectRatio=null)}}},_=s("KHd+"),h={name:"nzPhotoUpload",components:{NzImageCropModal:Object(_.a)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:e.animation}},[e.isActive?s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),e._v(" "),s("div",{staticClass:"animation-content modal-content",style:{maxWidth:e.newWidth}},[s("img",{ref:"cropModalImage",staticClass:"image",attrs:{src:e.imageUrl,alt:"Cropped image"}})]),e._v(" "),s("button",{staticClass:"modal-close is-large",attrs:{type:"button"},on:{click:function(t){return e.cancel("x")}}}),e._v(" "),s("button",{staticClass:"modal-action",attrs:{type:"button"},on:{click:e.cropImage}},[s("b-icon",{attrs:{icon:"check"}})],1)]):e._e()])}),[],!1,null,null,null).exports,NzImageModal:s("slQF").a},props:{imageUrl:{type:String,default:null},imagePath:{type:String,default:null},imageLicense:{type:[Number,String],default:null},licenses:{type:Object,required:!0},text:String,withLicense:{type:Boolean,default:!0},withCrop:{type:Boolean,default:!0}},data:function(){return{image:{url:this.imageUrl,path:this.imagePath,crop:null,license:this.imageLicense},croppedImageUrl:null,reader:null,uploading:!1,loading:!1,progress:0,hasExisting:!!this.imageUrl,error:null,showCropModal:!1,showModal:!1}},watch:{"image.crop":function(e){this.$emit("cropped",this.image),e?this.cropThumbnail(e):this.croppedImageUrl=null}},computed:{haveImage:function(){return!!this.image.url},thumbnailUrl:function(){return this.croppedImageUrl||this.image.url}},methods:{selectImage:function(){this.$refs.input.click()},onInput:function(e){this.error=null,e&&this.upload(e)},upload:function(e){var t=this;return this.uploading=!0,axios.post(route("api.photo-uploads.store"),this.makeForm(e),{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},onUploadProgress:function(e){t.progress=Math.floor(100*e.loaded/e.total)}}).then((function(s){t.image.path=s.data.file,t.image.exif=s.data.exif,t.image.license=null,t.uploading=!1,t.progress=0,t.$emit("uploaded",t.image),t.loading=!0,r()(e,(function(e){t.image.url=t.getImageDataUrl(e),t.loading=!1}),{orientation:!0})})).catch(this.handleError)},getImageDataUrl:function(e){var t=e;return t instanceof HTMLCanvasElement||((t=document.createElement("canvas")).setAttribute("width",e.width),t.setAttribute("height",e.height),t.getContext("2d").drawImage(e,0,0)),t.toDataURL()},makeForm:function(e){var t=new FormData;return t.append("file",e),t},remove:function(){var e=this;if(this.hasExisting)return this.hasExisting=!1,this.clearPhoto();axios.delete(route("api.photo-uploads.destroy",this.image.path)).then((function(){e.clearPhoto()}))},clearPhoto:function(){this.$emit("removed",this.image),this.image.path=null,this.image.url=null,this.image.crop=null,this.image.license=null,this.croppedImageUrl=null},handleError:function(e){if(this.uploading=!1,this.loading=!1,this.progress=0,this.image.url=null,this.$el.querySelector('input[type="file"]').value="",!e.response)return this.$buefy.toast.open({duration:5e3,message:e.message,position:"is-top",type:"is-danger"});this.error=e.response.data.errors.file[0]||this.trans("Error")},openCropModal:function(){this.showCropModal=!0},closeCropModal:function(){this.showCropModal=!1},cropThumbnail:function(e){var t=document.createElement("img");t.src=this.image.url;var s=document.createElement("canvas");s.setAttribute("width",e.width),s.setAttribute("height",e.height),s.getContext("2d").drawImage(t,-e.x,-e.y),this.croppedImageUrl=s.toDataURL()},handleLicenseChanged:function(e){this.image.license=e,this.$emit("license-changed",e)}}},g=Object(_.a)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.haveImage?s("div",{staticClass:"card"},[s("div",{staticClass:"card-image"},[s("figure",{staticClass:"has-magnifier has-text-centered",on:{click:function(t){e.showModal=!0}}},[s("img",{staticClass:"max-h-36",attrs:{src:e.thumbnailUrl,alt:"Uploaded photo"}}),e._v(" "),s("div",{staticClass:"image-magnifier"},[s("b-icon",{attrs:{icon:"expand",size:"is-medium"}})],1)])]),e._v(" "),e.haveImage?s("footer",{staticClass:"card-footer"},[s("div",{staticClass:"card-footer-item flex-col"},[s("div",{staticClass:"mb-4 w-full flex justify-between"},[e.withCrop?s("button",{staticClass:"button is-outlined is-small mr-2",attrs:{type:"button"},on:{click:e.openCropModal,close:e.closeCropModal}},[s("b-icon",{attrs:{icon:"crop"}})],1):e._e(),e._v(" "),e.image.path||e.hasExisting?s("button",{staticClass:"delete is-danger is-medium",attrs:{type:"button"},on:{click:e.remove}}):e._e()]),e._v(" "),e.withLicense?s("div",{staticClass:"w-full"},[s("b-select",{attrs:{value:e.image.license,expanded:""},on:{input:e.handleLicenseChanged}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.default")))]),e._v(" "),e._l(e.licenses,(function(t,o){return s("option",{key:o,domProps:{value:o,textContent:e._s(t)}})}))],2)],1):e._e()])]):e._e(),e._v(" "),e.haveImage?s("nz-image-crop-modal",{attrs:{active:e.showCropModal,crop:e.image.crop,"image-url":e.image.url},on:{"update:active":function(t){e.showCropModal=t},"update:crop":function(t){return e.$set(e.image,"crop",t)}}}):e._e(),e._v(" "),e.showModal?s("nz-image-modal",{attrs:{items:[e.thumbnailUrl]},on:{close:function(t){e.showModal=!1}}}):e._e()],1):s("b-field",{attrs:{message:e.error||null,type:e.error?"is-danger":null,expanded:""}},[s("b-upload",{attrs:{"drag-drop":"",expanded:"",disabled:e.uploading||e.loading},on:{input:e.onInput}},[s("section",{ref:"uploadZone",staticClass:"section is-relative"},[s("div",{staticClass:"has-text-centered"},[s("div",[s("b-icon",{attrs:{icon:"upload",size:"is-medium"}})],1),e._v(" "),e.uploading?s("progress",{staticClass:"progress is-primary is-small",attrs:{max:"100"},domProps:{value:e.progress}},[e._v(e._s(e.progress)+"%")]):e.loading?s("div",[e._v(e._s(e.trans("Loading...")))]):s("div",[e._v(e._s(e.text))])])])])],1)}),[],!1,null,null,null);t.a=g.exports},slQF:function(e,t,s){"use strict";var o={name:"nzImageModal",props:{items:{type:Array,default:function(){return[]}},value:{type:Number,default:0}},data:function(){return{newValue:this.value,active:!1}},computed:{openImage:function(){return this.items[this.newValue]}},watch:{newValue:function(){this.$emit("input",this.newValue)},openImage:{handler:function(e){this.active=Boolean(e)}}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},mounted:function(){this.active=Boolean(this.openImage)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{next:function(){var e=this.newValue+1;e>=this.items.length&&(e=0),this.newValue=e},prev:function(){var e=this.newValue-1;e<0&&(e=this.items.length-1),this.newValue=e},registerKeyListener:function(e){var t=e.which||e.keyCode;37===t?this.prev():39===t&&this.next()},onClose:function(e){var t=this;this.active=!1,this.$nextTick((function(){t.$emit("close",e)}))}}},r=s("KHd+"),a=Object(r.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{active:e.active,"can-cancel":["escape","x"]},on:{"update:active":function(t){e.active=t},close:e.onClose}},[s("div",{staticClass:"image-modal"},[s("img",{attrs:{src:e.openImage}}),e._v(" "),e.items.length>1?s("div",{staticClass:"image-modal-navigation"},[s("div",{staticClass:"image-modal-previous",on:{click:e.prev}},[s("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("div",{staticClass:"image-modal-next",on:{click:e.next}},[s("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])]):e._e()])])}),[],!1,null,null,null);t.a=a.exports},"yU/x":function(e,t,s){"use strict";s.r(t);var o=s("5YJQ"),r=s.n(o),a=s("JkKK"),n=s("mwIZ"),i=s.n(n),l=s("J2m7"),c=s.n(l),u=s("ijCd"),d=s.n(u),f=s("UfWW"),m=s.n(f),p=s("wEy/"),v=s.n(p),b=s("BkRI"),_=s.n(b),h=s("mk2N"),g=s("gKG+"),y=s("KUSn"),x=s("nWYc"),C=s("l90O"),k=s("uuKk"),w=s("WYMz");function O(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){T(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function T(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var E={name:"nzPoachingObservationForm",mixins:[h.a,g.a],components:{NzDateInput:y.a,NzPhotoUpload:x.a,NzSpatialInput:C.a,NzTaxonAutocomplete:k.a,NzUserAutocomplete:w.a},props:{observation:{type:Object,default:function(){return{taxon:null,taxon_id:null,taxon_suggestion:"",year:Object(a.a)().year(),month:Object(a.a)().month()+1,day:Object(a.a)().date(),latitude:null,longitude:null,accuracy:null,elevation:null,location:"",photos:[],observer:"",identifier:"",note:"",sex:null,number:null,number_of:"individual",project:null,habitat:null,found_on:null,stage_id:null,found_dead:!1,found_dead_note:"",data_license:null,image_license:null,types:[],observers:[],field_observers:[],observed_by_id:null,observed_by:null,identified_by_id:null,identified_by:null,dataset:null,atlas_code:null,description:"",comment:"",data_provider:null,data_limit:"",indigenous:!1,exact_number:!1,place:null,municipality:null,data_id:null,folder_id:null,file:null,offence_details:"",in_report:!1,case_reported:!1,case_reported_by:null,opportunity:!1,annotation:"",suspect_name:null,suspect_place:null,suspect_profile:null,suspect_note:"",associates:null,origin_of_individuals:null,cites:null,proceeding:null,verdict:null,verdict_date:null,source:null,dead_from_total:null,alive_from_total:null,suspects_number:null,sanction_eur:null,sanction_rsd:null,community_sentence:null,sources:[],offences:[]}}},licenses:{type:Object,default:function(){return{}}},sexes:{type:Object,default:function(){return{}}},observationTypes:{type:Array,default:function(){return[]}},stages:{type:Array,default:function(){return[]}},showObserverIdentifier:Boolean,fieldObservers:{type:Array,default:function(){return[]}},poachingSources:{type:Array,default:function(){return[]}},atlasCodes:Array,offences:Array},data:function(){return{keepAfterSubmit:this.getAttributesToKeep(),showMoreDetails:!0,locale:window.App.locale,observationTypeSearch:"",shouldClearType:!1,exifExtracted:!1,lastStageId:this.observation.stage_id,observers:this.observation.observers,observerFirstName:"",observerLastName:"",observerErrors:{type:Array,default:function(){return[]}},sources:this.observation.sources,sourceDescription:null,sourceLink:null}},computed:{selectedObservationTypes:{get:function(){var e=this;return this.observationTypes.filter((function(t){return d()(e.form.observation_types_ids,t.id)}))},set:function(e){this.form.observation_types_ids=e.map((function(e){return e.id}))}},availableObservationTypes:function(){var e=this;return this.observationTypes.filter((function(t){return!d()(e.form.observation_types_ids,t.id)&&t.name.toLowerCase().includes(e.observationTypeSearch.toLowerCase())}))},isIdentified:function(){return!(!this.form.taxon_id&&!this.form.taxon_suggestion)},identificationChanged:function(){return this.form.taxon_id!==this.observation.taxon_id||this.form.taxon_suggestion!==this.observation.taxon_suggestion}},created:function(){this.setDefaultObservationType()},methods:{newForm:function(){var e=this.observation;return e.photos.forEach((function(e){e.crop=null})),new r.a(P(P({},e),{},{observation_types_ids:e.types.map((function(e){return e.id})),offences_ids:this.observation.offences.map((function(e){return e.id})),observers:this.observation.observers,reason:null,field_observers:this.fieldObservers,sources:this.poachingSources,verdict_date:this.observation.verdict?new Date(this.observation.verdict_date):null}),{resetOnSuccess:!1})},addObserver:function(){this.observerFirstName&&this.observerLastName?(this.fieldObservers.push({firstName:this.observerFirstName,lastName:this.observerLastName}),this.observerFirstName=null,this.observerLastName=null,this.observerErrors=[]):(this.observerFirstName||(this.observerErrors.observerFirstName="This field is required",this.$forceUpdate()),this.observerLastName||(this.observerErrors.observerLastName="This field is required",this.$forceUpdate()))},removeObserver:function(e){axios.delete(route("api.observers.destroy",this.observers[e])),this.$delete(this.observers,e)},hookAfterSubmitWithoutRedirect:function(){this.setDefaultObservationType(),this.clearPhotos(),this.$refs.taxonAutocomplete.focusOnInput()},clearPhotos:function(){var e=this;[1,2,3].forEach((function(t){e.$refs["photoUpload-".concat(t)].clearPhoto()}))},onTaxonSelect:function(e){var t=this;this.form.taxon=e||null,this.form.taxon_id=e?e.id:null,this.form.taxon_suggestion=e?e.name:null;var s=this.lastStageId&&!c()(this.stages,(function(e){return e.id===t.lastStageId}));this.form.stage_id=s?null:this.lastStageId,this.updateIdentifier()},onPhotoUploaded:function(e){this.form.photos.push({path:e.path,crop:e.crop,license:e.license});var t=c()(this.availableObservationTypes,{slug:"photographed"});t&&this.pushSelectedObservationType(t),this.promptToExtractExifData(e)},onPhotoRemoved:function(e){v()(this.form.photos,{path:e.path});var t=m()(this.selectedObservationTypes,{slug:"photographed"});if(!this.form.photos.length&&t>=0){var s=this.selectedObservationTypes;s.splice(t,1),this.selectedObservationTypes=s}},onPhotoCropped:function(e){var t=m()(this.form.photos,{path:e.path});if(t>=0){var s=_()(this.form.photos[t]);s.crop=e.crop,this.form.photos.splice(t,1,s)}},getObservationPhotoAttribute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"url",s=i()(this.observation,"photos.".concat(e,".").concat(t),"");if("url"===t&&s){var o=Object(a.a)(i()(this.observation,"photos.".concat(e,".updated_at"),null));s+=o.isValid()?"?v=".concat(o.format("X")):""}return s},getAttributesToKeep:function(){return["location","accuracy","elevation","latitude","longitude","year","month","day","project","observer","observed_by","observed_by_id","data_license","image_license"]},onTypeTyping:function(e){this.observationTypeSearch=e},onTypeBackspace:function(){this.shouldClearType?(this.form.observation_types_ids.splice(-1,1),this.shouldClearType=!1):this.observationTypeSearch||(this.shouldClearType=!0)},pushSelectedObservationType:function(e){var t=this.selectedObservationTypes;t.push(e),this.selectedObservationTypes=t},promptToExtractExifData:function(e){var t=this;!this.exifExtracted&&e.exif&&this.$buefy.dialog.confirm({message:this.extractExifMessage(e).replace(/\n/g,"<br>"),cancelText:this.trans("No"),confirmText:this.trans("Yes"),onConfirm:function(){t.fillFromExif(e)},onCancel:function(){t.exifExtracted=!0}})},extractExifMessage:function(e){var t=this,s=this.extractExifData(e);return[this.trans("Use data from photo to fill the form?")+"\n"].concat(O(Object.keys(s).map((function(e){return"".concat(t.trans("labels.field_observations."+e),": ").concat(s[e])})))).join("\n")},extractExifData:function(e){var t={};for(var s in e.exif){var o=e.exif[s];o&&(t[s]=o)}return t},fillFromExif:function(e){var t=this.extractExifData(e);for(var s in t)this.form[s]=t[s];this.exifExtracted=!0},onObserverSelect:function(e){this.form.observed_by=e||null,this.form.observed_by_id=e?e.id:null,this.form.observer=e?e.full_name:null},onIdentifierSelect:function(e){this.form.identified_by=e||null,this.form.identified_by_id=e?e.id:null,this.form.identifier=e?e.full_name:null},setDefaultObservationType:function(){this.selectedObservationTypes.length||this.pushSelectedObservationType(c()(this.availableObservationTypes,{slug:"observed"}))},updateIdentifier:function(){var e=this.observation.identified_by;this.identificationChanged&&(e=this.isIdentified?window.App.User:null),this.onIdentifierSelect(e)},onLicenseChanged:function(e,t){var s=_()(this.form.photos[e]);s.license=t,this.form.photos[e]=s},addSource:function(){this.form.source&&(this.poachingSources.push({name:this.form.source,description:this.sourceDescription,link:this.sourceLink}),this.form.source=null,this.sourceDescription=null,this.sourceLink=null)},removeSource:function(e){axios.delete(route("api.sources.destroy",this.sources[e])),this.$delete(this.sources,e)}}},I=s("KHd+"),N=Object(I.a)(E,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"poaching-observation-form",attrs:{action:e.action,method:"POST",lang:e.locale}},[s("div",{staticClass:"columns is-desktop"},[s("div",{staticClass:"column is-half-desktop"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("b-field",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.trans("labels.observations.id_tooltip"),expression:"trans('labels.observations.id_tooltip')"}],staticClass:"is-required",attrs:{label:e.trans("labels.field_observations.taxon_id"),"label-for":"taxon_id",type:e.form.errors.has("taxon_id")?"is-danger":null,message:e.form.errors.has("taxon_id")?e.form.errors.first("taxon_id"):null}},[s("b-input",{attrs:{id:"taxon_id",type:"number",disabled:"disabled"},model:{value:e.form.taxon_id,callback:function(t){e.$set(e.form,"taxon_id",t)},expression:"form.taxon_id"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("nz-taxon-autocomplete",{ref:"taxonAutocomplete",staticClass:"is-required",attrs:{taxon:e.observation.taxon,error:e.form.errors.has("taxon_id"),message:e.form.errors.has("taxon_id")?e.form.errors.first("taxon_id"):null,autofocus:"",label:e.trans("labels.field_observations.taxon"),placeholder:e.trans("labels.field_observations.search_for_taxon")},on:{select:e.onTaxonSelect},model:{value:e.form.taxon_suggestion,callback:function(t){e.$set(e.form,"taxon_suggestion",t)},expression:"form.taxon_suggestion"}})],1)]),e._v(" "),s("nz-date-input",{attrs:{year:e.form.year,month:e.form.month,day:e.form.day,errors:e.form.errors,label:e.trans("labels.field_observations.date"),placeholders:{year:e.trans("labels.field_observations.year"),month:e.trans("labels.field_observations.month"),day:e.trans("labels.field_observations.day")}},on:{"update:year":function(t){return e.$set(e.form,"year",t)},"update:month":function(t){return e.$set(e.form,"month",t)},"update:day":function(t){return e.$set(e.form,"day",t)}}}),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.photos")}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-third"},[s("nz-photo-upload",{ref:"photoUpload-1",attrs:{"image-url":e.getObservationPhotoAttribute(0,"url"),"image-path":e.getObservationPhotoAttribute(0,"path"),"image-license":e.getObservationPhotoAttribute(0,"license"),licenses:e.licenses,text:e.trans("labels.field_observations.upload"),errors:e.form.errors},on:{uploaded:e.onPhotoUploaded,removed:e.onPhotoRemoved,cropped:e.onPhotoCropped,"license-changed":function(t){return e.onLicenseChanged(0,t)}}})],1),e._v(" "),s("div",{staticClass:"column is-one-third"},[s("nz-photo-upload",{ref:"photoUpload-2",attrs:{"image-url":e.getObservationPhotoAttribute(1,"url"),"image-path":e.getObservationPhotoAttribute(1,"path"),"image-license":e.getObservationPhotoAttribute(1,"license"),licenses:e.licenses,text:e.trans("labels.field_observations.upload"),errors:e.form.errors},on:{uploaded:e.onPhotoUploaded,removed:e.onPhotoRemoved,cropped:e.onPhotoCropped,"license-changed":function(t){return e.onLicenseChanged(1,t)}}})],1),e._v(" "),s("div",{staticClass:"column is-one-third"},[s("nz-photo-upload",{ref:"photoUpload-3",attrs:{"image-url":e.getObservationPhotoAttribute(2,"url"),"image-path":e.getObservationPhotoAttribute(2,"path"),"image-license":e.getObservationPhotoAttribute(2,"license"),licenses:e.licenses,text:e.trans("labels.field_observations.upload"),errors:e.form.errors},on:{uploaded:e.onPhotoUploaded,removed:e.onPhotoRemoved,cropped:e.onPhotoCropped,"license-changed":function(t){return e.onLicenseChanged(2,t)}}})],1)])])],1),e._v(" "),s("div",{staticClass:"column is-half-desktop"},[s("nz-spatial-input",{attrs:{latitude:e.form.latitude,longitude:e.form.longitude,location:e.form.location,accuracy:e.form.accuracy,elevation:e.form.elevation,errors:e.form.errors},on:{"update:latitude":function(t){return e.$set(e.form,"latitude",t)},"update:longitude":function(t){return e.$set(e.form,"longitude",t)},"update:location":function(t){return e.$set(e.form,"location",t)},"update:accuracy":function(t){return e.$set(e.form,"accuracy",t)},"update:elevation":function(t){return e.$set(e.form,"elevation",t)}}})],1)]),e._v(" "),s("button",{staticClass:"button is-text",attrs:{type:"button"},on:{click:function(t){e.showMoreDetails=!e.showMoreDetails}}},[e._v("\n    "+e._s(e.showMoreDetails?e.trans("labels.field_observations.less_details"):e.trans("labels.field_observations.more_details"))+"\n  ")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showMoreDetails,expression:"showMoreDetails"}],staticClass:"mt-4"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.stage"),"label-for":"stage",type:e.form.errors.has("stage_id")?"is-danger":null,message:e.form.errors.has("stage_id")?e.form.errors.first("stage_id"):null}},[s("b-select",{attrs:{id:"stage",disabled:!e.stages.length,expanded:""},on:{input:function(t){e.lastStageId=t}},model:{value:e.form.stage_id,callback:function(t){e.$set(e.form,"stage_id",t)},expression:"form.stage_id"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_stage")))]),e._v(" "),e._l(e.stages,(function(t){return s("option",{key:t.id,domProps:{value:t.id,textContent:e._s(e.trans("stages."+t.name))}})}))],2)],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.sex"),type:e.form.errors.has("sex")?"is-danger":null,message:e.form.errors.has("sex")?e.form.errors.first("sex"):null}},[s("b-select",{attrs:{expanded:""},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),e._l(e.sexes,(function(t,o){return s("option",{key:o,domProps:{value:o,textContent:e._s(t)}})}))],2)],1)],1)]),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.types"),error:e.form.errors.has("observation_types_ids"),message:e.form.errors.has("observation_types_ids")?e.form.errors.first("observation_types_ids"):null}},[s("b-taginput",{attrs:{data:e.availableObservationTypes,autocomplete:"",allowNew:!1,field:"name",icon:"tag",placeholder:e.trans("labels.field_observations.types_placeholder"),"open-on-focus":""},on:{typing:e.onTypeTyping},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.onTypeBackspace(t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.option.name))])]}}]),model:{value:e.selectedObservationTypes,callback:function(t){e.selectedObservationTypes=t},expression:"selectedObservationTypes"}})],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.observations.atlas_code"),"label-for":"atlas-code",type:e.form.errors.has("atlas_code")?"is-danger":null,message:e.form.errors.has("atlas_code")?e.form.errors.first("atlas_code"):null}},[s("b-select",{attrs:{id:"atlas-code",expanded:""},model:{value:e.form.atlas_code,callback:function(t){e.$set(e.form,"atlas_code",t)},expression:"form.atlas_code"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),e._l(e.atlasCodes,(function(t){return s("option",{key:t.code,domProps:{value:t.code,textContent:e._s(t.name)}})}))],2)],1),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.observations.data_provider"),"label-for":"data_provider",error:e.form.errors.has("data_provider"),message:e.form.errors.has("data_provider")?e.form.errors.first("data_provider"):null}},[s("b-input",{attrs:{id:"data_provider",name:"data_provider"},model:{value:e.form.data_provider,callback:function(t){e.$set(e.form,"data_provider",t)},expression:"form.data_provider"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.observations.data_limit"),"label-for":"data_limit",error:e.form.errors.has("data_limit"),message:e.form.errors.has("data_limit")?e.form.errors.first("data_limit"):null}},[s("b-input",{attrs:{id:"data_limit",name:"data_limit"},model:{value:e.form.data_limit,callback:function(t){e.$set(e.form,"data_limit",t)},expression:"form.data_limit"}})],1)],1)]),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.note"),"label-for":"note",error:e.form.errors.has("note"),message:e.form.errors.has("note")?e.form.errors.first("note"):null}},[s("b-input",{attrs:{id:"note",type:"textarea"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.habitat"),"label-for":"habitat",error:e.form.errors.has("habitat"),message:e.form.errors.has("habitat")?e.form.errors.first("habitat"):null}},[s("b-input",{attrs:{id:"habitat",name:"habitat"},model:{value:e.form.habitat,callback:function(t){e.$set(e.form,"habitat",t)},expression:"form.habitat"}})],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.description"),"label-for":"description",error:e.form.errors.has("description"),message:e.form.errors.has("description")?e.form.errors.first("description"):null}},[s("b-input",{attrs:{id:"description",type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.field_observations.comment"),"label-for":"comment",error:e.form.errors.has("comment"),message:e.form.errors.has("comment")?e.form.errors.first("comment"):null}},[s("b-input",{attrs:{id:"comment",type:"textarea"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.literature_observations.project"),type:e.form.errors.has("project")?"is-danger":null,message:e.form.errors.has("project")?e.form.errors.first("project"):null}},[s("label",{staticClass:"label",attrs:{slot:"label",for:"project"},slot:"label"},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.literature_observations.project_tooltip")},expression:"{content: trans('labels.literature_observations.project_tooltip')}"}],staticClass:"is-dashed"},[e._v("\n              "+e._s(e.trans("labels.literature_observations.project"))+"\n            ")])]),e._v(" "),s("b-input",{attrs:{id:"project",name:"project"},model:{value:e.form.project,callback:function(t){e.$set(e.form,"project",t)},expression:"form.project"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.dataset"),"label-for":"dataset",type:e.form.errors.has("dataset")?"is-danger":null,message:e.form.errors.has("dataset")?e.form.errors.first("dataset"):null}},[s("b-input",{attrs:{id:"dataset",name:"dataset"},model:{value:e.form.dataset,callback:function(t){e.$set(e.form,"dataset",t)},expression:"form.dataset"}})],1)],1)]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.number"),"label-for":"number",type:e.form.errors.has("number")?"is-danger":null,message:e.form.errors.has("number")?e.form.errors.first("number"):null}},[s("b-input",{attrs:{id:"number",type:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.number_of"),"label-for":"number_of",type:e.form.errors.has("number_of")?"is-danger":null,message:e.form.errors.has("number_of")?e.form.errors.first("number_of"):null}},[s("b-select",{attrs:{expanded:""},model:{value:e.form.number_of,callback:function(t){e.$set(e.form,"number_of",t)},expression:"form.number_of"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),s("option",{attrs:{value:"individual"}},[e._v(e._s(e.trans("labels.number_of.individual")))]),e._v(" "),s("option",{attrs:{value:"couple"}},[e._v(e._s(e.trans("labels.number_of.couple")))]),e._v(" "),s("option",{attrs:{value:"singing_male"}},[e._v(e._s(e.trans("labels.number_of.singing_male")))]),e._v(" "),s("option",{attrs:{value:"active_nest"}},[e._v(e._s(e.trans("labels.number_of.active_nest")))]),e._v(" "),s("option",{attrs:{value:"family_with_cubs"}},[e._v(e._s(e.trans("labels.number_of.family_with_cubs")))])])],1)],1)]),e._v(" "),s("b-checkbox",{model:{value:e.form.found_dead,callback:function(t){e.$set(e.form,"found_dead",t)},expression:"form.found_dead"}},[e._v(e._s(e.trans("labels.observations.found_dead")))]),e._v(" "),e.form.found_dead?s("b-field",{attrs:{label:e.trans("labels.observations.found_dead_note"),"label-for":"found_dead_note",error:e.form.errors.has("found_dead_note"),message:e.form.errors.has("found_dead_note")?e.form.errors.first("found_dead_note"):null}},[s("b-input",{attrs:{id:"found_dead_note",type:"textarea"},model:{value:e.form.found_dead_note,callback:function(t){e.$set(e.form,"found_dead_note",t)},expression:"form.found_dead_note"}})],1):e._e(),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.dead_from_total"),"label-for":"dead_from_total",type:e.form.errors.has("dead_from_total")?"is-danger":null,message:e.form.errors.has("dead_from_total")?e.form.errors.first("dead_from_total"):null}},[s("b-input",{attrs:{id:"dead_from_total",name:"dead_from_total",type:"number"},model:{value:e.form.dead_from_total,callback:function(t){e.$set(e.form,"dead_from_total",t)},expression:"form.dead_from_total"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.alive_from_total"),"label-for":"alive_from_total",type:e.form.errors.has("alive_from_total")?"is-danger":null,message:e.form.errors.has("alive_from_total")?e.form.errors.first("alive_from_total"):null}},[s("b-input",{attrs:{id:"alive_from_total",name:"alive_from_total",type:"number"},model:{value:e.form.alive_from_total,callback:function(t){e.$set(e.form,"alive_from_total",t)},expression:"form.alive_from_total"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.exact_number")}},[s("b-switch",{model:{value:e.form.exact_number,callback:function(t){e.$set(e.form,"exact_number",t)},expression:"form.exact_number"}},[e._v("\n            "+e._s(e.form.exact_number?e.trans("Yes"):e.trans("No"))+"\n          ")])],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.indigenous")}},[s("b-switch",{model:{value:e.form.indigenous,callback:function(t){e.$set(e.form,"indigenous",t)},expression:"form.indigenous"}},[e._v("\n            "+e._s(e.form.indigenous?e.trans("Yes"):e.trans("No"))+"\n          ")])],1)],1)]),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.poaching_observations.offences")}},[s("div",{staticClass:"block"},e._l(e.offences,(function(t){return s("b-checkbox",{key:t.id,attrs:{"native-value":t.id},model:{value:e.form.offences_ids,callback:function(t){e.$set(e.form,"offences_ids",t)},expression:"form.offences_ids"}},[e._v("\n          "+e._s(e.trans("labels.offence_cases."+t.name))+"\n        ")])})),1)]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.place"),"label-for":"place",type:e.form.errors.has("place")?"is-danger":null,message:e.form.errors.has("place")?e.form.errors.first("place"):null}},[s("b-input",{attrs:{id:"place",name:"place"},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.municipality"),"label-for":"municipality",type:e.form.errors.has("municipality")?"is-danger":null,message:e.form.errors.has("municipality")?e.form.errors.first("municipality"):null}},[s("b-input",{attrs:{id:"municipality",name:"municipality"},model:{value:e.form.municipality,callback:function(t){e.$set(e.form,"municipality",t)},expression:"form.municipality"}})],1)],1)]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.data_id"),"label-for":"data_id",type:e.form.errors.has("data_id")?"is-danger":null,message:e.form.errors.has("data_id")?e.form.errors.first("data_id"):null}},[s("b-input",{attrs:{id:"data_id",name:"data_id"},model:{value:e.form.data_id,callback:function(t){e.$set(e.form,"data_id",t)},expression:"form.data_id"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.folder_id"),"label-for":"municipality",type:e.form.errors.has("folder_id")?"is-danger":null,message:e.form.errors.has("folder_id")?e.form.errors.first("folder_id"):null}},[s("b-input",{attrs:{id:"folder_id",name:"folder_id"},model:{value:e.form.folder_id,callback:function(t){e.$set(e.form,"folder_id",t)},expression:"form.folder_id"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.file"),"label-for":"file",type:e.form.errors.has("file")?"is-danger":null,message:e.form.errors.has("file")?e.form.errors.first("file"):null}},[s("b-input",{attrs:{id:"file",name:"file"},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1)],1)]),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.poaching_observations.in_report")}},[s("b-switch",{model:{value:e.form.in_report,callback:function(t){e.$set(e.form,"in_report",t)},expression:"form.in_report"}},[e._v("\n        "+e._s(e.form.in_report?e.trans("Yes"):e.trans("No"))+"\n      ")])],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.poaching_observations.offence_details"),"label-for":"offence_details",error:e.form.errors.has("offence_details"),message:e.form.errors.has("offence_details")?e.form.errors.first("offence_details"):null}},[s("b-input",{attrs:{id:"offence_details",type:"textarea"},model:{value:e.form.offence_details,callback:function(t){e.$set(e.form,"offence_details",t)},expression:"form.offence_details"}})],1),e._v(" "),s("b-checkbox",{model:{value:e.form.case_reported,callback:function(t){e.$set(e.form,"case_reported",t)},expression:"form.case_reported"}},[e._v(e._s(e.trans("labels.poaching_observations.case_reported")))]),e._v(" "),e.form.case_reported?s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.case_reported_by"),"label-for":"case_reported_by",type:e.form.errors.has("case_reported_by")?"is-danger":null,message:e.form.errors.has("case_reported_by")?e.form.errors.first("case_reported_by"):null}},[s("b-input",{attrs:{id:"case_reported_by",name:"case_reported_by"},model:{value:e.form.case_reported_by,callback:function(t){e.$set(e.form,"case_reported_by",t)},expression:"form.case_reported_by"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.verdict"),"label-for":"verdict",type:e.form.errors.has("verdict")?"is-danger":null,message:e.form.errors.has("verdict")?e.form.errors.first("verdict"):null}},[s("b-select",{attrs:{expanded:""},model:{value:e.form.verdict,callback:function(t){e.$set(e.form,"verdict",t)},expression:"form.verdict"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),s("option",{attrs:{value:"yes"}},[e._v(e._s(e.trans("Yes")))]),e._v(" "),s("option",{attrs:{value:"no"}},[e._v(e._s(e.trans("No")))]),e._v(" "),s("option",{attrs:{value:"rejected"}},[e._v(e._s(e.trans("labels.poaching_observations.rejected")))])])],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.verdict_date")}},[s("b-datepicker",{attrs:{locale:e.locale,placeholder:e.trans("labels.poaching_observations.select_date"),icon:"calendar-today","trap-focus":""},model:{value:e.form.verdict_date,callback:function(t){e.$set(e.form,"verdict_date",t)},expression:"form.verdict_date"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.proceeding"),"label-for":"proceeding",type:e.form.errors.has("proceeding")?"is-danger":null,message:e.form.errors.has("proceeding")?e.form.errors.first("proceeding"):null}},[s("b-select",{attrs:{expanded:""},model:{value:e.form.proceeding,callback:function(t){e.$set(e.form,"proceeding",t)},expression:"form.proceeding"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),s("option",{attrs:{value:"misdemeanor"}},[e._v(e._s(e.trans("labels.proceedings.misdemeanor")))]),e._v(" "),s("option",{attrs:{value:"criminal"}},[e._v(e._s(e.trans("labels.proceedings.criminal")))])])],1)],1)]):e._e(),e._v(" "),e.form.case_reported?s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.sanction_rsd"),"label-for":"sanction_rsd",type:e.form.errors.has("sanction_rsd")?"is-danger":null,message:e.form.errors.has("sanction_rsd")?e.form.errors.first("sanction_rsd"):null}},[s("b-input",{attrs:{id:"sanction_rsd",name:"sanction_rsd",type:"int"},model:{value:e.form.sanction_rsd,callback:function(t){e.$set(e.form,"sanction_rsd",t)},expression:"form.sanction_rsd"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.sanction_eur"),"label-for":"sanction_eur",type:e.form.errors.has("sanction_eur")?"is-danger":null,message:e.form.errors.has("sanction_eur")?e.form.errors.first("sanction_eur"):null}},[s("b-input",{attrs:{id:"sanction_eur",name:"sanction_eur",type:"int"},model:{value:e.form.sanction_eur,callback:function(t){e.$set(e.form,"sanction_eur",t)},expression:"form.sanction_eur"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.community_sentence"),"label-for":"community_sentence",type:e.form.errors.has("community_sentence")?"is-danger":null,message:e.form.errors.has("community_sentence")?e.form.errors.first("community_sentence"):null}},[s("b-input",{attrs:{id:"community_sentence",name:"community_sentence",type:"int"},model:{value:e.form.community_sentence,callback:function(t){e.$set(e.form,"community_sentence",t)},expression:"form.community_sentence"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.opportunity")}},[s("b-switch",{model:{value:e.form.opportunity,callback:function(t){e.$set(e.form,"opportunity",t)},expression:"form.opportunity"}},[e._v("\n            "+e._s(e.form.opportunity?e.trans("Yes"):e.trans("No"))+"\n          ")])],1)],1)]):e._e(),e._v(" "),e.form.case_reported?s("b-field",{attrs:{label:e.trans("labels.poaching_observations.annotation"),"label-for":"annotation",error:e.form.errors.has("annotation"),message:e.form.errors.has("annotation")?e.form.errors.first("annotation"):null}},[s("b-input",{attrs:{id:"annotation",type:"textarea"},model:{value:e.form.annotation,callback:function(t){e.$set(e.form,"annotation",t)},expression:"form.annotation"}})],1):e._e(),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.suspect_name"),"label-for":"suspect_name",type:e.form.errors.has("suspect_name")?"is-danger":null,message:e.form.errors.has("suspect_name")?e.form.errors.first("suspect_name"):null}},[s("b-input",{attrs:{id:"suspect_name",name:"suspect_name"},model:{value:e.form.suspect_name,callback:function(t){e.$set(e.form,"suspect_name",t)},expression:"form.suspect_name"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.suspect_place"),"label-for":"suspect_place",type:e.form.errors.has("suspect_place")?"is-danger":null,message:e.form.errors.has("suspect_place")?e.form.errors.first("suspect_place"):null}},[s("b-input",{attrs:{id:"suspect_place",name:"suspect_place"},model:{value:e.form.suspect_place,callback:function(t){e.$set(e.form,"suspect_place",t)},expression:"form.suspect_place"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.suspect_profile"),"label-for":"suspect_profile",type:e.form.errors.has("suspect_profile")?"is-danger":null,message:e.form.errors.has("suspect_profile")?e.form.errors.first("suspect_profile"):null}},[s("b-input",{attrs:{id:"suspect_profile",name:"suspect_profile"},model:{value:e.form.suspect_profile,callback:function(t){e.$set(e.form,"suspect_profile",t)},expression:"form.suspect_profile"}})],1)],1),e._v(" "),s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.poaching_observations.suspects_number"),"label-for":"suspects_number",type:e.form.errors.has("suspects_number")?"is-danger":null,message:e.form.errors.has("suspects_number")?e.form.errors.first("suspects_number"):null}},[s("b-input",{attrs:{id:"suspects_number",name:"suspects_number",type:"number"},model:{value:e.form.suspects_number,callback:function(t){e.$set(e.form,"suspects_number",t)},expression:"form.suspects_number"}})],1)],1)]),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.poaching_observations.cites"),"label-for":"cites",type:e.form.errors.has("cites")?"is-danger":null,message:e.form.errors.has("cites")?e.form.errors.first("cites"):null}},[s("b-select",{attrs:{expanded:""},model:{value:e.form.cites,callback:function(t){e.$set(e.form,"cites",t)},expression:"form.cites"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),s("option",{attrs:{value:"1"}},[e._v(e._s(e.trans("labels.cites.appendix_I")))]),e._v(" "),s("option",{attrs:{value:"2"}},[e._v(e._s(e.trans("labels.cites.appendix_II")))]),e._v(" "),s("option",{attrs:{value:"3"}},[e._v(e._s(e.trans("labels.cites.appendix_III")))])])],1),e._v(" "),s("b-field",{attrs:{label:e.trans("labels.poaching_observations.origin_of_individuals"),"label-for":"origin_of_individuals",type:e.form.errors.has("origin_of_individuals")?"is-danger":null,message:e.form.errors.has("origin_of_individuals")?e.form.errors.first("origin_of_individuals"):null}},[s("b-input",{attrs:{id:"origin_of_individuals",name:"origin_of_individuals",type:"number"},model:{value:e.form.origin_of_individuals,callback:function(t){e.$set(e.form,"origin_of_individuals",t)},expression:"form.origin_of_individuals"}})],1),e._v(" "),s("hr"),e._v(" "),s("div",[s("b",[e._v(e._s(e.trans("labels.poaching_observations.sources")))])]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b",[e._v(e._s(e.trans("labels.poaching_observations.source")))])]),e._v(" "),s("div",{staticClass:"column"},[s("b",[e._v(e._s(e.trans("labels.poaching_observations.source_description")))])]),e._v(" "),s("div",{staticClass:"column"},[s("b",[e._v(e._s(e.trans("labels.poaching_observations.source_link")))])]),e._v(" "),s("div",{staticClass:"column"})]),e._v(" "),e._l(e.sources,(function(t,o){return s("div",{key:o,staticClass:"columns"},[s("div",{staticClass:"column"},[e._v(e._s(e.trans("labels.poaching_observations."+t.name)))]),e._v(" "),s("div",{staticClass:"column"},[e._v(e._s(t.description))]),e._v(" "),s("div",{staticClass:"column"},[e._v(e._s(t.link))]),e._v(" "),s("div",{staticClass:"column"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.poaching_observations.remove_source_tooltip")},expression:"{content: trans('labels.poaching_observations.remove_source_tooltip')}"}],staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.removeSource(o)}}})])])})),e._v(" "),e._l(e.poachingSources,(function(t,o){return s("div",{key:o,staticClass:"columns"},[s("div",{staticClass:"column"},[e._v(e._s(e.trans("labels.poaching_observations."+t.name)))]),e._v(" "),s("div",{staticClass:"column"},[e._v(e._s(t.description))]),e._v(" "),s("div",{staticClass:"column"},[e._v(e._s(t.link))]),e._v(" "),s("div",{staticClass:"column"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.poaching_observations.remove_source_tooltip")},expression:"{content: trans('labels.poaching_observations.remove_source_tooltip')}"}],staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.removeSource(o)}}})])])})),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-select",{attrs:{expanded:""},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.choose_a_value")))]),e._v(" "),s("option",{attrs:{value:"social_media"}},[e._v(e._s(e.trans("labels.poaching_observations.social_media")))]),e._v(" "),s("option",{attrs:{value:"media"}},[e._v(e._s(e.trans("labels.poaching_observations.media")))]),e._v(" "),s("option",{attrs:{value:"ads"}},[e._v(e._s(e.trans("labels.poaching_observations.ads")))]),e._v(" "),s("option",{attrs:{value:"institutions"}},[e._v(e._s(e.trans("labels.poaching_observations.institutions")))]),e._v(" "),s("option",{attrs:{value:"associates"}},[e._v(e._s(e.trans("labels.poaching_observations.associates")))])])],1),e._v(" "),s("div",{staticClass:"column"},[e.form.source?s("b-input",{ref:"sourceDescription",attrs:{id:"sourceDescription"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.sourceLink.focus(t))}},model:{value:e.sourceDescription,callback:function(t){e.sourceDescription=t},expression:"sourceDescription"}}):e._e()],1),e._v(" "),s("div",{staticClass:"column"},[e.form.source?s("b-input",{ref:"sourceLink",attrs:{id:"sourceLink"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addSource(t))}},model:{value:e.sourceLink,callback:function(t){e.sourceLink=t},expression:"sourceLink"}}):e._e()],1),e._v(" "),s("div",{staticClass:"column"},[e.form.source?s("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:e.addSource}},[e._v("\n          "+e._s(e.trans("labels.poaching_observations.add_source"))+"\n        ")]):e._e()])]),e._v(" "),s("hr"),e._v(" "),s("div",[s("b",[e._v(e._s(e.trans("labels.observations.observers")))])]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("b",[e._v(e._s(e.trans("labels.observations.firstName")))])]),e._v(" "),s("div",{staticClass:"column is-2"},[s("b",[e._v(e._s(e.trans("labels.observations.lastName")))])]),e._v(" "),s("div",{staticClass:"column is-1"})]),e._v(" "),e._l(e.observers,(function(t,o){return s("div",{key:o,staticClass:"columns"},[s("div",{staticClass:"column is-2"},[e._v(e._s(t.firstName))]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v(e._s(t.lastName))]),e._v(" "),s("div",{staticClass:"column is-1"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.observations.remove_observer_tooltip")},expression:"{content: trans('labels.observations.remove_observer_tooltip')}"}],staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.removeObserver(o)}}})])])})),e._v(" "),e._l(e.fieldObservers,(function(t,o){return s("div",{key:o,staticClass:"columns"},[s("div",{staticClass:"column is-2"},[e._v(e._s(t.firstName))]),e._v(" "),s("div",{staticClass:"column is-2"},[e._v(e._s(t.lastName))]),e._v(" "),s("div",{staticClass:"column is-1"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.observations.remove_observer_tooltip")},expression:"{content: trans('labels.observations.remove_observer_tooltip')}"}],staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.removeObserver(o)}}})])])})),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"},[s("b-field",{attrs:{type:e.observerErrors.observerFirstName?"is-danger":null,message:e.observerErrors.observerFirstName?e.observerErrors.observerFirstName:null}},[s("b-input",{attrs:{id:"observerFirstName",maxlength:"50",placeholder:e.trans("labels.observations.insert_first_name")},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.observerLastName.focus(t))}},model:{value:e.observerFirstName,callback:function(t){e.observerFirstName=t},expression:"observerFirstName"}})],1)],1),e._v(" "),s("div",{staticClass:"column is-2"},[s("b-field",{attrs:{type:e.observerErrors.observerLastName?"is-danger":null,message:e.observerErrors.observerLastName?e.observerErrors.observerLastName:null}},[s("b-input",{ref:"observerLastName",attrs:{id:"observerLastName",maxlength:"50",placeholder:e.trans("labels.observations.insert_last_name")},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addObserver(t))}},model:{value:e.observerLastName,callback:function(t){e.observerLastName=t},expression:"observerLastName"}})],1)],1),e._v(" "),s("div",{staticClass:"column is-1"},[s("button",{staticClass:"button is-primary",attrs:{type:"button"},on:{click:e.addObserver}},[e._v("\n          "+e._s(e.trans("labels.observations.add_observer"))+"\n        ")])])]),e._v(" "),s("hr"),e._v(" "),e.showObserverIdentifier?[s("nz-user-autocomplete",{attrs:{error:e.form.errors.has("identifier"),message:e.form.errors.has("identifier")?e.form.errors.first("identifier"):null,user:e.form.identified_by,label:e.trans("labels.field_observations.identifier"),disabled:!e.isIdentified},on:{select:e.onIdentifierSelect},model:{value:e.form.identifier,callback:function(t){e.$set(e.form,"identifier",t)},expression:"form.identifier"}})]:e._e(),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("b-field",{attrs:{label:e.trans("labels.field_observations.data_license"),"label-for":"data_license",type:e.form.errors.has("data_license")?"is-danger":null,message:e.form.errors.has("data_license")?e.form.errors.first("data_license"):null}},[s("b-select",{attrs:{id:"data_license",expanded:""},model:{value:e.form.data_license,callback:function(t){e.$set(e.form,"data_license",t)},expression:"form.data_license"}},[s("option",{domProps:{value:null}},[e._v(e._s(e.trans("labels.field_observations.default")))]),e._v(" "),e._l(e.licenses,(function(t,o){return s("option",{key:o,domProps:{value:o,textContent:e._s(t)}})}))],2)],1)],1)]),e._v(" "),s("hr")],2),e._v(" "),s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.field_observations.save_tooltip")},expression:"{content: trans('labels.field_observations.save_tooltip')}"}],staticClass:"button is-primary",class:{"is-loading":e.submittingWithRedirect},attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitWithRedirect(t)}}},[e._v("\n    "+e._s(e.trans("buttons.save"))+"\n  ")]),e._v(" "),e.submitMore?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.trans("labels.field_observations.save_more_tooltip")},expression:"{content: trans('labels.field_observations.save_more_tooltip')}"}],staticClass:"button is-primary",class:{"is-outlined":!e.submittingWithoutRedirect,"is-loading":e.submittingWithoutRedirect},attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitWithoutRedirect(t)}}},[e._v("\n    "+e._s(e.trans("buttons.save_more"))+"\n  ")]):e._e(),e._v(" "),s("a",{staticClass:"button is-text",attrs:{href:e.cancelUrl},on:{click:e.onCancel}},[e._v(e._s(e.trans("buttons.cancel")))])])}),[],!1,null,null,null);t.default=N.exports}}]);
//# sourceMappingURL=26.js.map?id=5d7023277a42af1fc95e