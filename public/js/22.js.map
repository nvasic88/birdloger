{"version":3,"sources":["webpack:///./resources/js/components/imports/FieldObservationsImport.vue?997c","webpack:///./resources/js/components/imports/FieldObservationsImport.vue?be18","webpack:///./resources/js/components/inputs/ColumnsPicker.vue?4bd8","webpack:///./resources/js/components/sortable/SortableHandle.vue?8ce6","webpack:///resources/js/components/sortable/SortableHandle.vue","webpack:///./resources/js/components/sortable/SortableHandle.vue","webpack:///./resources/js/components/sortable/SortableItem.vue?1b9d","webpack:///resources/js/components/sortable/SortableItem.vue","webpack:///./resources/js/components/sortable/SortableItem.vue","webpack:///resources/js/components/sortable/SortableList.vue","webpack:///./resources/js/components/sortable/SortableList.vue?23c5","webpack:///./resources/js/components/inputs/ColumnsPicker.vue?4ede","webpack:///resources/js/components/inputs/ColumnsPicker.vue","webpack:///./resources/js/components/sortable/SortableList.vue","webpack:///./resources/js/components/inputs/ColumnsPicker.vue","webpack:///./resources/js/components/imports/FieldObservationsImport.vue?358d","webpack:///./resources/js/components/inputs/UserAutocomplete.vue?200d","webpack:///resources/js/components/inputs/UserAutocomplete.vue","webpack:///./resources/js/components/inputs/UserAutocomplete.vue?9f60","webpack:///./resources/js/components/inputs/UserAutocomplete.vue","webpack:///./resources/js/components/inputs/ColumnsPicker.vue?bebd","webpack:///./resources/js/components/imports/FieldObservationsImport.vue?17c6","webpack:///./resources/js/components/imports/FieldObservationsImport.vue?453c","webpack:///resources/js/components/imports/FieldObservationsImport.vue","webpack:///./resources/js/components/imports/FieldObservationsImport.vue","webpack:///./resources/js/components/inputs/ColumnsPicker.vue?4d59","webpack:///./resources/js/components/inputs/ColumnsPicker.vue?a281"],"names":["content","module","i","options","transform","undefined","locals","exports","render","this","$slots","inject","mounted","$el","classList","add","handleClass","itemClass","props","value","required","default","provide","$scopedSlots","items","draggable","handle","mirror","constrainDimensions","oldIndex","newIndex","$once","sortable","destroy","name","components","SortableHandle","type","Array","columns","title","String","data","allColumns","checkedColumns","computed","allChecked","length","checked","map","filter","watch","immediate","handler","$emit","methods","checkAll","event","target","_vm","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","ref","attrs","nativeOn","$event","_v","_s","_l","item","model","callback","$$v","expression","label","push","placeholder","user","Object","route","error","Boolean","message","except","autofocus","disabled","selected","loading","icon","fetchData","params","forEach","onSelect","onInput","currentValue","focusOnInput","querySelector","focus","getValue","option","component","on","full_name","email","NzUserAutocomplete","NzColumnsPicker","initial","runningImport","cancellableStatuses","canSubmitForUser","canApproveCurated","selectedColumns","showColumnsSelection","file","importing","currentImport","validationErrors","currentErrorsPage","submissionErrors","hasHeading","approveCurated","showSuccessMessage","cancelling","userId","canSubmit","validationFailed","saved","savingFailed","cancelled","importStatus","trans","cancellable","userFullName","window","App","User","created","startCheckingStatus","toggleColumns","submit","resetForm","axios","post","makeForm","form","append","column","handleSuccessfulSubmit","handleFailedSubmit","$buefy","toast","open","duration","interval","setInterval","checkStatus","get","showValidationErrors","errors_url","then","handleFailedValidation","stopCheckingImport","handleFailedSaving","handleStored","cancel","import_id","id","clearInterval","setUserId","_e","class","row"],"mappings":"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","file":"js/22.js?id=1d4c7627081532fdfb71","sourcesContent":["\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=style&index=0&id=38a5a5de&lang=scss&scoped=true&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=style&index=0&id=38a5a5de&lang=scss&scoped=true&\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=style&index=0&id=38a5a5de&lang=scss&scoped=true&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../node_modules/style-loader/index.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=style&index=0&id=38a5a5de&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('sortable-list',{staticClass:\"columns-picker\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar items = ref.items;\nreturn _c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"panel-heading\"},[_c('b-checkbox',{attrs:{\"value\":_vm.allChecked},nativeOn:{\"change\":function($event){return _vm.checkAll($event)}}}),_vm._v(_vm._s(_vm.title)+\"\\n    \")],1),_vm._v(\" \"),_vm._l((items),function(item){return _c('sortable-item',{key:item.value},[_c('div',{staticClass:\"panel-block\"},[_c('b-checkbox',{attrs:{\"disabled\":item.required,\"required\":item.required,\"native-value\":item.value},model:{value:(_vm.checkedColumns),callback:function ($$v) {_vm.checkedColumns=$$v},expression:\"checkedColumns\"}},[_vm._v(\"\\n          \"+_vm._s(item.label)+\"\\n        \")]),_vm._v(\" \"),_c('sortable-handle',[_c('b-icon',{attrs:{\"icon\":\"arrows-v\",\"size\":\"is-small\"}})],1)],1)])})],2)}}]),model:{value:(_vm.allColumns),callback:function ($$v) {_vm.allColumns=$$v},expression:\"allColumns\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableHandle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableHandle.vue?vue&type=script&lang=js&\"","<script>\r\nexport default {\r\n  render() {\r\n    return this.$slots.default[0]\r\n  },\r\n  inject: ['handleClass'],\r\n  mounted() {\r\n    this.$el.classList.add(this.handleClass)\r\n  }\r\n}\r\n</script>\r\n","var render, staticRenderFns\nimport script from \"./SortableHandle.vue?vue&type=script&lang=js&\"\nexport * from \"./SortableHandle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableItem.vue?vue&type=script&lang=js&\"","<script>\r\nexport default {\r\n  render() {\r\n    return this.$slots.default[0]\r\n  },\r\n  inject: ['itemClass'],\r\n  mounted() {\r\n    this.$el.classList.add(this.itemClass)\r\n  }\r\n}\r\n</script>\r\n","var render, staticRenderFns\nimport script from \"./SortableItem.vue?vue&type=script&lang=js&\"\nexport * from \"./SortableItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport { Sortable } from '@shopify/draggable'\r\n\r\nfunction move(items, oldIndex, newIndex) {\r\n  const itemRemovedArray = [\r\n    ...items.slice(0, oldIndex),\r\n    ...items.slice(oldIndex + 1, items.length)\r\n  ]\r\n\r\n  return [\r\n    ...itemRemovedArray.slice(0, newIndex),\r\n    items[oldIndex],\r\n    ...itemRemovedArray.slice(newIndex, itemRemovedArray.length)\r\n  ]\r\n}\r\n\r\nexport default {\r\n  props: {\r\n    value: {\r\n      required: true,\r\n    },\r\n    itemClass: {\r\n      default: 'sortable-item',\r\n    },\r\n    handleClass: {\r\n      default: 'sortable-handle',\r\n    },\r\n  },\r\n  provide() {\r\n    return {\r\n      itemClass: this.itemClass,\r\n      handleClass: this.handleClass,\r\n    }\r\n  },\r\n  render() {\r\n    return this.$scopedSlots.default({\r\n      items: this.value,\r\n    })\r\n  },\r\n  mounted() {\r\n    const sortable = new Sortable(this.$el, {\r\n      draggable: `.${this.itemClass}`,\r\n      handle: `.${this.handleClass}`,\r\n      mirror: {\r\n        constrainDimensions: true,\r\n      },\r\n    }).on('sortable:stop', ({ oldIndex, newIndex }) => {\r\n      this.$emit('input', move(this.value, oldIndex, newIndex))\r\n    })\r\n\r\n    this.$once('hook:beforeDestroy', () => {\r\n      sortable.destroy()\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SortableList.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=script&lang=js&\"","<template>\r\n  <sortable-list v-model=\"allColumns\" class=\"columns-picker\">\r\n    <div class=\"panel\" slot-scope=\"{ items }\">\r\n      <div class=\"panel-heading\">\r\n        <b-checkbox :value=\"allChecked\" @change.native=\"checkAll\" />{{ title }}\r\n      </div>\r\n      <sortable-item v-for=\"(item) in items\" :key=\"item.value\">\r\n        <div class=\"panel-block\">\r\n          <b-checkbox\r\n            v-model=\"checkedColumns\"\r\n            :disabled=\"item.required\"\r\n            :required=\"item.required\"\r\n            :native-value=\"item.value\"\r\n          >\r\n            {{ item.label }}\r\n          </b-checkbox>\r\n\r\n          <sortable-handle>\r\n            <b-icon icon=\"arrows-v\" size=\"is-small\"/>\r\n          </sortable-handle>\r\n        </div>\r\n      </sortable-item>\r\n    </div>\r\n  </sortable-list>\r\n</template>\r\n\r\n<script>\r\nimport _uniq from 'lodash/uniq'\r\nimport { SortableHandle, SortableItem, SortableList } from '../sortable'\r\n\r\nexport default {\r\n  name: 'nzColumnsPicker',\r\n\r\n  components: {\r\n    SortableHandle, SortableItem, SortableList\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type: Array,\r\n      default: () =>[]\r\n    },\r\n\r\n    columns: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n\r\n    title: {\r\n      type: String,\r\n      default: () => 'Columns'\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      allColumns: this.columns,\r\n      checkedColumns: _uniq(this.value.concat(this.columns.filter((column) => column.required).map((column) => column.value))),\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    allChecked() {\r\n      return this.checkedColumns.length && this.checkedColumns.length === this.columns.length\r\n    },\r\n\r\n    checked() {\r\n      return this.allColumns.map((column) => column.value)\r\n        .filter((column) => this.checkedColumns.includes(column))\r\n    },\r\n\r\n    required() {\r\n      return this.allColumns.filter((column) => column.required)\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    checked: {\r\n      immediate: true,\r\n      handler() {\r\n        this.$emit('input', this.checked)\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    checkAll(event) {\r\n      if (event.target.checked) {\r\n        this.checkedColumns = this.allColumns.map((column) => column.value)\r\n      } else {\r\n        this.checkedColumns = this.required.map((column) => column.value)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .columns-picker {\r\n    :focus {\r\n      outline: none;\r\n    }\r\n\r\n    .panel-block {\r\n      &:hover {\r\n        cursor: default;\r\n      }\r\n\r\n      justify-content: space-between;\r\n    }\r\n\r\n    .panel-heading {\r\n      padding-left: 0.6em;\r\n    }\r\n\r\n    .sortable-handle {\r\n      &:hover {\r\n        cursor: move;\r\n      }\r\n    }\r\n\r\n    .b-checkbox {\r\n      input[type=\"checkbox\"][disabled] + .check {\r\n          opacity: 0.5;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","var render, staticRenderFns\nimport script from \"./SortableList.vue?vue&type=script&lang=js&\"\nexport * from \"./SortableList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./ColumnsPicker.vue?vue&type=template&id=1776e883&\"\nimport script from \"./ColumnsPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./ColumnsPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ColumnsPicker.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".buttons .field[data-v-38a5a5de]{margin-bottom:0}.buttons .field.file[data-v-38a5a5de]{margin-right:.5rem}.buttons .field .upload[data-v-38a5a5de]:hover{cursor:pointer}.buttons .field .upload .button[data-v-38a5a5de]{margin-right:0}\", \"\"]);\n\n// exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-user-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"full_name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.full_name)+\" \"),_c('small',[_vm._v(\"<\"+_vm._s(props.option.email)+\">\")])])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-field :label=\"label\" class=\"nz-user-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\r\n    <b-field grouped>\r\n      <b-autocomplete\r\n        :value=\"value\"\r\n        :data=\"data\"\r\n        field=\"full_name\"\r\n        :loading=\"loading\"\r\n        @input=\"onInput\"\r\n        @select=\"onSelect\"\r\n        :icon=\"icon\"\r\n        :placeholder=\"placeholder\"\r\n        expanded\r\n        :autofocus=\"autofocus\"\r\n        :disabled=\"disabled\"\r\n      >\r\n        <template slot-scope=\"props\">\r\n          <div class=\"media\">\r\n            <div class=\"media-content\">\r\n              {{ props.option.full_name }} <small>&lt;{{ props.option.email }}&gt;</small>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n      </b-autocomplete>\r\n    </b-field>\r\n  </b-field>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport _debounce from 'lodash/debounce'\r\nimport _get from 'lodash/get'\r\n\r\nexport default {\r\n  name: 'nzUserAutocomplete',\r\n\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      default: 'User'\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'Search for user...'\r\n    },\r\n    user: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    route: {\r\n      type: String,\r\n      default: 'api.autocomplete.users.index'\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    error: Boolean,\r\n    message: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    except: {},\r\n    autofocus: Boolean,\r\n    disabled: Boolean\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      data: [],\r\n      selected: this.user || null,\r\n      loading: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    icon() {\r\n      return this.selected ? 'check' : null\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    user(value) {\r\n      this.selected = value\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    fetchData: _debounce(function() {\r\n      if (!this.value) return\r\n\r\n      this.data = []\r\n      this.loading = true\r\n\r\n      let params = {\r\n        name: this.value,\r\n      }\r\n\r\n      if (this.except) {\r\n        params.except = this.except\r\n      }\r\n\r\n      axios.get(route(this.route), { params }).then(({ data }) => {\r\n        data.data.forEach((item) => this.data.push(item))\r\n        this.loading = false\r\n      }, response => {\r\n        this.loading = false\r\n      })\r\n    }, 500),\r\n\r\n    onSelect(user) {\r\n      this.selected = user\r\n\r\n      this.$emit('select', user)\r\n    },\r\n\r\n    onInput(value) {\r\n      const currentValue = this.getValue(this.selected)\r\n      if (currentValue && currentValue !== value) {\r\n        this.onSelect(null)\r\n      }\r\n\r\n      this.$emit('input', value)\r\n\r\n      this.fetchData()\r\n    },\r\n\r\n    focusOnInput() {\r\n      this.$el.querySelector('input').focus()\r\n    },\r\n\r\n    /**\r\n     * Return display text for the input.\r\n     * If object, get value from path, or else just the value.\r\n     */\r\n    getValue(option) {\r\n      if (!option) return\r\n\r\n      return typeof option === 'object'\r\n        ? _get(option, 'full_name')\r\n        : option\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAutocomplete.vue?vue&type=template&id=5566d9c1&\"\nimport script from \"./UserAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".columns-picker :focus{outline:none}.columns-picker .panel-block{justify-content:space-between}.columns-picker .panel-block:hover{cursor:default}.columns-picker .panel-heading{padding-left:.6em}.columns-picker .sortable-handle:hover{cursor:move}.columns-picker .b-checkbox input[type=checkbox][disabled]+.check{opacity:.5}\", \"\"]);\n\n// exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field-observations-import\"},[(_vm.importing)?_c('div',{staticClass:\"is-flex is-flex-center flex-col\"},[_c('div',{staticClass:\"is-flex is-flex-center\"},[_c('span',{staticClass:\"loader mr-2\"}),_vm._v(\" \"),(_vm.currentImport)?_c('span',{staticClass:\"has-loader\"},[_vm._v(_vm._s(_vm.importStatus))]):_vm._e()]),_vm._v(\" \"),(_vm.cancellable)?_c('button',{staticClass:\"button is-text has-text-danger\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))]):_vm._e()]):_c('div',[_c('b-notification',{attrs:{\"type\":\"is-success\",\"active\":_vm.showSuccessMessage},on:{\"update:active\":function($event){_vm.showSuccessMessage=$event}}},[_vm._v(\"\\n      \"+_vm._s(_vm.trans('imports.success'))+\"\\n    \")]),_vm._v(\" \"),(_vm.canSubmitForUser)?_c('nz-user-autocomplete',{attrs:{\"label\":_vm.trans('labels.imports.user'),\"placeholder\":_vm.userFullName},on:{\"select\":_vm.setUserId},model:{value:(_vm.user),callback:function ($$v) {_vm.user=$$v},expression:\"user\"}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"level mb-4\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_c('div',{staticClass:\"buttons\"},[(!_vm.importing)?_c('button',{staticClass:\"button is-outlined\",class:[_vm.showColumnsSelection ? 'is-primary' : ''],attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleColumns}},[_vm._v(_vm._s(_vm.trans('labels.imports.choose_columns')))]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"level-item\"},[(!_vm.importing)?_c('b-field',{staticClass:\"file\"},[_c('b-upload',{attrs:{\"accept\":\".xlsx\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}},[_c('a',{staticClass:\"button\"},[_c('span',[_vm._v(_vm._s(_vm.trans('labels.imports.select_csv_file')))])])]),_vm._v(\" \"),(_vm.file)?_c('span',{staticClass:\"file-name\"},[_vm._v(_vm._s(_vm.file.name))]):_vm._e()],1):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"level-right\"},[_c('div',{staticClass:\"level-item\"},[_c('button',{staticClass:\"button is-primary is-outlined\",attrs:{\"type\":\"button\",\"disabled\":!_vm.canSubmit},on:{\"click\":_vm.submit}},[_c('b-icon',{attrs:{\"icon\":\"upload\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans('labels.imports.import')))])],1)])])]),_vm._v(\" \"),_c('b-checkbox',{model:{value:(_vm.hasHeading),callback:function ($$v) {_vm.hasHeading=$$v},expression:\"hasHeading\"}},[_vm._v(_vm._s(_vm.trans('labels.imports.has_heading')))]),_vm._v(\" \"),(_vm.canApproveCurated)?_c('div',[_c('b-checkbox',{model:{value:(_vm.approveCurated),callback:function ($$v) {_vm.approveCurated=$$v},expression:\"approveCurated\"}},[_vm._v(_vm._s(_vm.trans('labels.imports.approve_curated')))])],1):_vm._e()],1),_vm._v(\" \"),_c('b-collapse',{attrs:{\"open\":_vm.showColumnsSelection}},[_c('nz-columns-picker',{attrs:{\"columns\":_vm.columns,\"title\":_vm.trans('labels.imports.columns')},model:{value:(_vm.selectedColumns),callback:function ($$v) {_vm.selectedColumns=$$v},expression:\"selectedColumns\"}})],1),_vm._v(\" \"),(_vm.validationErrors.length)?_c('b-table',{staticClass:\"is-danger\",attrs:{\"data\":_vm.validationErrors,\"paginated\":true,\"per-page\":30,\"current-page\":_vm.currentErrorsPage},on:{\"update:currentPage\":function($event){_vm.currentErrorsPage=$event},\"update:current-page\":function($event){_vm.currentErrorsPage=$event}}},[_c('b-table-column',{attrs:{\"field\":\"row\",\"label\":_vm.trans('labels.imports.row_number'),\"numeric\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n      \"+_vm._s(row.row)+\"\\n    \")]}}],null,false,338368117)}),_vm._v(\" \"),_c('b-table-column',{attrs:{\"field\":\"error\",\"label\":_vm.trans('labels.imports.error')},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\"\\n      \"+_vm._s(row.error)+\"\\n    \")]}}],null,false,416747559)})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationsImport.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"field-observations-import\">\r\n    <div class=\"is-flex is-flex-center flex-col\" v-if=\"importing\">\r\n      <div class=\"is-flex is-flex-center\">\r\n        <span class=\"loader mr-2\"></span>\r\n\r\n        <span class=\"has-loader\" v-if=\"currentImport\">{{ importStatus }}</span>\r\n      </div>\r\n\r\n      <button\r\n        type=\"button\"\r\n        class=\"button is-text has-text-danger\"\r\n        v-if=\"cancellable\"\r\n        @click=\"cancel\"\r\n      >{{ trans('buttons.cancel') }}</button>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <b-notification type=\"is-success\" :active.sync=\"showSuccessMessage\">\r\n        {{ trans('imports.success') }}\r\n      </b-notification>\r\n\r\n      <nz-user-autocomplete\r\n        v-if=\"canSubmitForUser\"\r\n        :label=\"trans('labels.imports.user')\"\r\n        :placeholder=\"userFullName\"\r\n        @select=\"setUserId\"\r\n        v-model=\"user\"\r\n      />\r\n\r\n      <div class=\"level mb-4\">\r\n        <div class=\"level-left\">\r\n          <div class=\"level-item\">\r\n            <div class=\"buttons\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"button is-outlined\"\r\n                :class=\"[showColumnsSelection ? 'is-primary' : '']\"\r\n                @click=\"toggleColumns\"\r\n                v-if=\"!importing\"\r\n              >{{ trans('labels.imports.choose_columns') }}</button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"level-item\">\r\n            <b-field class=\"file\" v-if=\"!importing\">\r\n              <b-upload v-model=\"file\" accept=\".xlsx\">\r\n                <a class=\"button\">\r\n                  <span>{{ trans('labels.imports.select_csv_file') }}</span>\r\n                </a>\r\n              </b-upload>\r\n\r\n              <span class=\"file-name\" v-if=\"file\">{{ file.name }}</span>\r\n            </b-field>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"level-right\">\r\n          <div class=\"level-item\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"button is-primary is-outlined\"\r\n              :disabled=\"!canSubmit\"\r\n              @click=\"submit\"\r\n            >\r\n              <b-icon icon=\"upload\"></b-icon>\r\n\r\n              <span>{{ trans('labels.imports.import') }}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <b-checkbox v-model=\"hasHeading\">{{ trans('labels.imports.has_heading') }}</b-checkbox>\r\n\r\n      <div v-if=\"canApproveCurated\">\r\n        <b-checkbox v-model=\"approveCurated\">{{ trans('labels.imports.approve_curated') }}</b-checkbox>\r\n      </div>\r\n    </div>\r\n\r\n    <b-collapse :open=\"showColumnsSelection\">\r\n      <nz-columns-picker :columns=\"columns\" v-model=\"selectedColumns\" :title=\"trans('labels.imports.columns')\"/>\r\n    </b-collapse>\r\n\r\n    <b-table\r\n      v-if=\"validationErrors.length\"\r\n      :data=\"validationErrors\"\r\n      :paginated=\"true\"\r\n      :per-page=\"30\"\r\n      :current-page.sync=\"currentErrorsPage\"\r\n      class=\"is-danger\"\r\n    >\r\n      <b-table-column field=\"row\" :label=\"trans('labels.imports.row_number')\" numeric v-slot=\"{ row }\">\r\n        {{ row.row }}\r\n      </b-table-column>\r\n\r\n      <b-table-column field=\"error\" :label=\"trans('labels.imports.error')\" v-slot=\"{ row }\">\r\n        {{ row.error }}\r\n      </b-table-column>\r\n    </b-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _get from 'lodash/get'\r\nimport NzUserAutocomplete from '@/components/inputs/UserAutocomplete'\r\nimport NzColumnsPicker from '@/components/inputs/ColumnsPicker'\r\nexport default {\r\n  name: 'nzFieldObservationsImport',\r\n  components: {\r\n    NzUserAutocomplete,\r\n    NzColumnsPicker\r\n  },\r\n  props: {\r\n    columns: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    initial: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    runningImport: Object,\r\n    cancellableStatuses: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    canSubmitForUser: Boolean,\r\n    canApproveCurated: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      selectedColumns: this.initial,\r\n      showColumnsSelection: false,\r\n      file: null,\r\n      importing: false,\r\n      currentImport: this.runningImport,\r\n      validationErrors: [],\r\n      currentErrorsPage: 1,\r\n      submissionErrors: null,\r\n      hasHeading: false,\r\n      approveCurated: false,\r\n      showSuccessMessage: false,\r\n      cancelling: false,\r\n      userId: null,\r\n      user: null\r\n    }\r\n  },\r\n  computed: {\r\n    canSubmit() {\r\n      return !this.importing && this.file\r\n    },\r\n    validationFailed() {\r\n      return _get(this.currentImport, 'status') === 'validation_failed'\r\n    },\r\n    saved() {\r\n      return _get(this.currentImport, 'status') === 'saved'\r\n    },\r\n    savingFailed() {\r\n      return _get(this.currentImport, 'status') === 'saving_failed'\r\n    },\r\n    cancelled() {\r\n      return _get(this.currentImport, 'status') === 'cancelled'\r\n    },\r\n    importStatus() {\r\n      const status = _get(this.currentImport, 'status')\r\n      return this.trans(`imports.status.${status}`)\r\n    },\r\n    cancellable() {\r\n      return this.currentImport &&\r\n        this.cancellableStatuses.includes(this.currentImport.status) &&\r\n        !this.cancelling\r\n    },\r\n    userFullName() {\r\n      return window.App.User.full_name\r\n    }\r\n  },\r\n  created() {\r\n    if (this.currentImport && !this.saved) {\r\n      this.importing = true\r\n      this.startCheckingStatus()\r\n    }\r\n  },\r\n  methods: {\r\n    toggleColumns() {\r\n      this.showColumnsSelection = !this.showColumnsSelection\r\n    },\r\n    submit() {\r\n      if (!this.canSubmit) return\r\n      this.resetForm()\r\n      this.importing = true\r\n      this.currentImport = null\r\n      axios.post('/api/field-observation-imports', this.makeForm())\r\n        .then(this.handleSuccessfulSubmit)\r\n        .catch(this.handleFailedSubmit)\r\n    },\r\n    makeForm() {\r\n      const form = new FormData()\r\n      form.append('file', this.file)\r\n      this.selectedColumns.forEach((column) => {\r\n        form.append('columns[]', column)\r\n      })\r\n      if (this.hasHeading) {\r\n        form.append('has_heading', 1)\r\n      }\r\n      form.append('user_id', this.userId || '')\r\n      if (this.approveCurated) {\r\n        form.append('options[approve_curated]', 1)\r\n      }\r\n      return form\r\n    },\r\n    resetForm() {\r\n      this.validationErrors = []\r\n      this.currentErrorsPage = 1\r\n      this.showColumnsSelection = false\r\n      this.submissionErrors = null\r\n    },\r\n    handleSuccessfulSubmit({ data }) {\r\n      this.currentImport = data\r\n      this.file = null\r\n      this.startCheckingStatus()\r\n    },\r\n    handleFailedSubmit(error) {\r\n      this.importing = false\r\n      this.submissionErrors = _get(error, 'response.data.errors', [])\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: _get(error, 'response.data.message'),\r\n        type: 'is-danger'\r\n      })\r\n    },\r\n    startCheckingStatus() {\r\n      this.interval = setInterval(() => {\r\n        this.checkStatus()\r\n      }, 2500)\r\n    },\r\n    checkStatus() {\r\n      return axios.get(`/api/field-observation-imports/${this.currentImport.id}`).then(({ data }) => {\r\n        this.currentImport = data\r\n        if (this.validationFailed) {\r\n          return this.handleFailedValidation()\r\n        }\r\n        if (this.savingFailed) {\r\n          return this.handleFailedSaving()\r\n        }\r\n        if (this.cancelled) {\r\n          return this.stopCheckingImport()\r\n        }\r\n        if (this.saved) {\r\n          this.handleStored()\r\n        }\r\n      })\r\n    },\r\n    showValidationErrors() {\r\n      return axios.get(this.currentImport.errors_url).then(({ data }) => {\r\n        this.validationErrors = data\r\n      })\r\n    },\r\n    handleFailedValidation() {\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: this.trans('imports.validation_failed'),\r\n        type: 'is-danger'\r\n      })\r\n      this.showColumnsSelection = false\r\n      this.showValidationErrors()\r\n      this.stopCheckingImport()\r\n    },\r\n    handleFailedSaving() {\r\n      this.$buefy.toast.open({\r\n        duration: 2500,\r\n        message: this.trans('imports.saving_failed'),\r\n        type: 'is-danger'\r\n      })\r\n      this.showColumnsSelection = false\r\n      this.stopCheckingImport()\r\n    },\r\n    handleStored() {\r\n      this.showSuccessMessage = true\r\n      // Reset inputs\r\n      this.user = null\r\n      this.userId = null\r\n      this.stopCheckingImport()\r\n    },\r\n    cancel() {\r\n      if (!this.cancellable) return\r\n      this.cancelling = true\r\n      axios.post('/api/cancelled-imports', {\r\n        import_id: this.currentImport.id,\r\n      }).then(() => {\r\n        this.cancelling = false\r\n        this.stopCheckingImport()\r\n      }).catch(() => {\r\n        this.cancelling = false\r\n      })\r\n    },\r\n    stopCheckingImport() {\r\n      clearInterval(this.interval)\r\n      this.importing = false\r\n      this.currentImport = null\r\n    },\r\n    setUserId(user) {\r\n      this.userId = user ? user.id : null\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.buttons {\r\n  .field {\r\n    margin-bottom: 0;\r\n    &.file {\r\n      margin-right: .5rem;\r\n    }\r\n    .upload {\r\n      &:hover {\r\n        cursor: pointer;\r\n      }\r\n      .button {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render, staticRenderFns } from \"./FieldObservationsImport.vue?vue&type=template&id=38a5a5de&scoped=true&\"\nimport script from \"./FieldObservationsImport.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldObservationsImport.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FieldObservationsImport.vue?vue&type=style&index=0&id=38a5a5de&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38a5a5de\",\n  null\n  \n)\n\nexport default component.exports","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../node_modules/style-loader/index.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColumnsPicker.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}